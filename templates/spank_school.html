{% extends "base.html" %}

{% block title %}🧠 Spank School - DIY Learning Hub{% endblock %}

{% block head %}
<style>
    .hero-section {
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        color: white;
        padding: 120px 0 40px;
        margin-top: 0;
        min-height: 30vh;
        position: relative;
        z-index: 1;
    }
    
    .course-card {
        transition: all 0.3s ease;
        border: none;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        height: 100%;
    }
    
    .course-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .difficulty-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 2;
    }
    
    .reward-badge {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        font-size: 0.75rem;
        padding: 4px 12px;
        border-radius: 15px;
        font-weight: bold;
    }
    
    .course-stats {
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    .feature-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ff6b35, #f7931e);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        margin: 0 auto 20px;
    }
    
    .video-badge {
        background: #dc3545;
        color: white;
        font-size: 0.75rem;
        padding: 2px 8px;
        border-radius: 12px;
        margin-left: 8px;
    }
    
    .category-header {
        background: linear-gradient(135deg, #343a40, #495057);
        color: white;
        border-radius: 10px 10px 0 0;
        padding: 20px;
        margin-bottom: 0;
    }
    
    .category-content {
        background: #f8f9fa;
        border-radius: 0 0 10px 10px;
        padding: 25px;
    }
    
    .points-display {
        background: linear-gradient(135deg, #ffc107, #ff8f00);
        color: #212529;
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(255,193,7,0.3);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section py-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="display-5 fw-bold mb-3">
                    🧠 Welcome to Spank School
                </h1>
                <p class="lead mb-3">
                    Master DIY repairs with professional guidance from Hawaii's trusted handyman experts.
                </p>
                <div class="d-flex flex-wrap gap-3 align-items-center">
                    <button class="btn btn-warning btn-lg px-4" onclick="scrollToCourses()">
                        <i class="fas fa-play me-2"></i>Start Learning
                    </button>
                    <div class="points-display">
                        <i class="fas fa-dollar-sign me-2"></i>Earn $5 SPANK Bucks
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-center">
                <img src="{{ url_for('static', filename='images/spank-school-character.png') }}" 
                     alt="SPANK Mascot" class="img-fluid" style="max-height: 250px;">
            </div>
        </div>
    </div>
</section>

<!-- Knowledge Quiz Section -->
<section class="py-5 bg-warning">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 class="display-6 fw-bold text-dark mb-3">🎓 Monthly Knowledge Quiz</h2>
                <p class="lead text-dark mb-4">Test your DIY knowledge and earn $5 SPANK Bucks! Score 4 out of 5 to qualify for your monthly reward.</p>
                <div class="d-flex gap-3">
                    <button class="btn btn-primary btn-lg" onclick="startKnowledgeQuiz()">
                        <i class="fas fa-brain me-2"></i>Take Quiz Now
                    </button>
                    <button class="btn btn-outline-dark btn-lg" onclick="showProblemSolver()">
                        <i class="fas fa-tools me-2"></i>Problem Solver
                    </button>
                </div>
            </div>
            <div class="col-lg-4 text-center">
                <div class="quiz-reward-badge">
                    <i class="fas fa-dollar-sign fa-3x text-success mb-2"></i>
                    <h4 class="text-dark">$5 SPANK Bucks</h4>
                    <small class="text-muted">Monthly Quiz Reward</small>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-video"></i>
                </div>
                <h5>Video Tutorials</h5>
                <p class="text-muted">Step-by-step video guides with professional tips</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h5>Interactive Learning</h5>
                <p class="text-muted">Quizzes, challenges, and hands-on practice</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h5>Safety First</h5>
                <p class="text-muted">Professional safety guidance for every project</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-award"></i>
                </div>
                <h5>Earn SPANK Bucks</h5>
                <p class="text-muted">Complete courses and earn $5 SPANK Bucks</p>
            </div>
        </div>
    </div>
</section>

<!-- Course Categories -->
<section class="py-5" id="courses">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Choose Your Learning Path</h2>
            <p class="lead text-muted">From beginner basics to intermediate repairs</p>
        </div>

        <!-- Plumbing Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-wrench me-3"></i>Plumbing Essentials</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Fix a Leaky Faucet
                                        <span class="video-badge">VISUAL</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Stop the drip and save your sanity. Learn to identify, disassemble, and fix common faucet problems.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('faucet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Toilet Running Water Fix
                                        <span class="video-badge">VISUAL</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>4 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Master toilet repair with our comprehensive 4-step guide to stop running water.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('toilet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Unclog a Drain Safely</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>4 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Three safe methods to unclog drains without chemicals or damage to your pipes.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('drain')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Electrical Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-bolt me-3"></i>Electrical Safety</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Replace an Outlet</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Safely replace electrical outlets with proper power shutoff and wiring techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('outlet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Install a Light Switch</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>2 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Learn switch wiring basics and safe installation techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('lightswitch')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Circuit Breaker Basics</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Understand your electrical panel and when to call professionals.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('breaker')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home Improvement Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-home me-3"></i>Home Improvement</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Patch Drywall</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>15 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">Fix holes and damage in drywall with professional techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('drywall')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Touch-Up Paint</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>8 min • 
                                        <i class="fas fa-list-ol me-1"></i>3 lessons
                                    </p>
                                    <p class="card-text">Color matching secrets and professional touch-up techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('touchup')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Smart Home Basics</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>45 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">DIY smart home upgrades you can actually do yourself.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('smarthome')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Tools Section -->
        <div class="row">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-tools me-3"></i>Interactive Learning Tools</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-search"></i>
                                    </div>
                                    <h5 class="card-title">Problem Solver</h5>
                                    <p class="card-text">Step-by-step troubleshooting for common home issues</p>
                                    <button class="btn btn-outline-primary w-100" onclick="startTroubleshooter()">
                                        <i class="fas fa-cogs me-2"></i>Start Solver
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <h5 class="card-title">Knowledge Quiz</h5>
                                    <p class="card-text">Test your DIY knowledge and earn $5 SPANK Bucks</p>
                                    <button class="btn btn-outline-primary w-100" onclick="startQuiz()">
                                        <i class="fas fa-question-circle me-2"></i>Take Quiz
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-video"></i>
                                    </div>
                                    <h5 class="card-title">Live Q&A</h5>
                                    <p class="card-text">Join weekly live sessions with SPANK experts</p>
                                    <button class="btn btn-outline-primary w-100" onclick="joinLiveSession()">
                                        <i class="fas fa-users me-2"></i>Join Session
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-5 bg-dark text-white">
    <div class="container text-center">
        <h2 class="mb-4">Need Professional Help?</h2>
        <p class="lead mb-4">Some repairs are best left to the experts. SPANK is here when you need us.</p>
        <div class="d-flex flex-wrap justify-content-center gap-3">
            <a href="{{ url_for('consultation') }}" class="btn btn-warning btn-lg px-4">
                <i class="fas fa-calendar-check me-2"></i>Book Free Consultation
            </a>
            <a href="tel:(808)599-0908" class="btn btn-outline-light btn-lg px-4">
                <i class="fas fa-phone me-2"></i>Call (808) 599-0908
            </a>
        </div>
    </div>
</section>

<!-- Course Modal -->
<div class="modal fade" id="courseModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="courseModalTitle">Course Lesson</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="courseModalBody">
                <!-- Course content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="nextLessonBtn">Next Lesson</button>
            </div>
        </div>
    </div>
</div>

<script>
// Course data structure
const courses = {
    faucet: {
        title: "Fix a Leaky Faucet",
        level: "Beginner",
        lessons: [
            {
                title: "Know Your Faucet",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSIxMDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZGVlMmU2IiByeD0iMTAiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjIwIiBmaWxsPSIjMDA3YmZmIi8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RmF1Y2V0IFR5cGVzICYgUGFydHM8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSIxMDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZGVlMmU2IiByeD0iMTAiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjIwIiBmaWxsPSIjMDA3YmZmIi8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RmF1Y2V0IFR5cGVzICYgUGFydHM8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Faucet Types and Parts">
                    </div>
                    <h6>🎯 Goal: Identify faucet type and leak source</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Determine faucet type:</strong> compression, cartridge, ball, or ceramic disk</li>
                        <li><strong>Check where the leak comes from:</strong> spout, base, or handle</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Cartridge faucets are most common and easy to fix.
                    </div>
                `
            },
            {
                title: "Disassemble & Inspect",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjE1MCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RGlzYXNzZW1ibHkgJiBJbnNwZWN0aW9uPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjE1MCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RGlzYXNzZW1ibHkgJiBJbnNwZWN0aW9uPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Faucet Disassembly">
                    </div>
                    <h6>🎯 Goal: Open up the faucet safely and locate the worn-out part</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Shut off water supply</strong></li>
                        <li><strong>Plug drain with rag or stopper</strong></li>
                        <li><strong>Remove handle and cartridge or washer</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Take the part to the hardware store to match replacement.
                    </div>
                `
            },
            {
                title: "Replace & Reassemble",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI5MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxMjAiIGZpbGw9IiMyOGE3NDUiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjUiIGZpbGw9IiNmZmZmZmYiLz48dGV4dCB4PSIyMDAiIHk9IjI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmaWxsPSIjMzQzYTQwIj5GaXhlZCBGYXVjZXQ8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI5MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxMjAiIGZpbGw9IiMyOGE3NDUiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjUiIGZpbGw9IiNmZmZmZmYiLz48dGV4dCB4PSIyMDAiIHk9IjI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmaWxsPSIjMzQzYTQwIj5GaXhlZCBGYXVjZXQ8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Reassembled Faucet">
                    </div>
                    <h6>🎯 Goal: Install the new component and confirm it's leak-free</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Insert new cartridge or washer</strong></li>
                        <li><strong>Tighten gently and reassemble</strong></li>
                        <li><strong>Turn water back on and test</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> A small dab of plumber's grease helps with longevity.
                    </div>
                `
            }
        ]
    },
    toilet: {
        title: "Toilet Running Water Fix",
        level: "Intermediate",
        lessons: [
            {
                title: "How a Toilet Works",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjEyMCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+VG9pbGV0IFRhbmsgUGFydHM8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjEyMCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+VG9pbGV0IFRhbmsgUGFydHM8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Toilet Tank Parts">
                    </div>
                    <h6>🎯 Goal: Understand how the tank, flapper, and fill valve work together</h6>
                    <h6>🛠️ Key Components:</h6>
                    <ul>
                        <li><strong>Tank</strong> - Holds water for flushing</li>
                        <li><strong>Flapper</strong> - Rubber seal at tank bottom (orange circle)</li>
                        <li><strong>Fill Valve</strong> - Controls water entering tank (yellow circle)</li>
                        <li><strong>Float</strong> - Signals when tank is full</li>
                        <li><strong>Chain</strong> - Connects handle to flapper</li>
                    </ul>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> A worn flapper or misaligned float is often the culprit.
                    </div>
                `
            },
            {
                title: "Diagnose the Running Water",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjZGM0MDQ1IiByeD0iNSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjAiIGZpbGw9IiNmZjAwMDAiLz48dGV4dCB4PSIyMDAiIHk9IjI3MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EaWFnbm9zaXMgVGVzdDwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjZGM0MDQ1IiByeD0iNSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjAiIGZpbGw9IiNmZjAwMDAiLz48dGV4dCB4PSIyMDAiIHk9IjI3MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EaWFnbm9zaXMgVGVzdDwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Food Coloring Test">
                    </div>
                    <h6>🎯 Goal: Find out if it's the flapper, fill valve, or overflow</h6>
                    <h6>🛠️ Food Coloring Test:</h6>
                    <ol>
                        <li><strong>Drop food coloring in the tank</strong> (red circle shows coloring)</li>
                        <li><strong>Wait 5-10 minutes without flushing</strong></li>
                        <li><strong>Check the bowl</strong> - If colored water appears → flapper is leaking</li>
                    </ol>
                    <div class="alert alert-info">
                        <strong>🔊 Listen for Sounds:</strong> Constant hiss = fill valve problem, intermittent = flapper
                    </div>
                `
            },
            {
                title: "Replace Parts",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxyZWN0IHg9IjUwIiB5PSIzMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzI4YTc0NSIgcng9IjgiLz48cGF0aCBkPSJNIDI1MCAzMCBMIDM1MCA5MCBMIDI1MCA5MCBaIiBmaWxsPSIjZmY2YjM1Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+SW5zdGFsbCBOZXcgUGFydHM8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxyZWN0IHg9IjUwIiB5PSIzMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzI4YTc0NSIgcng9IjgiLz48cGF0aCBkPSJNIDI1MCAzMCBMIDM1MCA5MCBMIDI1MCA5MCBaIiBmaWxsPSIjZmY2YjM1Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+SW5zdGFsbCBOZXcgUGFydHM8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Installing New Parts">
                    </div>
                    <h6>🎯 Goal: Perform a quick hardware swap</h6>
                    <h6>🛠️ Installation Steps:</h6>
                    <ol>
                        <li><strong>Turn off water at shutoff valve</strong> (green rectangle shows valve)</li>
                        <li><strong>Flush to drain tank</strong></li>
                        <li><strong>Replace flapper</strong> (hooks and chain) OR <strong>fill valve</strong> (orange triangle shows new part)</li>
                        <li><strong>Turn water back on and test</strong></li>
                    </ol>
                    <div class="alert alert-warning">
                        <strong>⚠️ Important:</strong> Don't overtighten plastic components - they can crack.
                    </div>
                `
            },
            {
                title: "Fine-Tune Water Level",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTYwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMjBjOTk3IiByeD0iNSIvPjxsaW5lIHgxPSIxMDAiIHkxPSIxNDAiIHgyPSIzMDAiIHkyPSIxNDAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48Y2lyY2xlIGN4PSIyODAiIGN5PSIxMjAiIHI9IjEyIiBmaWxsPSIjZmZjMTA3Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+UGVyZmVjdCBXYXRlciBMZXZlbDwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTYwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMjBjOTk3IiByeD0iNSIvPjxsaW5lIHgxPSIxMDAiIHkxPSIxNDAiIHgyPSIzMDAiIHkyPSIxNDAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48Y2lyY2xlIGN4PSIyODAiIGN5PSIxMjAiIHI9IjEyIiBmaWxsPSIjZmZjMTA3Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+UGVyZmVjdCBXYXRlciBMZXZlbDwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Proper Water Level">
                    </div>
                    <h6>🎯 Goal: Prevent wasteful overfilling</h6>
                    <h6>🛠️ Adjustment Steps:</h6>
                    <ol>
                        <li><strong>Check current water level</strong> - Should be 1" below overflow (dashed line)</li>
                        <li><strong>Adjust float arm or screw</strong> - Move yellow float up/down</li>
                        <li><strong>Test multiple flushes</strong> - Ensure consistent operation</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Perfect Result:</strong> Water should fill to the green level and stop automatically.
                    </div>
                `
            }
        ]
    },
    drain: {
        title: "Unclog a Drain Safely",
        level: "Beginner",
        lessons: [
            {
                title: "Know the Signs & Tools",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iODAiIGZpbGw9IiNkZWUyZTYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSI0Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjUwIiB5PSIyNTAiIHdpZHRoPSI2MCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48cmVjdCB4PSIxNDAiIHk9IjI1MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjxyZWN0IHg9IjI1MCIgeT0iMjUwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZmZjMTA3IiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjkwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPkRyYWluIFRvb2xzPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iODAiIGZpbGw9IiNkZWUyZTYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSI0Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjUwIiB5PSIyNTAiIHdpZHRoPSI2MCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48cmVjdCB4PSIxNDAiIHk9IjI1MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjxyZWN0IHg9IjI1MCIgeT0iMjUwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZmZjMTA3IiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjkwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPkRyYWluIFRvb2xzPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Drain Tools">
                    </div>
                    <h6>🎯 Goal: Recognize a clogged drain and gather tools</h6>
                    <h6>🛠️ Warning Signs:</h6>
                    <ul>
                        <li><strong>Slow drainage, bubbling, or bad smells</strong></li>
                        <li><strong>Water backing up in sink or tub</strong></li>
                    </ul>
                    <h6>🧰 Safe Tools You'll Need:</h6>
                    <ul>
                        <li>Plunger (orange tool)</li>
                        <li>Drain snake (green tool)</li>
                        <li>Baking soda & vinegar (yellow tool)</li>
                        <li>Bucket for cleanup</li>
                    </ul>
                    <div class="alert alert-warning">
                        <strong>⚠️ Avoid:</strong> Chemical drain cleaners damage pipes over time.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">Which is the safest method for unclogging a bathroom sink?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-1', 'wrong', 'Bleach is dangerous and can damage pipes.')">A) Bleach</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-1', 'correct', 'Correct! A drain snake physically removes blockages safely.')">B) Snake</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-1', 'wrong', 'Boiling saltwater can crack pipes and fixtures.')">C) Boiling saltwater</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-1', 'wrong', 'Motor oil would create a much worse problem!')">D) Motor oil</button>
                        </div>
                        <div id="drain-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Plunge It First",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjE4MCIgeT0iNTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI2MCIgcj0iMjAiIGZpbGw9IiNmZjZiMzUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5QbHVuZ2luZyBUZWNobmlxdWU8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjE4MCIgeT0iNTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI2MCIgcj0iMjAiIGZpbGw9IiNmZjZiMzUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5QbHVuZ2luZyBUZWNobmlxdWU8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Plunging Technique">
                    </div>
                    <h6>🎯 Goal: Try the most basic fix first</h6>
                    <h6>🛠️ Plunging Steps:</h6>
                    <ol>
                        <li><strong>Fill the sink slightly with water</strong> (blue circle shows water level)</li>
                        <li><strong>Cover overflow holes with a damp cloth</strong></li>
                        <li><strong>Use a cup plunger</strong> (orange tool) to push straight down in bursts</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Keep the seal tight and use strong, rhythmic motions.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">What should you do before plunging a bathroom sink?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-2', 'wrong', 'Chemical cleaners should never be used with plunging.')">A) Use drain cleaner</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-2', 'correct', 'Correct! Covering overflow holes creates better suction.')">B) Cover overflow holes</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-2', 'wrong', 'Lubricant would make the problem worse.')">C) Spray lubricant</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-2', 'wrong', 'Hot water alone won\\'t create the pressure needed.')">D) Flush with hot water</button>
                        </div>
                        <div id="drain-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Snake It Out",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxwYXRoIGQ9Ik0gMjAwIDEzMCBRIDIyMCAxNTAgMjAwIDE3MCBRIDE4MCAyMDAgMjAwIDIyMCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjYiIGZpbGw9Im5vbmUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIyMjAiIHI9IjgiIGZpbGw9IiNkYzQwNDUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EcmFpbiBTbmFrZSBpbiBBY3Rpb248L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxwYXRoIGQ9Ik0gMjAwIDEzMCBRIDIyMCAxNTAgMjAwIDE3MCBRIDE4MCAyMDAgMjAwIDIyMCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjYiIGZpbGw9Im5vbmUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIyMjAiIHI9IjgiIGZpbGw9IiNkYzQwNDUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EcmFpbiBTbmFrZSBpbiBBY3Rpb248L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Drain Snake">
                    </div>
                    <h6>🎯 Goal: Physically remove the clog</h6>
                    <h6>🛠️ Snake Steps:</h6>
                    <ol>
                        <li><strong>Slowly insert the snake down the drain</strong> (green wavy line)</li>
                        <li><strong>Rotate to snag hair or debris</strong> (red dot shows clog)</li>
                        <li><strong>Gently pull out and clean off</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Use a plastic zip snake for hair — they're cheap and effective.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">What's the main goal of a drain snake?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-3', 'wrong', 'Snakes don\\'t melt anything - that\\'s chemicals.')">A) Melt gunk</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-3', 'wrong', 'Never push clogs deeper - that makes it worse!')">B) Push clogs deeper</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-3', 'correct', 'Correct! Snakes grab and pull out hair, soap, and debris.')">C) Pull out blockages</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-3', 'wrong', 'Pressure is what plungers do, not snakes.')">D) Create pressure</button>
                        </div>
                        <div id="drain-quiz-3" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Natural Drain Bomb",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxjaXJjbGUgY3g9IjE2MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjE4MCIgY3k9IjgwIiByPSI4IiBmaWxsPSIjMjBjOTk3Ii8+PGNpcmNsZSBjeD0iMjIwIiBjeT0iODAiIHI9IjgiIGZpbGw9IiMyMGM5OTciLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI3MCIgcj0iMTAiIGZpbGw9IiMyMGM5OTciLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5OYXR1cmFsIEZpenppbmcgQWN0aW9uPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxjaXJjbGUgY3g9IjE2MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjE4MCIgY3k9IjgwIiByPSI4IiBmaWxsPSIjMjBjOTk3Ii8+PGNpcmNsZSBjeD0iMjIwIiBjeT0iODAiIHI9IjgiIGZpbGw9IiMyMGM5OTciLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI3MCIgcj0iMTAiIGZpbGw9IiMyMGM5OTciLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5OYXR1cmFsIEZpenppbmcgQWN0aW9uPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Baking Soda and Vinegar">
                    </div>
                    <h6>🎯 Goal: Use a safe bubbling solution</h6>
                    <h6>🛠️ Natural Bomb Steps:</h6>
                    <ol>
                        <li><strong>Pour ½ cup of baking soda into the drain</strong> (yellow circles)</li>
                        <li><strong>Add 1 cup of vinegar</strong> — watch it fizz! (green bubbles)</li>
                        <li><strong>Cover for 10 minutes, then flush with hot water</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Monthly use keeps drains fresh and clear.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">What does vinegar do when combined with baking soda?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-4', 'correct', 'Correct! The reaction creates fizzing foam that helps break down gunk.')">A) Makes cleaning foam</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-4', 'wrong', 'Vinegar and baking soda don\\'t damage metal pipes.')">B) Eats metal</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-4', 'wrong', 'This combination doesn\\'t release bleach.')">C) Releases bleach</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-4', 'wrong', 'Water pressure comes from plumbing, not chemical reactions.')">D) Neutralizes pressure</button>
                        </div>
                        <div id="drain-quiz-4" class="mt-2" style="display: none;"></div>
                    </div>
                `
            }
        ]
    },
    drywall: {
        title: "Patch Drywall",
        level: "Beginner",
        lessons: [
            {
                title: "Assess the Damage",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMTIwIiByPSI1IiBmaWxsPSIjZGM0MDQ1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSIxNSIgZmlsbD0iI2ZmNmIzNSIvPjxyZWN0IHg9IjI2MCIgeT0iMTAwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiMyOGE3NDUiIHJ4PSI1Ii8+PHRleHQgeD0iMjAwIiB5PSIyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+RGFtYWdlIFNpemVzPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMTIwIiByPSI1IiBmaWxsPSIjZGM0MDQ1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSIxNSIgZmlsbD0iI2ZmNmIzNSIvPjxyZWN0IHg9IjI2MCIgeT0iMTAwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiMyOGE3NDUiIHJ4PSI1Ii8+PHRleHQgeD0iMjAwIiB5PSIyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+RGFtYWdlIFNpemVzPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Different Damage Sizes">
                    </div>
                    <h6>🎯 Goal: Know what type of repair you need</h6>
                    <h6>🛠️ Damage Types:</h6>
                    <ul>
                        <li><strong>Small:</strong> Nail/screw holes (red dot) - pencil eraser-sized</li>
                        <li><strong>Medium:</strong> Anchor holes (orange circle) - quarter-sized</li>
                        <li><strong>Large:</strong> Cut out sections (green square) - fist-sized damage</li>
                    </ul>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Pencil eraser-sized holes can be patched in minutes.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">Which damage type needs a wallboard patch and mesh tape?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drywall-quiz-1', 'wrong', 'Nail holes just need spackle.')">A) Nail hole</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drywall-quiz-1', 'wrong', 'Paint bubbles need scraping, not patches.')">B) Paint bubble</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drywall-quiz-1', 'correct', 'Correct! Large holes need proper backing and mesh tape for strength.')">C) Large hole</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drywall-quiz-1', 'wrong', 'Screw pops just need re-screwing and touch-up.')">D) Screw pop</button>
                        </div>
                        <div id="drywall-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            }
        ]
    }
};

// JavaScript functionality
let currentCourse = null;
let currentLesson = 0;

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    console.log('SPANK School loaded successfully');
});

// Smooth scroll to courses
function scrollToCourses() {
    document.getElementById('courses').scrollIntoView({ behavior: 'smooth' });
}

// Start a course
function startCourse(courseId) {
    currentCourse = courses[courseId];
    if (!currentCourse) {
        alert('Course content coming soon! SPANK is developing comprehensive guides for all repairs.');
        return;
    }
    
    currentLesson = 0;
    showLesson();
}

// Show current lesson with visual guide
function showLesson() {
    if (!currentCourse || currentLesson >= currentCourse.lessons.length) return;
    
    const lesson = currentCourse.lessons[currentLesson];
    const modal = new bootstrap.Modal(document.getElementById('courseModal'));
    
    document.getElementById('courseModalTitle').innerHTML = `
        ${currentCourse.title} - Step ${currentLesson + 1} of ${currentCourse.lessons.length}
        <small class="text-muted d-block">${lesson.title}</small>
    `;
    
    // Create lesson content with navigation
    const lessonContent = `
        <div class="lesson-container">
            <div class="lesson-progress mb-3">
                <div class="progress" style="height: 8px;">
                    <div class="progress-bar bg-warning" style="width: ${((currentLesson + 1) / currentCourse.lessons.length) * 100}%"></div>
                </div>
                <small class="text-muted">Step ${currentLesson + 1} of ${currentCourse.lessons.length}</small>
            </div>
            
            <div class="lesson-content">
                ${lesson.content}
            </div>
            
            <div class="lesson-navigation mt-4 d-flex justify-content-between">
                <button class="btn btn-outline-secondary" onclick="previousLesson()" ${currentLesson === 0 ? 'disabled' : ''}>
                    <i class="fas fa-arrow-left me-2"></i>Previous
                </button>
                
                <div class="lesson-indicators">
                    ${currentCourse.lessons.map((_, index) => 
                        `<span class="badge ${index === currentLesson ? 'bg-warning' : 'bg-light'} me-1">${index + 1}</span>`
                    ).join('')}
                </div>
                
                <button class="btn btn-primary" onclick="${currentLesson < currentCourse.lessons.length - 1 ? 'nextLesson()' : 'completeCourse()'}">
                    ${currentLesson < currentCourse.lessons.length - 1 ? 'Next <i class="fas fa-arrow-right ms-2"></i>' : 'Complete <i class="fas fa-check ms-2"></i>'}
                </button>
            </div>
        </div>
    `;
    
    document.getElementById('courseModalBody').innerHTML = lessonContent;
    
    // Update modal footer
    const nextBtn = document.getElementById('nextLessonBtn');
    nextBtn.style.display = 'none'; // Hide default button since we have custom navigation
    
    modal.show();
}

// Previous lesson function
function previousLesson() {
    if (currentLesson > 0) {
        currentLesson--;
        showLesson();
    }
}

// Next lesson
function nextLesson() {
    currentLesson++;
    showLesson();
}

// Complete course
function completeCourse() {
    bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
    
    setTimeout(() => {
        const email = prompt(`Congratulations! You've completed ${currentCourse.title}!\n\nEnter your email to receive $5 SPANK Bucks:`);
        if (email && email.includes('@')) {
            alert(`Thank you! Your $5 SPANK Bucks will be emailed to ${email} within 24 hours.`);
            // In a real implementation, this would send the email
            console.log(`Send $5 SPANK Bucks to: ${email} for completing: ${currentCourse.title}`);
        }
    }, 500);
}

// Send SPANK Bucks reward
function sendSpankBucks(email, amount, reason) {
    // In a real implementation, this would integrate with email service
    console.log(`Sending $${amount} SPANK Bucks to ${email} for: ${reason}`);
    return true;
}

// Interactive functions
function showAnswer(quizId, answer) {
    const element = document.getElementById(quizId);
    if (element) {
        element.innerHTML = `<div class="alert alert-light mt-2"><strong>Answer:</strong> ${answer}</div>`;
        element.style.display = 'block';
    }
}

function watchVideo(videoId) {
    const modal = new bootstrap.Modal(document.getElementById('courseModal'));
    document.getElementById('courseModalTitle').textContent = 'SPANK Video Tutorial';
    document.getElementById('courseModalBody').innerHTML = `
        <div class="text-center">
            <div class="alert alert-info">
                <h6><i class="fas fa-video me-2"></i>Professional Video Tutorial</h6>
                <p class="mb-2">Learn with SPANK's expert demonstration</p>
                <p><strong>Coming Soon:</strong> Full video library with step-by-step repairs</p>
            </div>
            <div class="mb-3">
                <p>This video covers professional techniques and safety tips.</p>
            </div>
            <button class="btn btn-primary" onclick="window.open('tel:(808)599-0908')">
                Call SPANK for Professional Service
            </button>
        </div>
    `;
    document.getElementById('nextLessonBtn').textContent = 'Close';
    document.getElementById('nextLessonBtn').onclick = () => {
        bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
    };
    modal.show();
}

function startTroubleshooter() {
    alert('Interactive Problem Solver coming soon! This will guide you through diagnosing common home issues step-by-step.');
}

function startQuiz() {
    const email = prompt('Take our DIY Knowledge Quiz!\n\nEnter your email to receive $5 SPANK Bucks upon completion:');
    if (email && email.includes('@')) {
        alert(`Great! Complete the quiz and your $5 SPANK Bucks will be emailed to ${email} within 24 hours.`);
        // Quiz implementation would go here
        console.log(`Send $5 SPANK Bucks to: ${email} for completing quiz`);
    }
}

function joinLiveSession() {
    alert('Live Q&A sessions coming soon! Join weekly sessions with SPANK experts to get your questions answered.');
}

// Enhanced quiz functionality for interactive courses
function showQuizAnswer(quizId, result, explanation) {
    const element = document.getElementById(quizId);
    if (element) {
        const alertClass = result === 'correct' ? 'alert-success' : 'alert-danger';
        const icon = result === 'correct' ? '✓' : '✗';
        element.innerHTML = `<div class="alert ${alertClass} mt-2"><strong>${icon} ${explanation}</strong></div>`;
        element.style.display = 'block';
        
        // Award points for correct answers
        if (result === 'correct') {
            updatePoints(2);
        }
    }
}

// Knowledge Quiz System
const knowledgeQuiz = {
    questions: [
        {
            question: "What's the first thing you should do before replacing a light switch?",
            options: ["Remove the wall plate", "Test the new switch", "Turn off the power", "Grab a hammer"],
            correct: 2,
            explanation: "Always shut off power at the breaker before touching electrical components."
        },
        {
            question: "What tool helps you detect a stud behind drywall?",
            options: ["Tape measure", "Stud finder", "Level", "Flashlight"],
            correct: 1,
            explanation: "Stud finders use sensors to locate wooden framing behind walls."
        },
        {
            question: "What's a good replacement for caulk that has cracked along the tub?",
            options: ["Duct tape", "Fresh caulk", "Paint", "Silicone spray"],
            correct: 1,
            explanation: "Recaulking is the proper way to reseal a tub or sink joint."
        },
        {
            question: "What color is typically used for the 'hot' electrical wire?",
            options: ["Green", "White", "Black or red", "Blue"],
            correct: 2,
            explanation: "Black or red wires carry current in most home circuits."
        },
        {
            question: "What's the purpose of primer before painting a patched wall?",
            options: ["Makes the paint dry faster", "Hides the patch and improves paint adhesion", "Adds shine", "Makes it washable"],
            correct: 1,
            explanation: "Primer seals spackle and ensures even color coverage."
        }
    ],
    currentQuestion: 0,
    score: 0,
    answers: []
};

function startKnowledgeQuiz() {
    knowledgeQuiz.currentQuestion = 0;
    knowledgeQuiz.score = 0;
    knowledgeQuiz.answers = [];
    
    const modal = new bootstrap.Modal(document.getElementById('knowledgeQuizModal'));
    showQuizQuestion();
    modal.show();
}

function showQuizQuestion() {
    const quiz = knowledgeQuiz;
    const question = quiz.questions[quiz.currentQuestion];
    
    const content = `
        <div class="quiz-header mb-4">
            <div class="progress mb-3">
                <div class="progress-bar bg-warning" style="width: ${((quiz.currentQuestion + 1) / quiz.questions.length) * 100}%"></div>
            </div>
            <h6 class="text-muted">Question ${quiz.currentQuestion + 1} of ${quiz.questions.length}</h6>
        </div>
        
        <div class="quiz-question mb-4">
            <h5 class="mb-4">${question.question}</h5>
            <div class="quiz-options">
                ${question.options.map((option, index) => `
                    <button class="btn btn-outline-primary w-100 mb-2 quiz-option" 
                            onclick="selectQuizAnswer(${index})" 
                            data-option="${index}">
                        ${String.fromCharCode(65 + index)}) ${option}
                    </button>
                `).join('')}
            </div>
        </div>
        
        <div id="quiz-feedback" class="mb-3" style="display: none;"></div>
    `;
    
    document.getElementById('quizContent').innerHTML = content;
    document.getElementById('quizActionBtn').textContent = 'Next Question';
    document.getElementById('quizActionBtn').onclick = nextQuizQuestion;
}

function selectQuizAnswer(selectedIndex) {
    const quiz = knowledgeQuiz;
    const question = quiz.questions[quiz.currentQuestion];
    const isCorrect = selectedIndex === question.correct;
    
    // Store answer
    quiz.answers.push(selectedIndex);
    if (isCorrect) quiz.score++;
    
    // Show feedback
    const feedback = document.getElementById('quiz-feedback');
    const icon = isCorrect ? '✓' : '✗';
    const alertClass = isCorrect ? 'alert-success' : 'alert-danger';
    
    feedback.innerHTML = `
        <div class="alert ${alertClass}">
            <strong>${icon} ${isCorrect ? 'Correct!' : 'Incorrect'}</strong>
            <p class="mb-0 mt-2">${question.explanation}</p>
        </div>
    `;
    feedback.style.display = 'block';
    
    // Disable all option buttons
    document.querySelectorAll('.quiz-option').forEach(btn => {
        btn.disabled = true;
        if (parseInt(btn.dataset.option) === question.correct) {
            btn.classList.add('btn-success');
            btn.classList.remove('btn-outline-primary');
        } else if (parseInt(btn.dataset.option) === selectedIndex && !isCorrect) {
            btn.classList.add('btn-danger');
            btn.classList.remove('btn-outline-primary');
        }
    });
}

function nextQuizQuestion() {
    const quiz = knowledgeQuiz;
    
    if (quiz.currentQuestion < quiz.questions.length - 1) {
        quiz.currentQuestion++;
        showQuizQuestion();
    } else {
        showQuizResults();
    }
}

function showQuizResults() {
    const quiz = knowledgeQuiz;
    const passed = quiz.score >= 4;
    const percentage = Math.round((quiz.score / quiz.questions.length) * 100);
    
    const content = `
        <div class="text-center">
            <div class="quiz-result-icon mb-4">
                <i class="fas fa-${passed ? 'trophy' : 'redo'} fa-4x text-${passed ? 'warning' : 'muted'}"></i>
            </div>
            
            <h3 class="mb-3">${passed ? 'Congratulations!' : 'Almost There!'}</h3>
            <h4 class="mb-4">You scored ${quiz.score} out of ${quiz.questions.length} (${percentage}%)</h4>
            
            ${passed ? `
                <div class="alert alert-success">
                    <h5><i class="fas fa-dollar-sign me-2"></i>You've earned $5 SPANK Bucks!</h5>
                    <p class="mb-0">Check your email for your reward confirmation.</p>
                </div>
            ` : `
                <div class="alert alert-info">
                    <h6>Review SPANK School lessons and try again next week!</h6>
                    <p class="mb-0">You need 4 or more correct answers to earn SPANK Bucks.</p>
                </div>
            `}
            
            <div class="mt-4">
                <h6>Your Answers:</h6>
                ${quiz.questions.map((q, index) => {
                    const userAnswer = quiz.answers[index];
                    const isCorrect = userAnswer === q.correct;
                    return `
                        <div class="text-start mb-2">
                            <small class="text-muted">Q${index + 1}: ${q.question}</small><br>
                            <span class="badge bg-${isCorrect ? 'success' : 'danger'} me-2">
                                ${isCorrect ? '✓' : '✗'}
                            </span>
                            Your answer: ${q.options[userAnswer]}
                            ${!isCorrect ? `<br><small class="text-success">Correct: ${q.options[q.correct]}</small>` : ''}
                        </div>
                    `;
                }).join('')}
            </div>
        </div>
    `;
    
    document.getElementById('quizContent').innerHTML = content;
    document.getElementById('quizActionBtn').textContent = 'Close';
    document.getElementById('quizActionBtn').onclick = () => {
        bootstrap.Modal.getInstance(document.getElementById('knowledgeQuizModal')).hide();
    };
    
    // Send reward email if passed
    if (passed) {
        sendQuizReward();
    }
}

function sendQuizReward() {
    // Send SPANK Bucks reward email
    const email = prompt('Enter your email to receive $5 SPANK Bucks:');
    if (email) {
        console.log(`Send $5 SPANK Bucks to: ${email} for passing knowledge quiz`);
        alert('Congratulations! Your $5 SPANK Bucks reward has been sent to your email.');
    }
}

// Problem Solver System
const problemSolver = {
    problems: [
        {
            title: "Faucet Won't Stop Dripping",
            icon: "fas fa-tint",
            steps: [
                {
                    question: "Where is it leaking from?",
                    options: [
                        { text: "Tip of the spout", next: "spout_leak" },
                        { text: "Base of handle", next: "handle_leak" }
                    ]
                }
            ],
            solutions: {
                spout_leak: {
                    title: "Spout Leak Solution",
                    content: "Likely a worn cartridge or washer. Turn off water valves under sink, remove handle, and replace the cartridge or washer.",
                    callSpank: "Still leaking? You may have a cracked valve seat."
                },
                handle_leak: {
                    title: "Handle Leak Solution", 
                    content: "Likely a loose packing nut or o-ring. Tighten the packing nut or replace the o-ring around the stem.",
                    callSpank: "Still leaking? The valve stem may need replacement."
                }
            }
        },
        {
            title: "Toilet Keeps Running",
            icon: "fas fa-toilet",
            steps: [
                {
                    question: "Open the tank. What do you see?",
                    options: [
                        { text: "Water level too high", next: "high_water" },
                        { text: "Flapper not sealing", next: "flapper_issue" },
                        { text: "Fill valve hissing", next: "fill_valve" }
                    ]
                }
            ],
            solutions: {
                high_water: {
                    title: "High Water Level Fix",
                    content: "Adjust the float height by bending the float arm down or adjusting the screw on newer fill valves.",
                    callSpank: "Still running? Your overflow pipe may be damaged."
                },
                flapper_issue: {
                    title: "Flapper Replacement",
                    content: "Turn off water, flush to empty tank, and replace the rubber flapper. Make sure the chain has proper slack.",
                    callSpank: "Still running? The flush valve seat may be warped."
                },
                fill_valve: {
                    title: "Fill Valve Replacement",
                    content: "Turn off water, disconnect supply line, and replace the entire fill valve assembly.",
                    callSpank: "Still running? You may have mineral buildup in the system."
                }
            }
        },
        {
            title: "Outlet Isn't Working",
            icon: "fas fa-plug",
            steps: [
                {
                    question: "Try a different device in the outlet. What happens?",
                    options: [
                        { text: "Still doesn't work", next: "outlet_dead" },
                        { text: "Works fine now", next: "device_issue" }
                    ]
                }
            ],
            solutions: {
                outlet_dead: {
                    title: "Dead Outlet Troubleshooting",
                    content: "Check circuit breaker (flip OFF then ON) and look for GFCI reset button. Test with voltage tester if you have one.",
                    callSpank: "Still no power? You need safe outlet replacement or wiring repair."
                },
                device_issue: {
                    title: "Device Problem",
                    content: "The original device was faulty, not the outlet. Try the device in other outlets to confirm.",
                    callSpank: "Device works elsewhere? The outlet may have loose connections."
                }
            }
        }
    ]
};

function showProblemSolver() {
    const modal = new bootstrap.Modal(document.getElementById('problemSolverModal'));
    showProblemList();
    modal.show();
}

function showProblemList() {
    const content = `
        <div class="problem-solver-intro mb-4">
            <h4>🛠️ What's Your Home Repair Problem?</h4>
            <p class="text-muted">Select your issue below for step-by-step troubleshooting guidance.</p>
        </div>
        
        <div class="problem-list">
            ${problemSolver.problems.map((problem, index) => `
                <div class="card mb-3 problem-card" onclick="startProblemSolving(${index})">
                    <div class="card-body d-flex align-items-center">
                        <div class="problem-icon me-3">
                            <i class="${problem.icon} fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h6 class="mb-1">${problem.title}</h6>
                            <small class="text-muted">Click for step-by-step guidance</small>
                        </div>
                        <div class="ms-auto">
                            <i class="fas fa-chevron-right text-muted"></i>
                        </div>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
    
    document.getElementById('problemSolverContent').innerHTML = content;
}

function startProblemSolving(problemIndex) {
    const problem = problemSolver.problems[problemIndex];
    const firstStep = problem.steps[0];
    
    const content = `
        <div class="problem-header mb-4">
            <div class="d-flex align-items-center mb-3">
                <button class="btn btn-outline-secondary btn-sm me-3" onclick="showProblemList()">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <h5 class="mb-0">${problem.title}</h5>
            </div>
        </div>
        
        <div class="problem-step">
            <h6 class="mb-3">${firstStep.question}</h6>
            <div class="step-options">
                ${firstStep.options.map(option => `
                    <button class="btn btn-outline-primary w-100 mb-2" 
                            onclick="showSolution('${option.next}', ${problemIndex})">
                        ${option.text}
                    </button>
                `).join('')}
            </div>
        </div>
    `;
    
    document.getElementById('problemSolverContent').innerHTML = content;
}

function showSolution(solutionKey, problemIndex) {
    const problem = problemSolver.problems[problemIndex];
    const solution = problem.solutions[solutionKey];
    
    const content = `
        <div class="solution-header mb-4">
            <div class="d-flex align-items-center mb-3">
                <button class="btn btn-outline-secondary btn-sm me-3" onclick="startProblemSolving(${problemIndex})">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <h5 class="mb-0">${solution.title}</h5>
            </div>
        </div>
        
        <div class="solution-content">
            <div class="alert alert-info">
                <h6><i class="fas fa-tools me-2"></i>What to do:</h6>
                <p class="mb-0">${solution.content}</p>
            </div>
            
            <div class="alert alert-warning">
                <h6><i class="fas fa-exclamation-triangle me-2"></i>Still having trouble?</h6>
                <p class="mb-0">${solution.callSpank}</p>
            </div>
            
            <div class="text-center mt-4">
                <button class="btn btn-warning btn-lg" onclick="window.location.href='/contact'">
                    <i class="fas fa-phone me-2"></i>Call SPANK for Professional Help
                </button>
            </div>
        </div>
    `;
    
    document.getElementById('problemSolverContent').innerHTML = content;
}
</script>
{% endblock %}