{% extends "base.html" %}

{% block title %}🧠 SPANKKS SKOOL - DIY Learning Hub{% endblock %}
{% block extra_head %}
  <meta name="description" content="Learn DIY construction and repair skills with SPANKKS SKOOL. Interactive courses with SPANK Buck rewards.">
  <meta name="keywords" content="DIY construction, repair courses, SPANKKS SKOOL, construction education">
{% endblock %}


{% block head %}
<style>
    .hero-section {
        background: linear-gradient(135deg, rgba(255, 107, 53, 0.8), rgba(247, 147, 30, 0.8)), url('/static/images/spank-school-hero.png');
        background-size: cover;
        background-position: center;
        color: white;
        padding: 120px 0 40px;
        margin-top: 0;
        min-height: 30vh;
        position: relative;
        z-index: 1;
    }
    
    @media (max-width: 768px) {
        .hero-section {
            padding: 100px 0 30px;
            min-height: 25vh;
        }
        
        .hero-section h1 {
            font-size: 2rem !important;
        }
        
        .hero-section .lead {
            font-size: 1rem;
        }
        
        .points-display {
            justify-content: center;
            margin-top: 1rem;
        }
        
        .points-display img {
            height: 50px !important;
        }
        
        .quiz-reward-badge img {
            height: 80px !important;
        }
        
        .course-card {
            margin-bottom: 1rem;
        }
        
        .btn-lg {
            font-size: 1rem;
            padding: 0.75rem 1.5rem;
        }
        
        .category-header h3 {
            font-size: 1.5rem;
        }
        
        .modal-content {
            margin: 1rem;
        }
        
        .lesson-content img {
            max-width: 100% !important;
            height: auto !important;
        }
        
        .quiz-container {
            padding: 1rem;
        }
        
        .quiz-option {
            padding: 1rem;
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
            min-height: 48px;
            display: flex;
            align-items: center;
        }
        
        .problem-solver-step {
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .feature-icon {
            margin-bottom: 1rem;
        }
        
        .feature-icon i {
            font-size: 2rem;
        }
        
        .col-md-3 {
            margin-bottom: 2rem !important;
        }
        
        .display-6 {
            font-size: 2rem !important;
        }
        
        .btn-group-vertical .btn {
            margin-bottom: 0.5rem;
        }
    }
    
    .course-card {
        transition: all 0.3s ease;
        border: none;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        height: 100%;
    }
    
    .course-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .difficulty-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 2;
    }
    
    .reward-badge {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        font-size: 0.75rem;
        padding: 4px 12px;
        border-radius: 15px;
        font-weight: bold;
    }
    
    .course-stats {
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    .feature-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ff6b35, #f7931e);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        margin: 0 auto 20px;
    }
    
    .video-badge {
        background: #dc3545;
        color: white;
        font-size: 0.75rem;
        padding: 2px 8px;
        border-radius: 12px;
        margin-left: 8px;
    }
    
    .category-header {
        background: linear-gradient(135deg, #343a40, #495057);
        color: white;
        border-radius: 10px 10px 0 0;
        padding: 20px;
        margin-bottom: 0;
    }
    
    .category-content {
        background: #f8f9fa;
        border-radius: 0 0 10px 10px;
        padding: 25px;
    }
    
    .points-display {
        background: linear-gradient(135deg, #ffc107, #ff8f00);
        color: #212529;
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(255,193,7,0.3);
    }
    
    .bg-gradient-warning {
        background: linear-gradient(135deg, #ffc107, #ffca2c) !important;
    }
    
    .action-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: none;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        min-height: 200px;
    }
    
    .action-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    /* Mobile Optimizations */
    @media (max-width: 768px) {
        .hero-section {
            padding: 2rem 0 !important;
        }
        
        .display-4 {
            font-size: 2.5rem !important;
        }
        
        .action-card {
            min-height: 180px;
            margin-bottom: 1rem;
        }
        
        .action-card .btn {
            width: 100%;
            margin-bottom: 0.5rem;
        }
        
        .action-card .d-flex {
            flex-direction: column;
            align-items: center !important;
            text-align: center;
        }
        
        .spank-character-mobile {
            max-height: 250px !important;
            margin: 1rem auto !important;
            display: block !important;
        }
        
        .mobile-center {
            text-align: center !important;
        }
        
        .course-card {
            margin-bottom: 1.5rem;
        }
        
        .btn-lg {
            padding: 0.75rem 1.5rem;
            font-size: 1.1rem;
        }
    }
    
    /* Desktop Optimizations */
    @media (min-width: 1200px) {
        .container-fluid {
            max-width: 1400px;
        }
        
        .action-card {
            min-height: 220px;
        }
        
        .display-4 {
            font-size: 3.5rem;
        }
    }
    
    /* Touch Device Optimizations */
    @media (hover: none) {
        .action-card:hover {
            transform: none;
        }
        
        .action-card:active {
            transform: scale(0.98);
        }
        
        .btn {
            min-height: 48px; /* Touch target size */
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Combined Hero and Quiz Section -->
<section class="hero-section py-5 bg-gradient-warning">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col-lg-8 order-2 order-lg-1">
                <div class="ps-3 ps-lg-5">
                    <h1 class="display-4 fw-bold mb-3 text-dark mobile-center">
                        🧠 Welcome to SPANKKS SKOOL
                    </h1>
                    <p class="lead mb-4 text-dark mobile-center">
                        Master DIY repairs with professional guidance from Hawaii's trusted handyman experts.
                    </p>
                    
                    <!-- Combined Action Cards -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-6 col-12">
                            <div class="action-card bg-dark text-warning p-3 p-md-4 rounded-3 h-100">
                                <h5 class="fw-bold mb-2">🎓 Monthly Knowledge Quiz</h5>
                                <p class="mb-3 small">Answer 4/5 questions correctly for $5 SPANK Bucks!</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <button class="btn btn-warning btn-lg" onclick="startKnowledgeQuiz()">
                                        <i class="fas fa-brain me-2"></i>Take Quiz
                                    </button>
                                    <img src="{{ url_for('static', filename='images/spank-buck-5.png') }}" alt="$5 SPANK Buck" style="height: 45px;">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-12">
                            <div class="action-card bg-primary text-white p-3 p-md-4 rounded-3 h-100">
                                <h5 class="fw-bold mb-2">📚 Learn DIY Skills</h5>
                                <p class="mb-3 small">Complete courses and earn $5 SPANK Bucks per course!</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <button class="btn btn-warning btn-lg" onclick="scrollToCourses()">
                                        <i class="fas fa-play me-2"></i>Start Learning
                                    </button>
                                    <img src="{{ url_for('static', filename='images/spank-buck-5.png') }}" alt="$5 SPANK Buck" style="height: 45px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Problem Solver Button -->
                    <div class="text-center text-lg-start">
                        <button class="btn btn-outline-dark btn-lg px-4" onclick="showProblemSolver()">
                            <i class="fas fa-tools me-2"></i>Problem Solver
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 order-1 order-lg-2 text-center text-lg-end mt-3 mt-lg-0 p-0">
                <img src="{{ url_for('static', filename='images/spank-school-character.png') }}" 
                     alt="SPANK Mascot" class="img-fluid spank-character-mobile d-lg-block" 
                     style="max-height: 400px; width: auto; margin-right: -15px;">
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5" style="background: linear-gradient(rgba(248, 249, 250, 0.9), rgba(248, 249, 250, 0.9)), url('/static/images/spankks-logo-new.png'); background-size: contain; background-repeat: no-repeat; background-position: center; background-attachment: fixed;">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-video"></i>
                </div>
                <h5>Video Tutorials</h5>
                <p class="text-muted">Step-by-step video guides with professional tips</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h5>Interactive Learning</h5>
                <p class="text-muted">Quizzes, challenges, and hands-on practice</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h5>Safety First</h5>
                <p class="text-muted">Professional safety guidance for every project</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-award"></i>
                </div>
                <h5>Earn SPANK Bucks</h5>
                <p class="text-muted">Complete courses and earn $5 SPANK Bucks</p>
            </div>
        </div>
    </div>
</section>

<!-- Course Categories -->
<section class="py-5" id="courses">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Choose Your Learning Path</h2>
            <p class="lead text-muted">From beginner basics to intermediate repairs</p>
        </div>

        <!-- Basics Everyone Should Know -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-tools me-3"></i>🧰 Basics Everyone Should Know</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Toolbelt Basics
                                        <span class="video-badge">VISUAL</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Essential tools every homeowner needs and how to organize them for maximum efficiency.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('toolbelt')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Hang a Picture
                                        <span class="video-badge">INTERACTIVE</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>2 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Perfect picture hanging with proper anchors, leveling, and wall protection techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('picture')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Squeaky Door Fix
                                        <span class="video-badge">INTERACTIVE</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>2 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Safe, effective, chemical-free methods to stop squeaky doors with household tools.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('door')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Electrical Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-bolt me-3"></i>Electrical Safety</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Replace an Outlet</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Safely replace electrical outlets with proper power shutoff and wiring techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('outlet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Install a Light Switch</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>2 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Learn switch wiring basics and safe installation techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('lightswitch')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Circuit Breaker Basics</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Understand your electrical panel and when to call professionals.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('breaker')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home Improvement Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-home me-3"></i>Home Improvement</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Patch Drywall</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>15 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">Fix holes and damage in drywall with professional techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('drywall')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Touch-Up Paint</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>8 min • 
                                        <i class="fas fa-list-ol me-1"></i>3 lessons
                                    </p>
                                    <p class="card-text">Color matching secrets and professional touch-up techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('touchup')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-info">Renovation</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Smart Home Upgrades
                                        <span class="pro-badge">RENO</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>20 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">Smart options for kitchen & bath renovations. Plan ahead with Spankks for smart-ready wiring.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $5 SPANK Bucks + Bonus
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('smarthome')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Intermediate Courses Section -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-cogs me-3"></i>Intermediate Projects</h3>
                    <p class="text-muted mb-0">More advanced DIY projects for experienced learners</p>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Install a Smart Lock
                                        <span class="pro-badge">TECH</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-mobile-alt me-1"></i>App integration
                                    </p>
                                    <p class="card-text">Replace traditional deadbolt with smart lock, including compatibility checks and mobile app setup.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $10 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('smartlock')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        DIY Smart Switches Installation
                                        <span class="safety-badge">ELECTRICAL</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>4 lessons • 
                                        <i class="fas fa-bolt me-1"></i>Safety focus
                                    </p>
                                    <p class="card-text">Install smart switches with proper safety procedures, wire identification, and app setup. Includes Lutron & TP-Link guides.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $10 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('smartSwitches')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Fix a Running Toilet</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-images me-1"></i>Step-by-step photos
                                    </p>
                                    <p class="card-text">Diagnose and fix continuously running toilets: flapper replacement, float adjustment, and fill valve issues.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $10 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('toilet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Build a Storage Shelf</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>3 lessons • 
                                        <i class="fas fa-hammer me-1"></i>Wood construction
                                    </p>
                                    <p class="card-text">Build a basic wooden storage shelf using dimensional lumber with measuring, cutting, and assembly techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $10 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('shelf')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Caulk a Bathtub Like a Pro</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>2 lessons • 
                                        <i class="fas fa-images me-1"></i>Professional technique
                                    </p>
                                    <p class="card-text">Remove old caulk and apply clean, waterproof bead around bathtub with professional finishing techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $10 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('caulk')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Install a Ceiling Light Fixture
                                        <span class="safety-badge">ELECTRICAL</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-list-ol me-1"></i>2 lessons • 
                                        <i class="fas fa-bolt me-1"></i>Electrical safety
                                    </p>
                                    <p class="card-text">Safely replace ceiling light fixtures with proper wiring, safety procedures, and mounting techniques.</p>
                                    <div class="mb-3">
                                        <span class="reward-badge">
                                            <i class="fas fa-dollar-sign me-1"></i>Earn $10 SPANK Bucks
                                        </span>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('light')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Tools Section -->
        <div class="row">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-tools me-3"></i>Interactive Learning Tools</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-search"></i>
                                    </div>
                                    <h5 class="card-title">Problem Solver</h5>
                                    <p class="card-text">Step-by-step troubleshooting for common home issues</p>
                                    <button class="btn btn-outline-primary w-100" onclick="startTroubleshooter()">
                                        <i class="fas fa-cogs me-2"></i>Start Solver
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <h5 class="card-title">Knowledge Quiz</h5>
                                    <p class="card-text">Test your DIY knowledge and earn $5 SPANK Bucks</p>
                                    <button class="btn btn-outline-primary w-100" onclick="startQuiz()">
                                        <i class="fas fa-question-circle me-2"></i>Take Quiz
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-video"></i>
                                    </div>
                                    <h5 class="card-title">Live Q&A</h5>
                                    <p class="card-text">Join weekly live sessions with SPANK experts</p>
                                    <button class="btn btn-outline-primary w-100" onclick="joinLiveSession()">
                                        <i class="fas fa-users me-2"></i>Join Session
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-5 bg-dark text-white">
    <div class="container text-center">
        <h2 class="mb-4">Need Professional Help?</h2>
        <p class="lead mb-4">Some repairs are best left to the experts. SPANK is here when you need us.</p>
        <div class="d-flex flex-wrap justify-content-center gap-3">
            <a href="{{ url_for('consultation') }}" class="btn btn-warning btn-lg px-4">
                <i class="fas fa-calendar-check me-2"></i>Book Free Consultation
            </a>
            <a href="tel:(808)778-9132" class="btn btn-outline-light btn-lg px-4">
                <i class="fas fa-phone me-2"></i>Call (808) 778-9132
            </a>
        </div>
    </div>
</section>

<!-- Course Modal -->
<div class="modal fade" id="courseModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="courseModalTitle">Course Lesson</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="courseModalBody">
                <!-- Course content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="nextLessonBtn">Next Lesson</button>
            </div>
        </div>
    </div>
</div>

<script>
// Course data structure
const courses = {
    toolbelt: {
        title: "Toolbelt Basics",
        level: "Beginner",
        duration: "30-40 minutes",
        reward: "$5 SPANK Bucks",
        lessons: [
            {
                title: "Know Your Tools",
                image: "/static/images/toolbelt-basics.png",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="/static/images/toolbelt-basics.png" class="img-fluid rounded" alt="Essential Hand Tools Layout">
                    </div>
                    <h6>🎯 Objective: Identify the core tools used in home maintenance and understand their function</h6>
                    
                    <h6>🛠️ Essential Tools Visual Guide:</h6>
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li class="mb-2"><strong>🔨 Claw Hammer</strong> - Driving nails & removing them</li>
                                <li class="mb-2"><strong>🔧 Adjustable Wrench</strong> - Tightening/loosening bolts</li>
                                <li class="mb-2"><strong>🪚 Utility Knife</strong> - Cutting materials safely</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list-unstyled">
                                <li class="mb-2"><strong>🪚 Needle-nose Pliers</strong> - Precision gripping</li>
                                <li class="mb-2"><strong>🪚 Slip-joint Pliers</strong> - General gripping tasks</li>
                                <li class="mb-2"><strong>🪚 Screwdrivers</strong> - Phillips & flathead</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Match each tool to its primary task below!</p>
                    </div>
                    
                    <div class="tool-matching-game mb-4" id="toolMatchGame1">
                        <div class="row">
                            <div class="col-6">
                                <h6>Tools:</h6>
                                <div class="tool-items">
                                    <div class="tool-item" draggable="true" data-tool="hammer">🔨 Hammer</div>
                                    <div class="tool-item" draggable="true" data-tool="wrench">🔧 Wrench</div>
                                    <div class="tool-item" draggable="true" data-tool="screwdriver">🪚 Screwdriver</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <h6>Tasks:</h6>
                                <div class="task-zones">
                                    <div class="task-zone" data-task="hammer">Remove a nail</div>
                                    <div class="task-zone" data-task="wrench">Tighten a bolt</div>
                                    <div class="task-zone" data-task="screwdriver">Install a screw</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">Which tool is best for removing nails?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('tool-quiz-1', 'correct', 'Correct! The claw end of a hammer grips and pulls nails out.')">A) Claw hammer</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('tool-quiz-1', 'wrong', 'Pliers can grip nails but don\\'t have the leverage of a hammer.')">B) Pliers</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('tool-quiz-1', 'wrong', 'Screwdrivers are for screws, not nails.')">C) Screwdriver</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('tool-quiz-1', 'wrong', 'A utility knife cuts materials, not remove nails.')">D) Utility knife</button>
                        </div>
                        <div id="tool-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Start with the Basics",
                image: "/static/images/toolbelt-basics-2.png",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="/static/images/toolbelt-basics-2.png" class="img-fluid rounded" alt="Toolbelt Organization Steps">
                    </div>
                    <h6>🎯 Objective: Organize a minimalist starter toolbelt for common household tasks</h6>
                    
                    <h6>📦 Smart Toolbelt Setup:</h6>
                    <div class="step-by-step mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Empty Pouch Overview</strong> - Start with clean, organized pouches
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Load Hammer & Pliers</strong> - Heavy tools on dominant side
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Position Screwdrivers</strong> - Easy reach without bending
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">4</span>
                            <strong>Balance Check</strong> - Distribute weight evenly
                        </div>
                    </div>
                    
                    <div class="alert alert-warning">
                        <strong>💡 Key Rule:</strong> Only carry what you need - overloading slows you down!
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-puzzle-piece me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Pack a toolbelt with only 6 slots available. Choose wisely!</p>
                    </div>
                    
                    <div class="toolbelt-simulator mb-4" id="toolbeltSim">
                        <h6>Available Tools:</h6>
                        <div class="available-tools mb-3">
                            <div class="tool-choice" data-tool="hammer">🔨 Hammer</div>
                            <div class="tool-choice" data-tool="tape">📏 Tape Measure</div>
                            <div class="tool-choice" data-tool="screwdriver1">🪚 Phillips Screwdriver</div>
                            <div class="tool-choice" data-tool="screwdriver2">🪚 Flathead Screwdriver</div>
                            <div class="tool-choice" data-tool="pliers">🔧 Pliers</div>
                            <div class="tool-choice" data-tool="level">📐 Level</div>
                            <div class="tool-choice" data-tool="knife">🔪 Utility Knife</div>
                            <div class="tool-choice" data-tool="wrench">🔧 Wrench</div>
                        </div>
                        <h6>Your Toolbelt (6 slots):</h6>
                        <div class="toolbelt-slots">
                            <div class="slot empty" data-slot="1">Slot 1</div>
                            <div class="slot empty" data-slot="2">Slot 2</div>
                            <div class="slot empty" data-slot="3">Slot 3</div>
                            <div class="slot empty" data-slot="4">Slot 4</div>
                            <div class="slot empty" data-slot="5">Slot 5</div>
                            <div class="slot empty" data-slot="6">Slot 6</div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">True or False: You should carry all tools you own in your toolbelt.</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('tool-quiz-2', 'wrong', 'False! Carrying too many tools creates weight and balance problems.')">A) True</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('tool-quiz-2', 'correct', 'Correct! Only carry essential tools for the specific job.')">B) False</button>
                        </div>
                        <div id="tool-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Keep Things Handy",
                image: "/static/images/toolbelt-basics-3.png",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="/static/images/toolbelt-basics-3.png" class="img-fluid rounded" alt="Efficient Toolbox Organization">
                    </div>
                    <h6>🎯 Objective: Use a toolbox system for tool storage and transportation</h6>
                    
                    <h6>📦 Toolbox Types & Layout Tips:</h6>
                    <div class="toolbox-types mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="toolbox-type p-3 border rounded">
                                    <h6>🧳 Hard Case</h6>
                                    <p class="small mb-0">Portable, protected storage for smaller jobs</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="toolbox-type p-3 border rounded">
                                    <h6>🛞 Rolling Box</h6>
                                    <p class="small mb-0">Mobile storage for larger tool collections</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="toolbox-type p-3 border rounded">
                                    <h6>🧩 Modular Inserts</h6>
                                    <p class="small mb-0">Customizable organization systems</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="layout-principle mb-4">
                        <h6>🎯 Golden Rule: Top Tray for Daily Use Tools</h6>
                        <p>Keep your most-used tools in the top tray or easily accessible compartments.</p>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-sort me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Organize this messy toolbox! Click and drag to create an efficient layout.</p>
                    </div>
                    
                    <div class="toolbox-organizer mb-4" id="toolboxOrganizer">
                        <div class="row">
                            <div class="col-6">
                                <h6>Disorganized Box:</h6>
                                <div class="messy-box">
                                    <div class="scattered-tool" data-tool="hammer">🔨</div>
                                    <div class="scattered-tool" data-tool="screws">🔩</div>
                                    <div class="scattered-tool" data-tool="tape">📏</div>
                                    <div class="scattered-tool" data-tool="pliers">🔧</div>
                                    <div class="scattered-tool" data-tool="level">📐</div>
                                    <div class="scattered-tool" data-tool="nails">📎</div>
                                </div>
                            </div>
                            <div class="col-6">
                                <h6>Organized Layout:</h6>
                                <div class="organized-box">
                                    <div class="top-tray">
                                        <label>Top Tray (Daily Use)</label>
                                        <div class="tray-zone" data-category="daily"></div>
                                    </div>
                                    <div class="bottom-section">
                                        <label>Bottom (Hardware & Storage)</label>
                                        <div class="tray-zone" data-category="storage"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">Which toolbox layout is most efficient?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('tool-quiz-3', 'wrong', 'Mixing tools randomly makes them hard to find quickly.')">A) All tools mixed together</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('tool-quiz-3', 'correct', 'Correct! Grouping by use and putting daily tools on top saves time.')">B) Daily tools on top, grouped by type</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('tool-quiz-3', 'wrong', 'Size-based organization doesn\\'t consider how often you use tools.')">C) Largest tools first</button>
                        </div>
                        <div id="tool-quiz-3" class="mt-2" style="display: none;"></div>
                    </div>
                    
                    <div class="completion-criteria mt-4">
                        <h6>🎉 Course Completion Criteria:</h6>
                        <ul class="list-unstyled">
                            <li>✅ Pass all 3 checkpoint quizzes</li>
                            <li>✅ Complete all 3 interactive activities</li>
                            <li>✅ Spend at least 10 minutes per lesson</li>
                        </ul>
                        <div class="alert alert-success">
                            <strong>🎁 Upon Completion:</strong> Earn $5 SPANK Bucks and unlock "Hang a Picture" lesson!
                        </div>
                    </div>
                `
            }
        ]
    },
    picture: {
        title: "Hang a Picture",
        level: "Beginner",
        duration: "25-35 minutes",
        reward: "$5 SPANK Bucks",
        lessons: [
            {
                title: "Choose the Right Anchor",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjIwIiB5PSI2MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiLz48cmVjdCB4PSIxNDAiIHk9IjYwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2RlZTJlNiIvPjxyZWN0IHg9IjI2MCIgeT0iNjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjZGVlMmU2Ii8+PGNpcmNsZSBjeD0iNzAiIGN5PSIxNTAiIHI9IjgiIGZpbGw9IiNmZjZiMzUiLz48cmVjdCB4PSIxNzAiIHk9IjE0MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjMjhhNzQ1Ii8+PGNpcmNsZSBjeD0iMzEwIiBjeT0iMTUwIiByPSIxNSIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjcwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzM0M2E0MCI+TmFpbC1pbjwvdGV4dD48dGV4dCB4PSIxOTAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjMzQzYTQwIj5QbGFzdGljPC90ZXh0Pjx0ZXh0IHg9IjMxMCIgeT0iMjYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiMzNDNhNDAiPlRvZ2dsZTwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjIwIiB5PSI2MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiLz48cmVjdCB4PSIxNDAiIHk9IjYwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2RlZTJlNiIvPjxyZWN0IHg9IjI2MCIgeT0iNjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjZGVlMmU2Ii8+PGNpcmNsZSBjeD0iNzAiIGN5PSIxNTAiIHI9IjgiIGZpbGw9IiNmZjZiMzUiLz48cmVjdCB4PSIxNzAiIHk9IjE0MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjMjhhNzQ1Ii8+PGNpcmNsZSBjeD0iMzEwIiBjeT0iMTUwIiByPSIxNSIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjcwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzM0M2E0MCI+TmFpbC1pbjwvdGV4dD48dGV4dCB4PSIxOTAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjMzQzYTQwIj5QbGFzdGljPC90ZXh0Pjx0ZXh0IHg9IjMxMCIgeT0iMjYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiMzNDNhNDAiPlRvZ2dsZTwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Wall Anchor Types">
                    </div>
                    <h6>🎯 Objective: Understand wall anchor types and choose the best one for the job</h6>
                    
                    <h6>⚓ Wall Anchor Guide:</h6>
                    <div class="anchor-comparison mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="anchor-type p-3 border rounded text-center">
                                    <div class="anchor-icon mb-2">🔩</div>
                                    <h6>Nail-in Anchor</h6>
                                    <p class="small mb-2"><strong>Best for:</strong> Light frames (under 10 lbs)</p>
                                    <p class="small mb-0"><strong>Wall:</strong> Drywall only</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="anchor-type p-3 border rounded text-center">
                                    <div class="anchor-icon mb-2">🔧</div>
                                    <h6>Plastic Expansion</h6>
                                    <p class="small mb-2"><strong>Best for:</strong> Medium frames (10-25 lbs)</p>
                                    <p class="small mb-0"><strong>Wall:</strong> Drywall, plaster</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="anchor-type p-3 border rounded text-center">
                                    <div class="anchor-icon mb-2">⚡</div>
                                    <h6>Toggle Bolt</h6>
                                    <p class="small mb-2"><strong>Best for:</strong> Heavy frames (25+ lbs)</p>
                                    <p class="small mb-0"><strong>Wall:</strong> All types</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Choose the wall type, then select the best anchor for your picture!</p>
                    </div>
                    
                    <div class="wall-anchor-simulator mb-4" id="wallAnchorSim">
                        <h6>Step 1: Choose Your Wall Type</h6>
                        <div class="wall-options mb-3">
                            <button class="btn btn-outline-primary wall-choice" data-wall="drywall">🏠 Drywall</button>
                            <button class="btn btn-outline-primary wall-choice" data-wall="plaster">🧱 Plaster</button>
                            <button class="btn btn-outline-primary wall-choice" data-wall="masonry">🏗️ Masonry</button>
                        </div>
                        
                        <div class="picture-weight mb-3" style="display: none;">
                            <h6>Step 2: Picture Weight</h6>
                            <div class="weight-options">
                                <button class="btn btn-outline-secondary weight-choice" data-weight="light">📸 Light (under 10 lbs)</button>
                                <button class="btn btn-outline-secondary weight-choice" data-weight="medium">🖼️ Medium (10-25 lbs)</button>
                                <button class="btn btn-outline-secondary weight-choice" data-weight="heavy">🎨 Heavy (25+ lbs)</button>
                            </div>
                        </div>
                        
                        <div class="anchor-selection" style="display: none;">
                            <h6>Step 3: Select Best Anchor</h6>
                            <div class="anchor-choices">
                                <button class="btn btn-warning anchor-choice" data-anchor="nail">🔩 Nail-in Anchor</button>
                                <button class="btn btn-warning anchor-choice" data-anchor="plastic">🔧 Plastic Expansion</button>
                                <button class="btn btn-warning anchor-choice" data-anchor="toggle">⚡ Toggle Bolt</button>
                            </div>
                        </div>
                        
                        <div class="simulator-result mt-3" style="display: none;"></div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">Which anchor supports over 25 lbs on drywall?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('picture-quiz-1', 'wrong', 'Nail-in anchors are only for light pictures under 10 lbs.')">A) Nail-in anchor</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('picture-quiz-1', 'wrong', 'Plastic anchors max out around 25 lbs, not over.')">B) Plastic expansion</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('picture-quiz-1', 'correct', 'Correct! Toggle bolts can support 50+ lbs on drywall.')">C) Toggle bolt</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('picture-quiz-1', 'wrong', 'Command strips are for very light items only.')">D) Command strip</button>
                        </div>
                        <div id="picture-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Level It Like a Pro",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxyZWN0IHg9IjEyMCIgeT0iMTIwIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIgc3Ryb2tlPSIjMDA1Y2JkIiBzdHJva2Utd2lkdGg9IjMiLz48bGluZSB4MT0iMTAwIiB5MT0iMTcwIiB4Mj0iMzAwIiB5Mj0iMTcwIiBzdHJva2U9IiNmZmM5MDciIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWRhc2hhcnJheT0iNSw1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI4IiBmaWxsPSIjMjhhNzQ1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0IiBmaWxsPSIjZmZmIi8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+UGVyZmVjdCBMZXZlbCBQbGFjZW1lbnQ8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxyZWN0IHg9IjEyMCIgeT0iMTIwIiB3aWR0aD0iMTYwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIgc3Ryb2tlPSIjMDA1Y2JkIiBzdHJva2Utd2lkdGg9IjMiLz48bGluZSB4MT0iMTAwIiB5MT0iMTcwIiB4Mj0iMzAwIiB5Mj0iMTcwIiBzdHJva2U9IiNmZmM5MDciIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWRhc2hhcnJheT0iNSw1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI4IiBmaWxsPSIjMjhhNzQ1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0IiBmaWxsPSIjZmZmIi8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+UGVyZmVjdCBMZXZlbCBQbGFjZW1lbnQ8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Perfect Level Placement">
                    </div>
                    <h6>🎯 Objective: Accurately position and hang frames with precision and minimal wall damage</h6>
                    
                    <h6>📐 Professional Leveling Techniques:</h6>
                    <div class="leveling-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Mark Layout with Painter's Tape</strong> - Protects walls and shows placement
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Use a Bubble Level</strong> - Check horizontal alignment before drilling
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Center on Wall or Above Furniture</strong> - Measure and mark center point
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">4</span>
                            <strong>Use Removable Strips for Light Frames</strong> - No holes needed under 5 lbs
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Use painter's tape, mark studs, and level a frame perfectly!</p>
                    </div>
                    
                    <div class="picture-leveling-sim mb-4" id="pictureLevelingSim">
                        <div class="virtual-wall">
                            <h6>Virtual Wall - Hang Your Picture</h6>
                            <div class="wall-surface" id="wallSurface">
                                <!-- Wall grid background -->
                                <div class="wall-grid"></div>
                                
                                <!-- Draggable painter's tape -->
                                <div class="painters-tape" id="paintersTape" style="display: none;">
                                    <div class="tape-horizontal"></div>
                                    <div class="tape-vertical"></div>
                                </div>
                                
                                <!-- Level tool -->
                                <div class="level-tool" id="levelTool" style="display: none;">
                                    <div class="level-bubble"></div>
                                </div>
                                
                                <!-- Picture frame -->
                                <div class="picture-frame" id="pictureFrame" style="display: none;">
                                    🖼️
                                </div>
                            </div>
                        </div>
                        
                        <div class="leveling-controls mt-3">
                            <button class="btn btn-warning btn-sm" onclick="addPaintersTape()">1. Add Painter's Tape</button>
                            <button class="btn btn-warning btn-sm" onclick="useLevel()">2. Use Level</button>
                            <button class="btn btn-warning btn-sm" onclick="hangPicture()">3. Hang Picture</button>
                            <button class="btn btn-outline-secondary btn-sm" onclick="resetWall()">Reset</button>
                        </div>
                        
                        <div class="leveling-feedback mt-2" id="levelingFeedback"></div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">Which frame is perfectly level?</p>
                        <div class="visual-quiz mb-3">
                            <div class="row">
                                <div class="col-4 text-center">
                                    <div class="quiz-frame" style="transform: rotate(-2deg); background: #007bff; height: 60px; margin: 10px; border: 3px solid #0056b3;"></div>
                                    <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('picture-quiz-2', 'wrong', 'This frame is tilted to the left - not level.')">A)</button>
                                </div>
                                <div class="col-4 text-center">
                                    <div class="quiz-frame" style="background: #007bff; height: 60px; margin: 10px; border: 3px solid #0056b3;"></div>
                                    <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('picture-quiz-2', 'correct', 'Correct! This frame is perfectly horizontal and level.')">B)</button>
                                </div>
                                <div class="col-4 text-center">
                                    <div class="quiz-frame" style="transform: rotate(3deg); background: #007bff; height: 60px; margin: 10px; border: 3px solid #0056b3;"></div>
                                    <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('picture-quiz-2', 'wrong', 'This frame is tilted to the right - not level.')">C)</button>
                                </div>
                            </div>
                        </div>
                        <div id="picture-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                    
                    <div class="completion-criteria mt-4">
                        <h6>🎉 Course Completion Criteria:</h6>
                        <ul class="list-unstyled">
                            <li>✅ Complete anchor selection simulator</li>
                            <li>✅ Pass both checkpoint quizzes</li>
                            <li>✅ Successfully level and hang frame in simulation</li>
                        </ul>
                        <div class="alert alert-success">
                            <strong>🎁 Upon Completion:</strong> Earn $5 SPANK Bucks and unlock "Squeaky Door Fix" course!
                        </div>
                    </div>
                `
            }
        ]
    },
    door: {
        title: "Squeaky Door Fix",
        level: "Beginner",
        duration: "20-30 minutes",
        reward: "$5 SPANK Bucks",
        lessons: [
            {
                title: "Identify the Source",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzhlNjExNCIvPjxyZWN0IHg9IjcwIiB5PSI1MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNkNjkyNTQiLz48Y2lyY2xlIGN4PSIxMDAiIGN5PSI4MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEyMCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjE2MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjx0ZXh0IHg9IjEzMCIgeT0iODUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzM0M2E0MCI+VG9wIEhpbmdlPC90ZXh0Pjx0ZXh0IHg9IjEzMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiMzNDNhNDAiPk1pZGRsZSBIaW5nZTwvdGV4dD48dGV4dCB4PSIxMzAiIHk9IjE2NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjMzQzYTQwIj5Cb3R0b20gSGluZ2U8L3RleHQ+PHBhdGggZD0iTSAyODAgMTAwIFEgMzAwIDEyMCAyODAgMTQwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjx0ZXh0IHg9IjMxMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiNkYzI2MjYiPkVFRUs8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzhlNjExNCIvPjxyZWN0IHg9IjcwIiB5PSI1MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNkNjkyNTQiLz48Y2lyY2xlIGN4PSIxMDAiIGN5PSI4MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEyMCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjE2MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjx0ZXh0IHg9IjEzMCIgeT0iODUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzM0M2E0MCI+VG9wIEhpbmdlPC90ZXh0Pjx0ZXh0IHg9IjEzMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiMzNDNhNDAiPk1pZGRsZSBIaW5nZTwvdGV4dD48dGV4dCB4PSIxMzAiIHk9IjE2NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjMzQzYTQwIj5Cb3R0b20gSGluZ2U8L3RleHQ+PHBhdGggZD0iTSAyODAgMTAwIFEgMzAwIDEyMCAyODAgMTQwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjx0ZXh0IHg9IjMxMCIgeT0iMTI1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiNkYzI2MjYiPkVFRUs8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Door Hinge Inspection">
                    </div>
                    <h6>🎯 Objective: Pinpoint exactly where the squeak is coming from and inspect the door's condition</h6>
                    
                    <h6>🔍 Common Causes of Door Squeaks:</h6>
                    <div class="squeak-causes mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="cause-item p-3 border rounded text-center">
                                    <div class="cause-icon mb-2">🔩</div>
                                    <h6>Dry Hinge Pin</h6>
                                    <p class="small mb-0">Most common - needs lubrication</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="cause-item p-3 border rounded text-center">
                                    <div class="cause-icon mb-2">🔧</div>
                                    <h6>Loose Screws</h6>
                                    <p class="small mb-0">Hinge movement causes friction</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="cause-item p-3 border rounded text-center">
                                    <div class="cause-icon mb-2">📐</div>
                                    <h6>Door Misalignment</h6>
                                    <p class="small mb-0">Door binding on frame</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🔍 Inspection Steps:</h6>
                    <div class="inspection-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Open & Close Door Slowly</strong> - Listen for squeak location
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Check Hinge Screws</strong> - Look for loose or missing screws
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Test Each Hinge</strong> - Top vs. bottom vs. middle
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-volume-up me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Listen to the squeak and match it with the correct hinge location!</p>
                    </div>
                    
                    <div class="squeak-simulator mb-4" id="squeakSim">
                        <h6>🔊 Sound Identification Test</h6>
                        <div class="door-diagram mb-3">
                            <div class="virtual-door">
                                <div class="hinge top-hinge" data-hinge="top">
                                    <button class="btn btn-outline-primary btn-sm" onclick="playSqueak('top')">🔊 Top Hinge</button>
                                </div>
                                <div class="hinge middle-hinge" data-hinge="middle">
                                    <button class="btn btn-outline-primary btn-sm" onclick="playSqueak('middle')">🔊 Middle Hinge</button>
                                </div>
                                <div class="hinge bottom-hinge" data-hinge="bottom">
                                    <button class="btn btn-outline-primary btn-sm" onclick="playSqueak('bottom')">🔊 Bottom Hinge</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="sound-quiz mt-3">
                            <p><strong>Which hinge is making the squeak?</strong></p>
                            <div class="hinge-options">
                                <button class="btn btn-warning hinge-guess" data-guess="top">Top Hinge</button>
                                <button class="btn btn-warning hinge-guess" data-guess="middle">Middle Hinge</button>
                                <button class="btn btn-warning hinge-guess" data-guess="bottom">Bottom Hinge</button>
                            </div>
                            <div class="sound-feedback mt-2" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">Which part is most likely squeaking on a door?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('door-quiz-1', 'correct', 'Correct! The hinge pin is the most common source of door squeaks.')">A) Hinge pin</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('door-quiz-1', 'wrong', 'The door handle rarely causes squeaking sounds.')">B) Door handle</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('door-quiz-1', 'wrong', 'The doorframe itself doesn\\'t usually squeak.')">C) Door frame</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('door-quiz-1', 'wrong', 'Weather stripping may make noise but not squeaking.')">D) Weather stripping</button>
                        </div>
                        <div id="door-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Apply the Fix (No Chemicals Needed)",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI2MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2RlZTJlNiIgcng9IjUiLz48Y2lyY2xlIGN4PSI5MCIgY3k9IjEwMCIgcj0iMTAiIGZpbGw9IiNmZmM5MDciLz48bGluZSB4MT0iOTAiIHkxPSI5MCIgeDI9IjkwIiB5Mj0iMjEwIiBzdHJva2U9IiMyOGE3NDUiIHN0cm9rZS13aWR0aD0iNCIvPjxyZWN0IHg9IjE2MCIgeT0iMTAwIiB3aWR0aD0iNDAiIGhlaWdodD0iMjAiIGZpbGw9IiMwMDdiZmYiLz48cmVjdCB4PSIyMjAiIHk9IjkwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZGMyNjI2Ii8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+SGluZ2UgUmVwYWlyIFRvb2xzPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI2MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2RlZTJlNiIgcng9IjUiLz48Y2lyY2xlIGN4PSI5MCIgY3k9IjEwMCIgcj0iMTAiIGZpbGw9IiNmZmM5MDciLz48bGluZSB4MT0iOTAiIHkxPSI5MCIgeDI9IjkwIiB5Mj0iMjEwIiBzdHJva2U9IiMyOGE3NDUiIHN0cm9rZS13aWR0aD0iNCIvPjxyZWN0IHg9IjE2MCIgeT0iMTAwIiB3aWR0aD0iNDAiIGhlaWdodD0iMjAiIGZpbGw9IiMwMDdiZmYiLz48cmVjdCB4PSIyMjAiIHk9IjkwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZGMyNjI2Ii8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+SGluZ2UgUmVwYWlyIFRvb2xzPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Hinge Repair Tools">
                    </div>
                    <h6>🎯 Objective: Lubricate the hinge using safe, non-toxic methods and ensure proper reinstallation</h6>
                    
                    <h6>🧰 Tools Needed:</h6>
                    <div class="tools-needed mb-4">
                        <div class="row">
                            <div class="col-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2">🧽 <strong>Clean Cloth</strong></li>
                                    <li class="mb-2">🔨 <strong>Hammer</strong></li>
                                    <li class="mb-2">🔧 <strong>Pliers</strong></li>
                                </ul>
                            </div>
                            <div class="col-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2">🛢️ <strong>Natural Lubricant:</strong></li>
                                    <li class="small mb-1">• Petroleum jelly</li>
                                    <li class="small mb-1">• Olive oil</li>
                                    <li class="small mb-1">• Bar soap</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🔧 Step-by-Step Fix:</h6>
                    <div class="repair-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Remove Hinge Pin</strong> - Tap out with hammer and nail set
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Clean Debris</strong> - Wipe pin and hinge barrel clean
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Apply Lubricant</strong> - Light coat on pin and inside barrel
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">4</span>
                            <strong>Reinsert & Tap Back</strong> - Pin should slide in easily
                        </div>
                    </div>
                    
                    <div class="alert alert-success">
                        <h6>💡 Bonus Tip:</h6>
                        <p class="mb-0">For loose screws, add a paper shim or toothpick piece in the screw hole before reinstalling.</p>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Follow the step-by-step hinge maintenance process!</p>
                    </div>
                    
                    <div class="hinge-repair-sim mb-4" id="hingeRepairSim">
                        <div class="repair-workspace">
                            <h6>Virtual Hinge Repair</h6>
                            <div class="hinge-assembly" id="hingeAssembly">
                                <div class="hinge-barrel">
                                    <div class="hinge-pin" id="hingePin">📍</div>
                                </div>
                            </div>
                            
                            <div class="repair-controls mt-3">
                                <button class="btn btn-warning btn-sm repair-step" data-step="1" onclick="performRepairStep(1)">1. Remove Pin</button>
                                <button class="btn btn-warning btn-sm repair-step" data-step="2" onclick="performRepairStep(2)" disabled>2. Clean</button>
                                <button class="btn btn-warning btn-sm repair-step" data-step="3" onclick="performRepairStep(3)" disabled>3. Lubricate</button>
                                <button class="btn btn-warning btn-sm repair-step" data-step="4" onclick="performRepairStep(4)" disabled>4. Reinstall</button>
                            </div>
                            
                            <div class="repair-feedback mt-2" id="repairFeedback"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">True or False: Where does the hinge pin go after cleaning and lubricating?</p>
                        <div class="visual-quiz mb-3">
                            <div class="row">
                                <div class="col-6 text-center">
                                    <div class="quiz-hinge-option" style="background: #e9ecef; padding: 20px; border-radius: 8px; margin: 10px;">
                                        <div style="background: #007bff; width: 20px; height: 80px; margin: 0 auto; position: relative;">
                                            <div style="background: #28a745; width: 4px; height: 60px; position: absolute; left: 8px; top: 10px;"></div>
                                        </div>
                                        <small>Pin inside barrel</small>
                                    </div>
                                    <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('door-quiz-2', 'correct', 'Correct! The pin slides back into the hinge barrel.')">A) Correct</button>
                                </div>
                                <div class="col-6 text-center">
                                    <div class="quiz-hinge-option" style="background: #e9ecef; padding: 20px; border-radius: 8px; margin: 10px;">
                                        <div style="background: #007bff; width: 20px; height: 80px; margin: 0 auto; position: relative;">
                                            <div style="background: #28a745; width: 4px; height: 60px; position: absolute; left: -10px; top: 10px;"></div>
                                        </div>
                                        <small>Pin outside barrel</small>
                                    </div>
                                    <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('door-quiz-2', 'wrong', 'Incorrect! The pin must go inside the barrel to hold the hinge together.')">B) Incorrect</button>
                                </div>
                            </div>
                        </div>
                        <div id="door-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                    
                    <div class="completion-criteria mt-4">
                        <h6>🎉 Course Completion Criteria:</h6>
                        <ul class="list-unstyled">
                            <li>✅ Pass both checkpoint quizzes</li>
                            <li>✅ Complete sound simulation</li>
                            <li>✅ Finish interactive hinge repair demo</li>
                        </ul>
                        <div class="alert alert-success">
                            <strong>🎁 Upon Completion:</strong> Earn $5 SPANK Bucks and unlock Intermediate-Level Projects like "Install a Smart Lock", "Fix a Running Toilet", and "Fence Gate Alignment"!
                        </div>
                    </div>
                `
            }
        ]
    },
    smartlock: {
        title: "Install a Smart Lock",
        level: "Intermediate",
        duration: "40-60 minutes",
        reward: "$10 SPANK Bucks",
        lessons: [
            {
                title: "Choose the Right Smart Lock",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PGNpcmNsZSBjeD0iOTAiIGN5PSIxNTAiIHI9IjE1IiBmaWxsPSIjMDA3YmZmIi8+PHJlY3QgeD0iMTgwIiB5PSI4MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PHJlY3QgeD0iMjAwIiB5PSIxMzAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iIzI4YTc0NSIvPjxyZWN0IHg9IjMxMCIgeT0iODAiIHdpZHRoPSI4MCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiMzNDNhNDAiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjEyMCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjE0MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjE2MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjE4MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjx0ZXh0IHg9IjkwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzM0M2E0MCI+Qmx1ZXRvb3RoPC90ZXh0Pjx0ZXh0IHg9IjIyMCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMzNDNhNDAiPldpLUZpPC90ZXh0Pjx0ZXh0IHg9IjM1MCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMzNDNhNDAiPktleXBhZDwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PGNpcmNsZSBjeD0iOTAiIGN5PSIxNTAiIHI9IjE1IiBmaWxsPSIjMDA3YmZmIi8+PHJlY3QgeD0iMTgwIiB5PSI4MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PHJlY3QgeD0iMjAwIiB5PSIxMzAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iIzI4YTc0NSIvPjxyZWN0IHg9IjMxMCIgeT0iODAiIHdpZHRoPSI4MCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiMzNDNhNDAiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjEyMCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjE0MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjE2MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjM1MCIgY3k9IjE4MCIgcj0iOCIgZmlsbD0iI2ZmYzEwNyIvPjx0ZXh0IHg9IjkwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzM0M2E0MCI+Qmx1ZXRvb3RoPC90ZXh0Pjx0ZXh0IHg9IjIyMCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMzNDNhNDAiPldpLUZpPC90ZXh0Pjx0ZXh0IHg9IjM1MCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMzNDNhNDAiPktleXBhZDwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Smart Lock Types">
                    </div>
                    <h6>🎯 Objective: Understand smart lock types and pick one based on your door and smart home setup</h6>
                    
                    <h6>🔐 Smart Lock Comparison:</h6>
                    <div class="lock-comparison mb-4">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="lock-type p-3 border rounded">
                                    <h6>🔄 Retrofit Locks</h6>
                                    <p class="small mb-2"><strong>Pro:</strong> Keep existing keys</p>
                                    <p class="small mb-0"><strong>Con:</strong> Limited smart features</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="lock-type p-3 border rounded">
                                    <h6>🔒 Full Replacement</h6>
                                    <p class="small mb-2"><strong>Pro:</strong> Complete smart control</p>
                                    <p class="small mb-0"><strong>Con:</strong> Requires installation</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>📶 Connection Types:</h6>
                    <div class="connection-types mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="connection-item p-3 border rounded text-center">
                                    <div class="connection-icon mb-2">📱</div>
                                    <h6>Bluetooth</h6>
                                    <p class="small mb-0">Close-range phone control</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="connection-item p-3 border rounded text-center">
                                    <div class="connection-icon mb-2">📶</div>
                                    <h6>Wi-Fi</h6>
                                    <p class="small mb-0">Remote access anywhere</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="connection-item p-3 border rounded text-center">
                                    <div class="connection-icon mb-2">🔢</div>
                                    <h6>Keypad</h6>
                                    <p class="small mb-0">Code entry without phone</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Take the compatibility quiz - which lock fits this door?</p>
                    </div>
                    
                    <div class="lock-compatibility-quiz mb-4" id="lockCompatibilityQuiz">
                        <div class="door-scenario">
                            <h6>Your Door Specifications:</h6>
                            <div class="scenario-details p-3 bg-light rounded">
                                <ul class="list-unstyled mb-0">
                                    <li>🚪 <strong>Door thickness:</strong> 1.75 inches (standard)</li>
                                    <li>🔧 <strong>Current lock:</strong> Standard deadbolt</li>
                                    <li>📱 <strong>Smart home:</strong> No existing system</li>
                                    <li>🔋 <strong>Power preference:</strong> Battery powered</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="lock-options mt-3">
                            <h6>Which Smart Lock Would You Choose?</h6>
                            <div class="lock-choices">
                                <button class="btn btn-outline-primary lock-choice mb-2" data-choice="retrofit">
                                    🔄 Bluetooth Retrofit Lock (keeps keys)
                                </button>
                                <button class="btn btn-outline-primary lock-choice mb-2" data-choice="wifi">
                                    📶 Wi-Fi Full Replacement (remote access)
                                </button>
                                <button class="btn btn-outline-primary lock-choice mb-2" data-choice="keypad">
                                    🔢 Keypad + Bluetooth (code entry)
                                </button>
                            </div>
                            <div class="choice-feedback mt-2" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">What's the main advantage of Wi-Fi smart locks over Bluetooth-only locks?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('smart-quiz-1', 'wrong', 'Wi-Fi locks actually use more battery than Bluetooth.')">A) Longer battery life</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('smart-quiz-1', 'correct', 'Correct! Wi-Fi allows remote access from anywhere with internet.')">B) Remote access from anywhere</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('smart-quiz-1', 'wrong', 'Wi-Fi locks are typically more expensive than Bluetooth.')">C) Lower cost</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('smart-quiz-1', 'wrong', 'Installation complexity is similar for both types.')">D) Easier installation</button>
                        </div>
                        <div id="smart-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            }
            // Additional lessons would continue here...
        ]
    },
    caulk: {
        title: "Caulk a Bathtub Like a Pro",
        level: "Intermediate",
        duration: "30-40 minutes",
        reward: "$10 SPANK Bucks",
        lessons: [
            {
                title: "Remove Old Caulk",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxwYXRoIGQ9Ik0gNjAgMjAwIEwgMzQwIDIwMCIgc3Ryb2tlPSIjZGMyNjI2IiBzdHJva2Utd2lkdGg9IjgiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNIDYwIDIwMCBMIDM0MCAyMDAiIHN0cm9rZT0iIzZjNzU3ZCIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48Y2lyY2xlIGN4PSIxNTAiIGN5PSIxMDAiIHI9IjEwIiBmaWxsPSIjZmY2YjM1Ii8+PGxpbmUgeDE9IjE0NSIgeTE9Ijk1IiB4Mj0iMTU1IiB5Mj0iMTA1IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMiIvPjx0ZXh0IHg9IjIwMCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPk9sZCBDYXVsayBSZW1vdmFsPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxwYXRoIGQ9Ik0gNjAgMjAwIEwgMzQwIDIwMCIgc3Ryb2tlPSIjZGMyNjI2IiBzdHJva2Utd2lkdGg9IjgiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNIDYwIDIwMCBMIDM0MCAyMDAiIHN0cm9rZT0iIzZjNzU3ZCIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48Y2lyY2xlIGN4PSIxNTAiIGN5PSIxMDAiIHI9IjEwIiBmaWxsPSIjZmY2YjM1Ii8+PGxpbmUgeDE9IjE0NSIgeTE9Ijk1IiB4Mj0iMTU1IiB5Mj0iMTA1IiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMiIvPjx0ZXh0IHg9IjIwMCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPk9sZCBDYXVsayBSZW1vdmFsPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Old Caulk Removal">
                    </div>
                    <h6>🎯 Objective: Safely remove cracked or moldy caulk from around the tub</h6>
                    
                    <h6>🧰 Tools Needed:</h6>
                    <div class="tools-needed mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="tool-item p-3 border rounded text-center">
                                    <div class="tool-icon mb-2">🔧</div>
                                    <h6>Caulk Removal Tool</h6>
                                    <p class="small mb-0">Or 5-in-1 painter's tool</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="tool-item p-3 border rounded text-center">
                                    <div class="tool-icon mb-2">🔪</div>
                                    <h6>Utility Knife</h6>
                                    <p class="small mb-0">Sharp blade for scoring</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="tool-item p-3 border rounded text-center">
                                    <div class="tool-icon mb-2">🧽</div>
                                    <h6>Rubbing Alcohol</h6>
                                    <p class="small mb-0">70% isopropyl for cleaning</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🔧 Removal Steps:</h6>
                    <div class="removal-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Score the Old Caulk</strong> - Cut along both edges with utility knife
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Peel Slowly</strong> - Work removal tool under caulk and peel in long strips
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Clean Surface with Alcohol</strong> - Remove all residue for proper adhesion
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Practice the drag-and-scrape caulk removal technique!</p>
                    </div>
                    
                    <div class="caulk-removal-sim mb-4" id="caulkRemovalSim">
                        <div class="bathtub-edge">
                            <h6>Virtual Bathtub Edge</h6>
                            <div class="tub-surface" id="tubSurface">
                                <div class="old-caulk-line" id="oldCaulkLine">
                                    <div class="caulk-section" data-section="1">Old Caulk</div>
                                    <div class="caulk-section" data-section="2">Old Caulk</div>
                                    <div class="caulk-section" data-section="3">Old Caulk</div>
                                    <div class="caulk-section" data-section="4">Old Caulk</div>
                                </div>
                            </div>
                            
                            <div class="removal-tools mt-3">
                                <button class="btn btn-warning btn-sm" onclick="scoreOldCaulk()">1. Score Caulk</button>
                                <button class="btn btn-warning btn-sm" onclick="peelCaulk()">2. Peel Away</button>
                                <button class="btn btn-warning btn-sm" onclick="cleanSurface()">3. Clean Surface</button>
                                <button class="btn btn-outline-secondary btn-sm" onclick="resetRemoval()">Reset</button>
                            </div>
                            
                            <div class="removal-feedback mt-2" id="removalFeedback"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">What can you use to clean up caulk residue?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('caulk-quiz-1', 'wrong', 'Water alone won\\'t remove adhesive residue.')">A) Water only</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('caulk-quiz-1', 'correct', 'Correct! Rubbing alcohol dissolves adhesive and sanitizes the surface.')">B) Rubbing alcohol</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('caulk-quiz-1', 'wrong', 'Bleach can damage surfaces and isn\\'t necessary for residue removal.')">C) Bleach</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('caulk-quiz-1', 'wrong', 'Soap won\\'t remove stubborn caulk adhesive.')">D) Dish soap</button>
                        </div>
                        <div id="caulk-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Tape, Apply, and Tool New Caulk",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxsaW5lIHgxPSI2MCIgeTE9IjE5NSIgeDI9IjM0MCIgeTI9IjE5NSIgc3Ryb2tlPSIjZmZjOTA3IiBzdHJva2Utd2lkdGg9IjQiLz48bGluZSB4MT0iNjAiIHkxPSIyMDUiIHgyPSIzNDAiIHkyPSIyMDUiIHN0cm9rZT0iI2ZmYzkwNyIgc3Ryb2tlLXdpZHRoPSI0Ii8+PHBhdGggZD0iTSA2MCAyMDAgUCAyMDAgMTk1IDM0MCAyMDAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI2IiBmaWxsPSJub25lIi8+PHJlY3QgeD0iMTgwIiB5PSI2MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIgcng9IjUiLz48dGV4dCB4PSIyMDAiIHk9IjI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5Qcm9mZXNzaW9uYWwgQ2F1bGtpbmc8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxsaW5lIHgxPSI2MCIgeTE9IjE5NSIgeDI9IjM0MCIgeTI9IjE5NSIgc3Ryb2tlPSIjZmZjOTA3IiBzdHJva2Utd2lkdGg9IjQiLz48bGluZSB4MT0iNjAiIHkxPSIyMDUiIHgyPSIzNDAiIHkyPSIyMDUiIHN0cm9rZT0iI2ZmYzkwNyIgc3Ryb2tlLXdpZHRoPSI0Ii8+PHBhdGggZD0iTSA2MCAyMDAgUCAyMDAgMTk1IDM0MCAyMDAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI2IiBmaWxsPSJub25lIi8+PHJlY3QgeD0iMTgwIiB5PSI2MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzAwN2JmZiIgcng9IjUiLz48dGV4dCB4PSIyMDAiIHk9IjI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5Qcm9mZXNzaW9uYWwgQ2F1bGtpbmc8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Professional Caulking">
                    </div>
                    <h6>🎯 Objective: Apply an even, professional-looking bead of caulk</h6>
                    
                    <h6>📐 Professional Technique:</h6>
                    <div class="caulking-technique mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="technique-step p-3 border rounded">
                                    <h6>🎯 Tape Edges</h6>
                                    <p class="small mb-0">Masking tape creates clean, straight lines</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="technique-step p-3 border rounded">
                                    <h6>📐 Gun Angle</h6>
                                    <p class="small mb-0">45-degree angle, steady pressure</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="technique-step p-3 border rounded">
                                    <h6>👆 Smooth Bead</h6>
                                    <p class="small mb-0">Use finger or tool in one motion</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🎨 Caulk Types:</h6>
                    <div class="caulk-types mb-4">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="caulk-type p-3 border rounded">
                                    <h6>🔒 Silicone Caulk</h6>
                                    <p class="small mb-2"><strong>Best for:</strong> Bathrooms, waterproofing</p>
                                    <p class="small mb-0"><strong>Note:</strong> Cannot be painted</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="caulk-type p-3 border rounded">
                                    <h6>🎨 Latex Caulk</h6>
                                    <p class="small mb-2"><strong>Best for:</strong> Interior trim, paintable surfaces</p>
                                    <p class="small mb-0"><strong>Note:</strong> Less waterproof than silicone</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Practice virtual caulk gun alignment and bead application!</p>
                    </div>
                    
                    <div class="caulk-application-sim mb-4" id="caulkApplicationSim">
                        <div class="virtual-caulking">
                            <h6>Virtual Caulking Practice</h6>
                            <div class="caulk-workspace" id="caulkWorkspace">
                                <div class="masking-tape" style="display: none;"></div>
                                <div class="caulk-line" style="display: none;"></div>
                                <div class="caulk-gun" id="caulkGun" style="display: none;">🔫</div>
                            </div>
                            
                            <div class="caulking-controls mt-3">
                                <button class="btn btn-warning btn-sm" onclick="applyMaskingTape()">1. Apply Tape</button>
                                <button class="btn btn-warning btn-sm" onclick="positionCaulkGun()">2. Position Gun</button>
                                <button class="btn btn-warning btn-sm" onclick="applyCaulkBead()">3. Apply Bead</button>
                                <button class="btn btn-warning btn-sm" onclick="smoothBead()">4. Smooth</button>
                                <button class="btn btn-outline-secondary btn-sm" onclick="resetCaulking()">Reset</button>
                            </div>
                            
                            <div class="caulking-feedback mt-2" id="caulkingFeedback"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">What's the purpose of masking tape on caulking jobs?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('caulk-quiz-2', 'wrong', 'Masking tape doesn\\'t help with adhesion - surface preparation does.')">A) Better adhesion</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('caulk-quiz-2', 'correct', 'Correct! Masking tape creates perfectly straight, clean edges.')">B) Straight, clean lines</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('caulk-quiz-2', 'wrong', 'Tape doesn\\'t affect drying time.')">C) Faster drying</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('caulk-quiz-2', 'wrong', 'Tape actually helps you use less caulk by creating precise edges.')">D) Use more caulk</button>
                        </div>
                        <div id="caulk-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                    
                    <div class="completion-criteria mt-4">
                        <h6>🎉 Course Completion Criteria:</h6>
                        <ul class="list-unstyled">
                            <li>✅ Complete both interactive demos</li>
                            <li>✅ Pass quizzes with 80%+</li>
                            <li>✅ Understand silicone vs. paintable caulk</li>
                        </ul>
                        <div class="alert alert-success">
                            <strong>🎁 Earn $10 SPANK Bucks and unlock:</strong> "Install a Ceiling Light Fixture" and "Patch a Hole in Drywall"!
                        </div>
                    </div>
                `
            }
        ]
    },
    smartSwitches: {
        title: "DIY Smart Switches Installation",
        level: "Intermediate", 
        duration: "45-60 minutes",
        reward: "$10 SPANK Bucks",
        lessons: [
            {
                title: "Understanding Smart Switches",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iNzAiIHdpZHRoPSIyMDAiIGhlaWdodD0iMTYwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNkZGQiIHN0cm9rZS13aWR0aD0iMiIvPjxyZWN0IHg9IjEzMCIgeT0iMTAwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj5TbWFydCBTd2l0Y2g8L3RleHQ+PGNpcmNsZSBjeD0iMTUwIiBjeT0iMTcwIiByPSIxNSIgZmlsbD0iIzI4YTc0NSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE3MCIgcj0iMTUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSIzIi8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+U21hcnQgU3dpdGNoIERlc2lnbjwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iNzAiIHdpZHRoPSIyMDAiIGhlaWdodD0iMTYwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNkZGQiIHN0cm9rZS13aWR0aD0iMiIvPjxyZWN0IHg9IjEzMCIgeT0iMTAwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMTI1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj5TbWFydCBTd2l0Y2g8L3RleHQ+PGNpcmNsZSBjeD0iMTUwIiBjeT0iMTcwIiByPSIxNSIgZmlsbD0iIzI4YTc0NSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE3MCIgcj0iMTUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSIzIi8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+U21hcnQgU3dpdGNoIERlc2lnbjwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Smart Switch Design">
                    </div>
                    <h6>🎯 Objective: Learn about smart switch features and benefits</h6>
                    
                    <h6>🔌 What Makes Switches "Smart":</h6>
                    <div class="switch-features mb-4">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="feature-card p-3 border rounded">
                                    <h6>📱 Remote Control</h6>
                                    <p class="small mb-0">Control lights from anywhere with your smartphone</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="feature-card p-3 border rounded">
                                    <h6>🗣️ Voice Commands</h6>
                                    <p class="small mb-0">Works with Alexa, Google Assistant</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="feature-card p-3 border rounded">
                                    <h6>⏰ Scheduling</h6>
                                    <p class="small mb-0">Set lights to turn on/off automatically</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="feature-card p-3 border rounded">
                                    <h6>⚡ Energy Monitoring</h6>
                                    <p class="small mb-0">Track usage and save on bills</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-lightbulb me-2"></i>Brand Recommendations:</h6>
                        <p class="mb-2"><strong>Best Overall:</strong> Lutron Caseta - Reliable, professional grade</p>
                        <p class="mb-0"><strong>Budget-Friendly:</strong> TP-Link Kasa - Great features at lower cost</p>
                    </div>
                    
                    <div class="alert alert-warning">
                        <h6><i class="fas fa-exclamation-triangle me-2"></i>Important Safety Note:</h6>
                        <p class="mb-0">Always turn off power at the breaker before working with electrical switches. When in doubt, contact Spankks Construction for professional installation.</p>
                    </div>
                `
            },
            {
                title: "Tools and Safety Check",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2RkZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3QgeD0iNzAiIHk9IjcwIiB3aWR0aD0iNDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjZmYzOTM5IiByeD0iNSIvPjx0ZXh0IHg9IjkwIiB5PSIyMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzM0M2E0MCI+Vm9sdGFnZSBUZXN0ZXI8L3RleHQ+PHJlY3QgeD0iMTMwIiB5PSI3MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjEyMCIgZmlsbD0iIzAwN2JmZiIgcng9IjUiLz48dGV4dCB4PSIxNTAiIHk9IjIwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzQzYTQwIj5TY3Jld2RyaXZlcjwvdGV4dD48cmVjdCB4PSIxOTAiIHk9IjcwIiB3aWR0aD0iNDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjx0ZXh0IHg9IjIxMCIgeT0iMjAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMzNDNhNDAiPldpcmUgU3RyaXBwZXJzPC90ZXh0PjxyZWN0IHg9IjI1MCIgeT0iNzAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzZmNDJjMSIgcng9IjUiLz48dGV4dCB4PSIyOTAiIHk9IjIwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzQzYTQwIj5TbWFydCBTd2l0Y2g8L3RleHQ+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+RXNzZW50aWFsIFRvb2xzPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2RkZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHJlY3QgeD0iNzAiIHk9IjcwIiB3aWR0aD0iNDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjZmYzOTM5IiByeD0iNSIvPjx0ZXh0IHg9IjkwIiB5PSIyMDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzM0M2E0MCI+Vm9sdGFnZSBUZXN0ZXI8L3RleHQ+PHJlY3QgeD0iMTMwIiB5PSI3MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjEyMCIgZmlsbD0iIzAwN2JmZiIgcng9IjUiLz48dGV4dCB4PSIxNTAiIHk9IjIwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzQzYTQwIj5TY3Jld2RyaXZlcjwvdGV4dD48cmVjdCB4PSIxOTAiIHk9IjcwIiB3aWR0aD0iNDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjx0ZXh0IHg9IjIxMCIgeT0iMjAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMzNDNhNDAiPldpcmUgU3RyaXBwZXJzPC90ZXh0PjxyZWN0IHg9IjI1MCIgeT0iNzAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzZmNDJjMSIgcng9IjUiLz48dGV4dCB4PSIyOTAiIHk9IjIwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzQzYTQwIj5TbWFydCBTd2l0Y2g8L3RleHQ+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+RXNzZW50aWFsIFRvb2xzPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Essential Tools">
                    </div>
                    <h6>🎯 Objective: Gather tools and perform safety checks before starting</h6>
                    
                    <h6>🧰 Required Tools:</h6>
                    <div class="tool-checklist mb-4">
                        <div class="checklist-item mb-3">
                            <input type="checkbox" id="tool1" class="form-check-input me-2">
                            <label for="tool1" class="fw-bold">Voltage Tester</label>
                            <p class="small text-muted mb-0">Most important - ensures power is off</p>
                        </div>
                        <div class="checklist-item mb-3">
                            <input type="checkbox" id="tool2" class="form-check-input me-2">
                            <label for="tool2" class="fw-bold">Screwdriver Set</label>
                            <p class="small text-muted mb-0">Phillips and flathead screwdrivers</p>
                        </div>
                        <div class="checklist-item mb-3">
                            <input type="checkbox" id="tool3" class="form-check-input me-2">
                            <label for="tool3" class="fw-bold">Wire Strippers</label>
                            <p class="small text-muted mb-0">For preparing wire connections</p>
                        </div>
                        <div class="checklist-item mb-3">
                            <input type="checkbox" id="tool4" class="form-check-input me-2">
                            <label for="tool4" class="fw-bold">Electrical Tape</label>
                            <p class="small text-muted mb-0">For labeling and securing connections</p>
                        </div>
                        <div class="checklist-item mb-3">
                            <input type="checkbox" id="tool5" class="form-check-input me-2">
                            <label for="tool5" class="fw-bold">Smart Switch Kit</label>
                            <p class="small text-muted mb-0">Lutron Caseta or TP-Link Kasa recommended</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Voltage tester simulation - practice safety checks!</p>
                    </div>
                    
                    <div class="voltage-tester-sim mb-4" id="voltageTestSim">
                        <div class="tester-workspace">
                            <h6>Virtual Voltage Tester</h6>
                            <div class="electrical-box" id="electricalBox">
                                <div class="wire-black" id="wireBlack">Black Wire</div>
                                <div class="wire-white" id="wireWhite">White Wire</div>
                                <div class="wire-green" id="wireGreen">Ground Wire</div>
                                <div class="voltage-reading" id="voltageReading">0V</div>
                            </div>
                            
                            <div class="tester-controls mt-3">
                                <button class="btn btn-danger btn-sm" onclick="testVoltage('on')">Test with Power ON</button>
                                <button class="btn btn-success btn-sm" onclick="testVoltage('off')">Test with Power OFF</button>
                                <button class="btn btn-warning btn-sm" onclick="resetVoltageTest()">Reset</button>
                            </div>
                            
                            <div class="voltage-feedback mt-2" id="voltageFeedback"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-danger text-white rounded">
                        <h6>⚠️ Safety Checkpoint Quiz:</h6>
                        <p class="mb-2">What should the voltage tester read when it's safe to work?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('voltage-quiz-1', 'wrong', 'Danger! 120V means power is still on.')">A) 120V</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('voltage-quiz-1', 'correct', 'Correct! 0V means power is safely off.')">B) 0V</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('voltage-quiz-1', 'wrong', '240V is even more dangerous.')">C) 240V</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('voltage-quiz-1', 'wrong', 'Any voltage reading means it\\'s not safe.')">D) Any voltage</button>
                        </div>
                        <div id="voltage-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Wire Identification & Connection",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2RkZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGxpbmUgeDE9IjgwIiB5MT0iMTAwIiB4Mj0iMTUwIiB5Mj0iMTAwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iNSIvPjx0ZXh0IHg9IjExNSIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzAwMCI+QmxhY2sgKExpdmUpPC90ZXh0PjxsaW5lIHgxPSI4MCIgeTE9IjE0MCIgeDI9IjE1MCIgeTI9IjE0MCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjUiLz48dGV4dCB4PSIxMTUiIHk9IjEzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzQzYTQwIj5XaGl0ZSAoTmV1dHJhbCk8L3RleHQ+PGxpbmUgeDE9IjgwIiB5MT0iMTgwIiB4Mj0iMTUwIiB5Mj0iMTgwIiBzdHJva2U9IiMyOGE3NDUiIHN0cm9rZS13aWR0aD0iNSIvPjx0ZXh0IHg9IjExNSIgeT0iMTcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMyOGE3NDUiPkdyZWVuIChHcm91bmQpPC90ZXh0PjxyZWN0IHg9IjIyMCIgeT0iODAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTQwIiBmaWxsPSIjNmY0MmMxIiByeD0iMTAiLz48dGV4dCB4PSIyNzAiIHk9IjE1NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSJ3aGl0ZSI+U21hcnQgU3dpdGNoPC90ZXh0PjxsaW5lIHgxPSIxNTAiIHkxPSIxMDAiIHgyPSIyMjAiIHkyPSIxMDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48bGluZSB4MT0iMTUwIiB5MT0iMTQwIiB4Mj0iMjIwIiB5Mj0iMTQwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWRhc2hhcnJheT0iNSw1Ii8+PGxpbmUgeDE9IjE1MCIgeTE9IjE4MCIgeDI9IjIyMCIgeTI9IjE4MCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1kYXNoYXJyYXk9IjUsNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPldpcmUgQ29ubmVjdGlvbnM8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2RkZCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGxpbmUgeDE9IjgwIiB5MT0iMTAwIiB4Mj0iMTUwIiB5Mj0iMTAwIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iNSIvPjx0ZXh0IHg9IjExNSIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzAwMCI+QmxhY2sgKExpdmUpPC90ZXh0PjxsaW5lIHgxPSI4MCIgeTE9IjE0MCIgeDI9IjE1MCIgeTI9IjE0MCIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjUiLz48dGV4dCB4PSIxMTUiIHk9IjEzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjMzQzYTQwIj5XaGl0ZSAoTmV1dHJhbCk8L3RleHQ+PGxpbmUgeDE9IjgwIiB5MT0iMTgwIiB4Mj0iMTUwIiB5Mj0iMTgwIiBzdHJva2U9IiMyOGE3NDUiIHN0cm9rZS13aWR0aD0iNSIvPjx0ZXh0IHg9IjExNSIgeT0iMTcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiMyOGE3NDUiPkdyZWVuIChHcm91bmQpPC90ZXh0PjxyZWN0IHg9IjIyMCIgeT0iODAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTQwIiBmaWxsPSIjNmY0MmMxIiByeD0iMTAiLz48dGV4dCB4PSIyNzAiIHk9IjE1NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSJ3aGl0ZSI+U21hcnQgU3dpdGNoPC90ZXh0PjxsaW5lIHgxPSIxNTAiIHkxPSIxMDAiIHgyPSIyMjAiIHkyPSIxMDAiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48bGluZSB4MT0iMTUwIiB5MT0iMTQwIiB4Mj0iMjIwIiB5Mj0iMTQwIiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWRhc2hhcnJheT0iNSw1Ii8+PGxpbmUgeDE9IjE1MCIgeTE9IjE4MCIgeDI9IjIyMCIgeTI9IjE4MCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1kYXNoYXJyYXk9IjUsNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPldpcmUgQ29ubmVjdGlvbnM8L3RleHQ+PC9zdmc+=" class="img-fluid rounded" alt="Wire Connections">
                    </div>
                    <h6>🎯 Objective: Learn to identify wires and make proper connections</h6>
                    
                    <h6>🔌 Wire Identification:</h6>
                    <div class="wire-guide mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="wire-type p-3 border rounded text-center">
                                    <div class="wire-color-black mb-2" style="height: 20px; background: black; border-radius: 10px;"></div>
                                    <h6>Black Wire</h6>
                                    <p class="small mb-0">Live/Hot - carries electricity</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="wire-type p-3 border rounded text-center">
                                    <div class="wire-color-white mb-2" style="height: 20px; background: white; border: 1px solid #ccc; border-radius: 10px;"></div>
                                    <h6>White Wire</h6>
                                    <p class="small mb-0">Neutral - completes circuit</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="wire-type p-3 border rounded text-center">
                                    <div class="wire-color-green mb-2" style="height: 20px; background: green; border-radius: 10px;"></div>
                                    <h6>Green/Bare Wire</h6>
                                    <p class="small mb-0">Ground - safety wire</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Wire matching simulator - connect the right wires!</p>
                    </div>
                    
                    <div class="wire-matching-sim mb-4" id="wireMatchingSim">
                        <div class="matching-workspace">
                            <h6>Wire Connection Simulator</h6>
                            <div class="wire-diagram">
                                <div class="old-switch-wires">
                                    <div class="wire-item" data-wire="black" draggable="true">
                                        <span class="wire-visual" style="background: black;"></span>
                                        <span>Black Wire</span>
                                    </div>
                                    <div class="wire-item" data-wire="white" draggable="true">
                                        <span class="wire-visual" style="background: white; border: 1px solid #ccc;"></span>
                                        <span>White Wire</span>
                                    </div>
                                    <div class="wire-item" data-wire="green" draggable="true">
                                        <span class="wire-visual" style="background: green;"></span>
                                        <span>Green Wire</span>
                                    </div>
                                </div>
                                
                                <div class="smart-switch-terminals">
                                    <div class="terminal" data-terminal="live" ondrop="dropWire(event)" ondragover="allowDrop(event)">
                                        <span>LIVE Terminal</span>
                                        <div class="drop-zone"></div>
                                    </div>
                                    <div class="terminal" data-terminal="neutral" ondrop="dropWire(event)" ondragover="allowDrop(event)">
                                        <span>NEUTRAL Terminal</span>
                                        <div class="drop-zone"></div>
                                    </div>
                                    <div class="terminal" data-terminal="ground" ondrop="dropWire(event)" ondragover="allowDrop(event)">
                                        <span>GROUND Terminal</span>
                                        <div class="drop-zone"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="wire-feedback mt-2" id="wireFeedback"></div>
                            <button class="btn btn-warning btn-sm mt-2" onclick="checkWireConnections()">Check Connections</button>
                            <button class="btn btn-secondary btn-sm mt-2" onclick="resetWireMatching()">Reset</button>
                        </div>
                    </div>
                    
                    <div class="alert alert-warning">
                        <h6><i class="fas fa-exclamation-triangle me-2"></i>Critical Safety:</h6>
                        <p class="mb-0">If your old switch doesn't have a white (neutral) wire, you may need a professional electrician. Some smart switches require neutral wires that older homes may not have.</p>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">Which wire carries the electrical current to the switch?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('wire-quiz-1', 'correct', 'Correct! The black wire is the live/hot wire that carries current.')">A) Black wire</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('wire-quiz-1', 'wrong', 'White wire is neutral - it completes the circuit.')">B) White wire</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('wire-quiz-1', 'wrong', 'Green wire is for grounding/safety only.')">C) Green wire</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('wire-quiz-1', 'wrong', 'All wires have different specific functions.')">D) All wires equally</button>
                        </div>
                        <div id="wire-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Installation & Testing",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iNTAiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNkZGQiIHN0cm9rZS13aWR0aD0iMyIvPjxyZWN0IHg9IjEzMCIgeT0iODAiIHdpZHRoPSIxNDAiIGhlaWdodD0iNjAiIGZpbGw9IiM2ZjQyYzEiIHJ4PSIxMCIvPjx0ZXh0IHg9IjIwMCIgeT0iMTE1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj5JbnN0YWxsZWQ8L3RleHQ+PGNpcmNsZSBjeD0iMTUwIiBjeT0iMTcwIiByPSIyMCIgZmlsbD0iIzI4YTc0NSIvPjx0ZXh0IHg9IjE1MCIgeT0iMTc3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj7inJM8L3RleHQ+PGNpcmNsZSBjeD0iMjUwIiBjeT0iMTcwIiByPSIyMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjI1MCIgeT0iMTc3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj7wn5OxPC90ZXh0PjxyZWN0IHg9IjEzMCIgeT0iMjAwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjIwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IndoaXRlIj5Xb3JraW5nITwvdGV4dD48dGV4dCB4PSIyMDAiIHk9IjI3MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5TdWNjZXNzZnVsIEluc3RhbGxhdGlvbjwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iNTAiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNkZGQiIHN0cm9rZS13aWR0aD0iMyIvPjxyZWN0IHg9IjEzMCIgeT0iODAiIHdpZHRoPSIxNDAiIGhlaWdodD0iNjAiIGZpbGw9IiM2ZjQyYzEiIHJ4PSIxMCIvPjx0ZXh0IHg9IjIwMCIgeT0iMTE1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj5JbnN0YWxsZWQ8L3RleHQ+PGNpcmNsZSBjeD0iMTUwIiBjeT0iMTcwIiByPSIyMCIgZmlsbD0iIzI4YTc0NSIvPjx0ZXh0IHg9IjE1MCIgeT0iMTc3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj7inJM8L3RleHQ+PGNpcmNsZSBjeD0iMjUwIiBjeT0iMTcwIiByPSIyMCIgZmlsbD0iIzAwN2JmZiIvPjx0ZXh0IHg9IjI1MCIgeT0iMTc3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IndoaXRlIj7wn5OxPC90ZXh0PjxyZWN0IHg9IjEzMCIgeT0iMjAwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjIwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IndoaXRlIj5Xb3JraW5nITwvdGV4dD48dGV4dCB4PSIyMDAiIHk9IjI3MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5TdWNjZXNzZnVsIEluc3RhbGxhdGlvbjwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Successful Installation">
                    </div>
                    <h6>🎯 Objective: Complete installation and test your smart switch</h6>
                    
                    <h6>🔧 Installation Steps:</h6>
                    <div class="installation-steps mb-4">
                        <div class="step-item mb-3 p-3 border rounded">
                            <h6>Step 1: Secure Connections</h6>
                            <p class="small mb-0">Ensure all wire nuts are tight and no bare wire is exposed</p>
                        </div>
                        <div class="step-item mb-3 p-3 border rounded">
                            <h6>Step 2: Fold Wires</h6>
                            <p class="small mb-0">Carefully fold wires into the electrical box</p>
                        </div>
                        <div class="step-item mb-3 p-3 border rounded">
                            <h6>Step 3: Mount Switch</h6>
                            <p class="small mb-0">Attach switch to wall box with provided screws</p>
                        </div>
                        <div class="step-item mb-3 p-3 border rounded">
                            <h6>Step 4: Restore Power</h6>
                            <p class="small mb-0">Turn breaker back on and test basic function</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Installation completion simulator!</p>
                    </div>
                    
                    <div class="installation-sim mb-4" id="installationSim">
                        <div class="install-workspace">
                            <h6>Smart Switch Installation</h6>
                            <div class="install-progress">
                                <div class="install-step" id="step1">
                                    <span class="step-number">1</span>
                                    <span class="step-text">Connections Secure</span>
                                    <button class="btn btn-sm btn-outline-primary" onclick="completeStep(1)">Complete</button>
                                </div>
                                <div class="install-step" id="step2">
                                    <span class="step-number">2</span>
                                    <span class="step-text">Wires Folded</span>
                                    <button class="btn btn-sm btn-outline-primary" onclick="completeStep(2)" disabled>Complete</button>
                                </div>
                                <div class="install-step" id="step3">
                                    <span class="step-number">3</span>
                                    <span class="step-text">Switch Mounted</span>
                                    <button class="btn btn-sm btn-outline-primary" onclick="completeStep(3)" disabled>Complete</button>
                                </div>
                                <div class="install-step" id="step4">
                                    <span class="step-number">4</span>
                                    <span class="step-text">Power Restored</span>
                                    <button class="btn btn-sm btn-outline-primary" onclick="completeStep(4)" disabled>Complete</button>
                                </div>
                            </div>
                            <div class="install-feedback mt-3" id="installFeedback"></div>
                        </div>
                    </div>
                    
                    <h6>📱 Smart Features Setup:</h6>
                    <div class="smart-setup mb-4">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="setup-card p-3 border rounded">
                                    <h6>📲 Download App</h6>
                                    <p class="small mb-0">Lutron Caseta or Kasa Smart app</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="setup-card p-3 border rounded">
                                    <h6>🔗 Connect to WiFi</h6>
                                    <p class="small mb-0">Follow in-app setup instructions</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="setup-card p-3 border rounded">
                                    <h6>🎙️ Voice Control</h6>
                                    <p class="small mb-0">Link to Alexa or Google Assistant</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="setup-card p-3 border rounded">
                                    <h6>⏰ Set Schedules</h6>
                                    <p class="small mb-0">Automate lights for energy savings</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-success">
                        <h6><i class="fas fa-lightbulb me-2"></i>Professional Tip from Spankks Construction:</h6>
                        <p class="mb-0">Smart switches are great for DIY, but if you need new circuits, outlets, or panel upgrades, call us! We handle all electrical work beyond basic switch replacement.</p>
                    </div>
                    
                    <div class="completion-criteria mt-4">
                        <h6>🎉 Course Completion Criteria:</h6>
                        <ul class="list-unstyled">
                            <li>✅ Pass all safety quizzes</li>
                            <li>✅ Complete wire matching simulation</li>
                            <li>✅ Finish installation simulator</li>
                        </ul>
                        <div class="alert alert-success">
                            <strong>🎁 Earn $10 SPANK Bucks and get 15% off your next Spankks Construction electrical service!</strong>
                        </div>
                    </div>
                `
            }
        ]
    },
    light: {
        title: "Install a Ceiling Light Fixture",
        level: "Intermediate",
        duration: "45-60 minutes",
        reward: "$10 SPANK Bucks",
        lessons: [
            {
                title: "Cut Power + Remove Old Fixture",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSIjZmZjMTA3Ii8+PGxpbmUgeDE9IjIwMCIgeTE9IjExMCIgeDI9IjIwMCIgeTI9IjE2MCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjQiLz48bGluZSB4MT0iMTgwIiB5MT0iMTYwIiB4Mj0iMjIwIiB5Mj0iMTYwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iNCIvPjxsaW5lIHgxPSIxNjAiIHkxPSIxNjAiIHgyPSIyNDAiIHkyPSIxNjAiIHN0cm9rZT0iIzAwN2JmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+PHJlY3QgeD0iMzIwIiB5PSIxMDAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48dGV4dCB4PSIyMDAiIHk9IjI0MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5FbGVjdHJpY2FsIFNhZmV0eSBGaXJzdDwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSIjZmZjMTA3Ii8+PGxpbmUgeDE9IjIwMCIgeTE9IjExMCIgeDI9IjIwMCIgeTI9IjE2MCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjQiLz48bGluZSB4MT0iMTgwIiB5MT0iMTYwIiB4Mj0iMjIwIiB5Mj0iMTYwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iNCIvPjxsaW5lIHgxPSIxNjAiIHkxPSIxNjAiIHgyPSIyNDAiIHkyPSIxNjAiIHN0cm9rZT0iIzAwN2JmZiIgc3Ryb2tlLXdpZHRoPSI0Ii8+PHJlY3QgeD0iMzIwIiB5PSIxMDAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48dGV4dCB4PSIyMDAiIHk9IjI0MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5FbGVjdHJpY2FsIFNhZmV0eSBGaXJzdDwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Electrical Safety First">
                    </div>
                    <h6>🎯 Objective: Safely prep the area and expose the junction box</h6>
                    
                    <h6>🧰 Tools Needed:</h6>
                    <div class="tools-needed mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="tool-item p-3 border rounded text-center">
                                    <div class="tool-icon mb-2">🔧</div>
                                    <h6>Screwdriver</h6>
                                    <p class="small mb-0">Phillips and flathead</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="tool-item p-3 border rounded text-center">
                                    <div class="tool-icon mb-2">⚡</div>
                                    <h6>Voltage Tester</h6>
                                    <p class="small mb-0">Non-contact preferred</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="tool-item p-3 border rounded text-center">
                                    <div class="tool-icon mb-2">🪜</div>
                                    <h6>Ladder</h6>
                                    <p class="small mb-0">Stable step ladder</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-danger">
                        <h6>⚠️ CRITICAL SAFETY WARNING</h6>
                        <p class="mb-0">Always turn off power at the breaker and test wires before touching them. Electrical work can be deadly if not done properly.</p>
                    </div>
                    
                    <h6>🔧 Safe Removal Steps:</h6>
                    <div class="removal-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Turn Off Circuit Breaker</strong> - Find the correct breaker and flip it OFF
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Test Power</strong> - Use voltage tester on wires to confirm no power
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Remove Screws and Disconnect</strong> - Unscrew fixture, disconnect wire nuts
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Practice using the circuit tester safely!</p>
                    </div>
                    
                    <div class="circuit-tester-sim mb-4" id="circuitTesterSim">
                        <div class="electrical-panel">
                            <h6>Circuit Breaker Panel</h6>
                            <div class="breaker-panel" id="breakerPanel">
                                <div class="breaker" data-circuit="kitchen" onclick="toggleBreaker(this)">Kitchen</div>
                                <div class="breaker" data-circuit="bathroom" onclick="toggleBreaker(this)">Bathroom</div>
                                <div class="breaker" data-circuit="bedroom" onclick="toggleBreaker(this)">Bedroom</div>
                                <div class="breaker active" data-circuit="living" onclick="toggleBreaker(this)">Living Room</div>
                            </div>
                        </div>
                        
                        <div class="voltage-testing mt-3">
                            <h6>Voltage Tester</h6>
                            <div class="wire-junction">
                                <div class="wire black" data-wire="hot">Black Wire</div>
                                <div class="wire white" data-wire="neutral">White Wire</div>
                                <div class="wire green" data-wire="ground">Ground Wire</div>
                            </div>
                            <button class="btn btn-danger" onclick="testVoltage()">🔍 Test for Power</button>
                            <div class="voltage-result mt-2" id="voltageResult"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">What's the most important step before handling wires?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('light-quiz-1', 'wrong', 'Tools are important, but safety comes first!')">A) Gather tools</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('light-quiz-1', 'correct', 'Correct! Always turn off power and test wires before touching them.')">B) Turn off power & test</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('light-quiz-1', 'wrong', 'Remove the old fixture only after confirming power is off.')">C) Remove old fixture</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('light-quiz-1', 'wrong', 'Read instructions after ensuring electrical safety.')">D) Read instructions</button>
                        </div>
                        <div id="light-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Wire and Mount New Fixture",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iODAiIHI9IjI1IiBmaWxsPSIjZmZjMTA3Ii8+PGxpbmUgeDE9IjE2MCIgeTE9IjE0MCIgeDI9IjE2MCIgeTI9IjE4MCIgc3Ryb2tlPSIjZGMyNjI2IiBzdHJva2Utd2lkdGg9IjYiLz48bGluZSB4MT0iMjAwIiB5MT0iMTQwIiB4Mj0iMjAwIiB5Mj0iMTgwIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iNiIvPjxsaW5lIHgxPSIyNDAiIHkxPSIxNDAiIHgyPSIyNDAiIHkyPSIxODAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI2Ii8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMjAwIiByPSIxMCIgZmlsbD0iI2ZmNmIzNSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTAiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIyNDAiIGN5PSIyMDAiIHI9IjEwIiBmaWxsPSIjZmY2YjM1Ii8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+V2lyZSBDb25uZWN0aW9uczwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzM0M2E0MCIgcng9IjEwIi8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iODAiIHI9IjI1IiBmaWxsPSIjZmZjMTA3Ii8+PGxpbmUgeDE9IjE2MCIgeTE9IjE0MCIgeDI9IjE2MCIgeTI9IjE4MCIgc3Ryb2tlPSIjZGMyNjI2IiBzdHJva2Utd2lkdGg9IjYiLz48bGluZSB4MT0iMjAwIiB5MT0iMTQwIiB4Mj0iMjAwIiB5Mj0iMTgwIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iNiIvPjxsaW5lIHgxPSIyNDAiIHkxPSIxNDAiIHgyPSIyNDAiIHkyPSIxODAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI2Ii8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMjAwIiByPSIxMCIgZmlsbD0iI2ZmNmIzNSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTAiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIyNDAiIGN5PSIyMDAiIHI9IjEwIiBmaWxsPSIjZmY2YjM1Ii8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+V2lyZSBDb25uZWN0aW9uczwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Wire Connections">
                    </div>
                    <h6>🎯 Objective: Wire the new fixture correctly and secure it in place</h6>
                    
                    <h6>🔌 Standard Wiring:</h6>
                    <div class="wiring-guide mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="wire-connection p-3 border rounded text-center">
                                    <div class="wire-color mb-2" style="background: black; color: white; padding: 5px; border-radius: 4px;">BLACK</div>
                                    <h6>Hot Wire</h6>
                                    <p class="small mb-0">Black to black (power)</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="wire-connection p-3 border rounded text-center">
                                    <div class="wire-color mb-2" style="background: white; color: black; padding: 5px; border-radius: 4px; border: 1px solid #ccc;">WHITE</div>
                                    <h6>Neutral Wire</h6>
                                    <p class="small mb-0">White to white (return)</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="wire-connection p-3 border rounded text-center">
                                    <div class="wire-color mb-2" style="background: green; color: white; padding: 5px; border-radius: 4px;">GREEN</div>
                                    <h6>Ground Wire</h6>
                                    <p class="small mb-0">Green to ground screw</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🔧 Installation Steps:</h6>
                    <div class="installation-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Secure Mount Bracket</strong> - Attach bracket to junction box with screws
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Connect Wires</strong> - Black to black, white to white, ground to screw
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Use Wire Nuts</strong> - Twist clockwise to secure connections
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">4</span>
                            <strong>Mount Fixture</strong> - Attach fixture to bracket and test
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Practice color-coded wire matching!</p>
                    </div>
                    
                    <div class="wire-matching-sim mb-4" id="wireMatchingSim">
                        <div class="wiring-practice">
                            <h6>Wire Connection Practice</h6>
                            <div class="junction-box">
                                <div class="ceiling-wires">
                                    <div class="ceiling-wire black" data-wire="hot">House Black</div>
                                    <div class="ceiling-wire white" data-wire="neutral">House White</div>
                                    <div class="ceiling-wire green" data-wire="ground">House Ground</div>
                                </div>
                                
                                <div class="fixture-wires">
                                    <div class="fixture-wire black" data-wire="hot" draggable="true">Fixture Black</div>
                                    <div class="fixture-wire white" data-wire="neutral" draggable="true">Fixture White</div>
                                    <div class="fixture-wire green" data-wire="ground" draggable="true">Fixture Ground</div>
                                </div>
                            </div>
                            
                            <div class="wire-nuts">
                                <div class="wire-nut" id="hotConnection" data-connection="hot">🔗</div>
                                <div class="wire-nut" id="neutralConnection" data-connection="neutral">🔗</div>
                                <div class="wire-nut" id="groundConnection" data-connection="ground">🔗</div>
                            </div>
                            
                            <div class="wiring-feedback mt-2" id="wiringFeedback"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">Which wire goes to the ground screw?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('light-quiz-2', 'wrong', 'Black wire carries power (hot) and goes to black wire.')">A) Black wire</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('light-quiz-2', 'wrong', 'White wire is neutral and goes to white wire.')">B) White wire</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('light-quiz-2', 'correct', 'Correct! Green or bare copper wire provides grounding for safety.')">C) Green wire</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('light-quiz-2', 'wrong', 'Red wires are typically for switched circuits, not ground.')">D) Red wire</button>
                        </div>
                        <div id="light-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                    
                    <div class="completion-criteria mt-4">
                        <h6>🎉 Course Completion Criteria:</h6>
                        <ul class="list-unstyled">
                            <li>✅ Pass safety quiz</li>
                            <li>✅ Complete virtual wiring & mount</li>
                            <li>✅ Identify wiring diagram successfully</li>
                        </ul>
                        <div class="alert alert-success">
                            <strong>🎁 Earn $10 SPANK Bucks and unlock:</strong> "Patch a Hole in Drywall" and "Install a Dimmer Switch"!
                        </div>
                    </div>
                `
            }
        ]
    },
    toilet: {
        title: "Fix a Running Toilet",
        level: "Intermediate",
        duration: "35-45 minutes",
        reward: "$10 SPANK Bucks",
        lessons: [
            {
                title: "Diagnose the Problem",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE0MCIgcj0iMzAiIGZpbGw9IiMwMDdiZmYiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZmY2YjM1Ii8+PHJlY3QgeD0iMjMwIiB5PSIxNDAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iI2ZmYzEwNyIgcng9IjUiLz48cGF0aCBkPSJNIDIwMCAxNjAgUSAyMjAgMTcwIDIwMCAxODAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIi8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+VG9pbGV0IEludGVybmFsczwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE0MCIgcj0iMzAiIGZpbGw9IiMwMDdiZmYiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZmY2YjM1Ii8+PHJlY3QgeD0iMjMwIiB5PSIxNDAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iI2ZmYzEwNyIgcng9IjUiLz48cGF0aCBkPSJNIDIwMCAxNjAgUSAyMjAgMTcwIDIwMCAxODAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIi8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+VG9pbGV0IEludGVybmFsczwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Toilet Internals">
                    </div>
                    <h6>🎯 Objective: Identify what's causing the toilet to run continuously</h6>
                    
                    <h6>🔍 Common Causes of Running Toilets:</h6>
                    <div class="toilet-problems mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="problem-item p-3 border rounded text-center">
                                    <div class="problem-icon mb-2">🔴</div>
                                    <h6>Warped Flapper</h6>
                                    <p class="small mb-0">Doesn't seal properly</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="problem-item p-3 border rounded text-center">
                                    <div class="problem-icon mb-2">⚖️</div>
                                    <h6>Float Adjustment</h6>
                                    <p class="small mb-0">Water level too high</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="problem-item p-3 border rounded text-center">
                                    <div class="problem-icon mb-2">🔧</div>
                                    <h6>Chain Length</h6>
                                    <p class="small mb-0">Too tight or too loose</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🔧 Diagnostic Steps:</h6>
                    <div class="diagnostic-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Remove Tank Lid</strong> - Carefully lift off ceramic lid
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Check Flapper Seal</strong> - Press down to see if water stops
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Examine Chain</strong> - Should have slight slack when flapper is closed
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">4</span>
                            <strong>Test Float</strong> - Lift to see if fill valve stops
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Virtual toilet diagnosis - identify the problem!</p>
                    </div>
                    
                    <div class="toilet-diagnosis-sim mb-4" id="toiletDiagnosisSim">
                        <div class="virtual-toilet-tank">
                            <h6>Virtual Toilet Tank</h6>
                            <div class="tank-interior" id="tankInterior">
                                <div class="flapper" id="virtualFlapper" onclick="checkFlapper()">Flapper</div>
                                <div class="chain" id="virtualChain" onclick="checkChain()">Chain</div>
                                <div class="float" id="virtualFloat" onclick="checkFloat()">Float</div>
                                <div class="fill-valve" id="fillValve">Fill Valve</div>
                            </div>
                            
                            <div class="diagnosis-results mt-3">
                                <div class="water-flow" id="waterFlow">💧 Water continuously flowing</div>
                                <div class="diagnosis-feedback mt-2" id="diagnosisFeedback"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">What should you do first when diagnosing a running toilet?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('toilet-quiz-1', 'correct', 'Correct! Always remove the tank lid to see the internal components.')">A) Remove tank lid</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('toilet-quiz-1', 'wrong', 'Turn off water only if you need to make repairs.')">B) Turn off water</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('toilet-quiz-1', 'wrong', 'Flush first to observe, but remove lid to diagnose.')">C) Flush toilet</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('toilet-quiz-1', 'wrong', 'Check flapper after removing the lid.')">D) Check flapper</button>
                        </div>
                        <div id="toilet-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Fix the Most Common Issues",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE0MCIgcj0iMzAiIGZpbGw9IiMyOGE3NDUiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjMjhhNzQ1Ii8+PHJlY3QgeD0iMjMwIiB5PSIxNDAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iIzI4YTc0NSIgcng9IjUiLz48cGF0aCBkPSJNIDIwMCAxNjAgUSAyMjAgMTcwIDIwMCAxODAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTSAyMDAgMTMwIEwgMTk1IDEyNSBMIDIwNSAxMjUgWiIgZmlsbD0iIzI4YTc0NSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPlRvaWxldCBGaXhlZDwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE0MCIgcj0iMzAiIGZpbGw9IiMyOGE3NDUiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjMjhhNzQ1Ii8+PHJlY3QgeD0iMjMwIiB5PSIxNDAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iIzI4YTc0NSIgcng9IjUiLz48cGF0aCBkPSJNIDIwMCAxNjAgUSAyMjAgMTcwIDIwMCAxODAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSI0IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTSAyMDAgMTMwIEwgMTk1IDEyNSBMIDIwNSAxMjUgWiIgZmlsbD0iIzI4YTc0NSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPlRvaWxldCBGaXhlZDwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Toilet Fixed">
                    </div>
                    <h6>🎯 Objective: Apply the correct fix based on your diagnosis</h6>
                    
                    <h6>🔧 Common Fixes:</h6>
                    <div class="toilet-fixes mb-4">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="fix-method p-3 border rounded">
                                    <h6>🔴 Flapper Replacement</h6>
                                    <p class="small mb-2"><strong>When:</strong> Flapper is warped or cracked</p>
                                    <p class="small mb-0"><strong>How:</strong> Unhook old, hook new flapper</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="fix-method p-3 border rounded">
                                    <h6>🔗 Chain Adjustment</h6>
                                    <p class="small mb-2"><strong>When:</strong> Too tight or too loose</p>
                                    <p class="small mb-0"><strong>How:</strong> Adjust to have slight slack</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🔧 Repair Steps:</h6>
                    <div class="repair-steps mb-4">
                        <div class="step mb-3">
                            <span class="step-number">1</span>
                            <strong>Turn Off Water</strong> - Shut off valve behind toilet
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">2</span>
                            <strong>Drain Tank</strong> - Flush to empty water
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">3</span>
                            <strong>Make Repair</strong> - Replace flapper or adjust chain
                        </div>
                        <div class="step mb-3">
                            <span class="step-number">4</span>
                            <strong>Test Function</strong> - Turn water back on and test
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Virtual toilet repair simulator!</p>
                    </div>
                    
                    <div class="toilet-repair-sim mb-4" id="toiletRepairSim">
                        <div class="repair-workspace">
                            <h6>Virtual Toilet Repair</h6>
                            <div class="repair-tank" id="repairTank">
                                <div class="old-flapper" id="oldFlapper">Old Flapper</div>
                                <div class="repair-chain" id="repairChain">Chain</div>
                                <div class="water-level" id="waterLevel">Water Level</div>
                            </div>
                            
                            <div class="repair-tools mt-3">
                                <button class="btn btn-warning btn-sm" onclick="turnOffWater()">1. Turn Off Water</button>
                                <button class="btn btn-warning btn-sm" onclick="drainTank()">2. Drain Tank</button>
                                <button class="btn btn-warning btn-sm" onclick="replaceFlapper()">3. Replace Flapper</button>
                                <button class="btn btn-warning btn-sm" onclick="adjustChain()">4. Adjust Chain</button>
                                <button class="btn btn-warning btn-sm" onclick="testToilet()">5. Test</button>
                            </div>
                            
                            <div class="repair-feedback mt-2" id="repairFeedback"></div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">How much slack should the flapper chain have?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('toilet-quiz-2', 'wrong', 'No slack means the flapper won\\'t seal properly.')">A) No slack (tight)</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('toilet-quiz-2', 'correct', 'Correct! Slight slack allows proper sealing while enabling lifting.')">B) Slight slack</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('toilet-quiz-2', 'wrong', 'Too much slack prevents the flapper from lifting.')">C) Lots of slack</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('toilet-quiz-2', 'wrong', 'The chain needs some slack to function properly.')">D) No chain needed</button>
                        </div>
                        <div id="toilet-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                    
                    <div class="completion-criteria mt-4">
                        <h6>🎉 Course Completion Criteria:</h6>
                        <ul class="list-unstyled">
                            <li>✅ Complete virtual diagnosis</li>
                            <li>✅ Pass both checkpoint quizzes</li>
                            <li>✅ Successfully complete repair simulation</li>
                        </ul>
                        <div class="alert alert-success">
                            <strong>🎁 Earn $10 SPANK Bucks and unlock:</strong> "Build a Storage Shelf" and "Patch a Hole in Drywall"!
                        </div>
                    </div>
                `
            }
        ]
    },
    shelf: {
        title: "Build a Storage Shelf",
        level: "Intermediate",
        duration: "50-70 minutes",
        reward: "$10 SPANK Bucks",
        lessons: [
            {
                title: "Plan and Measure",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSIxMDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMjAiIGZpbGw9IiM4ZTQ0MWQiLz48cmVjdCB4PSI1MCIgeT0iMTQwIiB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjOGU0NDFkIi8+PHJlY3QgeD0iNTAiIHk9IjE4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMCIgZmlsbD0iIzhlNDQxZCIvPjxyZWN0IHg9IjQ1IiB5PSI5NSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjExMCIgZmlsbD0iIzhlNDQxZCIvPjxyZWN0IHg9IjM1NSIgeT0iOTUiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMTAiIGZpbGw9IiM4ZTQ0MWQiLz48bGluZSB4MT0iNTAiIHkxPSI3MCIgeDI9IjM1MCIgeTI9IjcwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iMyIvPjx0ZXh0IHg9IjIwMCIgeT0iNjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iI2RjMjYyNiI+MzAgaW5jaGVzPC90ZXh0Pjx0ZXh0IHg9IjIwMCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPlNpbXBsZSBTaGVsZiBEZXNpZ248L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSIxMDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMjAiIGZpbGw9IiM4ZTQ0MWQiLz48cmVjdCB4PSI1MCIgeT0iMTQwIiB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjOGU0NDFkIi8+PHJlY3QgeD0iNTAiIHk9IjE4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMCIgZmlsbD0iIzhlNDQxZCIvPjxyZWN0IHg9IjQ1IiB5PSI5NSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjExMCIgZmlsbD0iIzhlNDQxZCIvPjxyZWN0IHg9IjM1NSIgeT0iOTUiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMTAiIGZpbGw9IiM4ZTQ0MWQiLz48bGluZSB4MT0iNTAiIHkxPSI3MCIgeDI9IjM1MCIgeTI9IjcwIiBzdHJva2U9IiNkYzI2MjYiIHN0cm9rZS13aWR0aD0iMyIvPjx0ZXh0IHg9IjIwMCIgeT0iNjUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iI2RjMjYyNiI+MzAgaW5jaGVzPC90ZXh0Pjx0ZXh0IHg9IjIwMCIgeT0iMjUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPlNpbXBsZSBTaGVsZiBEZXNpZ248L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Simple Shelf Design">
                    </div>
                    <h6>🎯 Objective: Plan dimensions and create a cut list for your storage shelf</h6>
                    
                    <h6>📐 Planning Your Shelf:</h6>
                    <div class="shelf-planning mb-4">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="planning-step p-3 border rounded">
                                    <h6>📏 Measure Space</h6>
                                    <p class="small mb-0">Width, height, and depth available</p>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="planning-step p-3 border rounded">
                                    <h6>🎯 Determine Use</h6>
                                    <p class="small mb-0">Books, storage bins, or decorative items</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h6>🪵 Basic Materials:</h6>
                    <div class="materials-list mb-4">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="material-item p-3 border rounded text-center">
                                    <div class="material-icon mb-2">📏</div>
                                    <h6>Shelves</h6>
                                    <p class="small mb-0">1x8 or 1x10 pine boards</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="material-item p-3 border rounded text-center">
                                    <div class="material-icon mb-2">📐</div>
                                    <h6>Sides</h6>
                                    <p class="small mb-0">1x8 or 1x10 pine boards</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="material-item p-3 border rounded text-center">
                                    <div class="material-icon mb-2">🔩</div>
                                    <h6>Hardware</h6>
                                    <p class="small mb-0">Wood screws, L-brackets</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h6><i class="fas fa-mouse-pointer me-2"></i>Interactive Activity:</h6>
                        <p class="mb-0">Virtual shelf planner - design your shelf!</p>
                    </div>
                    
                    <div class="shelf-planner-sim mb-4" id="shelfPlannerSim">
                        <div class="planning-workspace">
                            <h6>Virtual Shelf Planner</h6>
                            <div class="shelf-designer" id="shelfDesigner">
                                <div class="dimension-controls">
                                    <label>Width: <input type="range" id="shelfWidth" min="20" max="48" value="30"> <span id="widthDisplay">30"</span></label>
                                    <label>Height: <input type="range" id="shelfHeight" min="12" max="60" value="36"> <span id="heightDisplay">36"</span></label>
                                    <label>Shelves: <input type="range" id="shelfCount" min="2" max="5" value="3"> <span id="countDisplay">3</span></label>
                                </div>
                                
                                <div class="shelf-preview" id="shelfPreview">
                                    <!-- Dynamic shelf preview will appear here -->
                                </div>
                            </div>
                            
                            <div class="cut-list mt-3" id="cutList">
                                <h6>Cut List:</h6>
                                <div id="cutListItems"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Checkpoint Quiz:</h6>
                        <p class="mb-2">What measurement is most important when planning a shelf?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('shelf-quiz-1', 'wrong', 'Height is important but width determines if it fits the space.')">A) Height only</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('shelf-quiz-1', 'correct', 'Correct! The space width determines shelf dimensions and material needs.')">B) Available space width</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('shelf-quiz-1', 'wrong', 'Wood thickness affects construction but space width is primary.')">C) Wood thickness</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('shelf-quiz-1', 'wrong', 'Screw length depends on wood thickness, not planning.')">D) Screw length</button>
                        </div>
                        <div id="shelf-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            }
        ]
    },
    faucet: {
        title: "Fix a Leaky Faucet",
        level: "Beginner",
        lessons: [
            {
                title: "Know Your Faucet",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSIxMDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZGVlMmU2IiByeD0iMTAiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjIwIiBmaWxsPSIjMDA3YmZmIi8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RmF1Y2V0IFR5cGVzICYgUGFydHM8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSIxMDAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZGVlMmU2IiByeD0iMTAiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjIwIiBmaWxsPSIjMDA3YmZmIi8+PHRleHQgeD0iMjAwIiB5PSIyNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RmF1Y2V0IFR5cGVzICYgUGFydHM8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Faucet Types and Parts">
                    </div>
                    <h6>🎯 Goal: Identify faucet type and leak source</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Determine faucet type:</strong> compression, cartridge, ball, or ceramic disk</li>
                        <li><strong>Check where the leak comes from:</strong> spout, base, or handle</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Cartridge faucets are most common and easy to fix.
                    </div>
                `
            },
            {
                title: "Disassemble & Inspect",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjE1MCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RGlzYXNzZW1ibHkgJiBJbnNwZWN0aW9uPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI4MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxNDAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjE1MCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxNTAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzM0M2E0MCI+RGlzYXNzZW1ibHkgJiBJbnNwZWN0aW9uPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Faucet Disassembly">
                    </div>
                    <h6>🎯 Goal: Open up the faucet safely and locate the worn-out part</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Shut off water supply</strong></li>
                        <li><strong>Plug drain with rag or stopper</strong></li>
                        <li><strong>Remove handle and cartridge or washer</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Take the part to the hardware store to match replacement.
                    </div>
                `
            },
            {
                title: "Replace & Reassemble",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI5MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxMjAiIGZpbGw9IiMyOGE3NDUiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjUiIGZpbGw9IiNmZmZmZmYiLz48dGV4dCB4PSIyMDAiIHk9IjI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmaWxsPSIjMzQzYTQwIj5GaXhlZCBGYXVjZXQ8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI5MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIxMjAiIGZpbGw9IiMyOGE3NDUiIHJ4PSIxMCIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjUiIGZpbGw9IiNmZmZmZmYiLz48dGV4dCB4PSIyMDAiIHk9IjI1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2IiBmaWxsPSIjMzQzYTQwIj5GaXhlZCBGYXVjZXQ8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Reassembled Faucet">
                    </div>
                    <h6>🎯 Goal: Install the new component and confirm it's leak-free</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Insert new cartridge or washer</strong></li>
                        <li><strong>Tighten gently and reassemble</strong></li>
                        <li><strong>Turn water back on and test</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> A small dab of plumber's grease helps with longevity.
                    </div>
                `
            }
        ]
    },
    toilet: {
        title: "Toilet Running Water Fix",
        level: "Intermediate",
        lessons: [
            {
                title: "How a Toilet Works",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjEyMCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+VG9pbGV0IFRhbmsgUGFydHM8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjEyMCIgcj0iMTUiIGZpbGw9IiNmZjZiMzUiLz48Y2lyY2xlIGN4PSIyNTAiIGN5PSIxMjAiIHI9IjE1IiBmaWxsPSIjZjc5MzFlIi8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+VG9pbGV0IFRhbmsgUGFydHM8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Toilet Tank Parts">
                    </div>
                    <h6>🎯 Goal: Understand how the tank, flapper, and fill valve work together</h6>
                    <h6>🛠️ Key Components:</h6>
                    <ul>
                        <li><strong>Tank</strong> - Holds water for flushing</li>
                        <li><strong>Flapper</strong> - Rubber seal at tank bottom (orange circle)</li>
                        <li><strong>Fill Valve</strong> - Controls water entering tank (yellow circle)</li>
                        <li><strong>Float</strong> - Signals when tank is full</li>
                        <li><strong>Chain</strong> - Connects handle to flapper</li>
                    </ul>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> A worn flapper or misaligned float is often the culprit.
                    </div>
                `
            },
            {
                title: "Diagnose the Running Water",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjZGM0MDQ1IiByeD0iNSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjAiIGZpbGw9IiNmZjAwMDAiLz48dGV4dCB4PSIyMDAiIHk9IjI3MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EaWFnbm9zaXMgVGVzdDwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjZGM0MDQ1IiByeD0iNSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iMjAiIGZpbGw9IiNmZjAwMDAiLz48dGV4dCB4PSIyMDAiIHk9IjI3MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EaWFnbm9zaXMgVGVzdDwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Food Coloring Test">
                    </div>
                    <h6>🎯 Goal: Find out if it's the flapper, fill valve, or overflow</h6>
                    <h6>🛠️ Food Coloring Test:</h6>
                    <ol>
                        <li><strong>Drop food coloring in the tank</strong> (red circle shows coloring)</li>
                        <li><strong>Wait 5-10 minutes without flushing</strong></li>
                        <li><strong>Check the bowl</strong> - If colored water appears → flapper is leaking</li>
                    </ol>
                    <div class="alert alert-info">
                        <strong>🔊 Listen for Sounds:</strong> Constant hiss = fill valve problem, intermittent = flapper
                    </div>
                `
            },
            {
                title: "Replace Parts",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxyZWN0IHg9IjUwIiB5PSIzMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzI4YTc0NSIgcng9IjgiLz48cGF0aCBkPSJNIDI1MCAzMCBMIDM1MCA5MCBMIDI1MCA5MCBaIiBmaWxsPSIjZmY2YjM1Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+SW5zdGFsbCBOZXcgUGFydHM8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTgwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjMDA3YmZmIiByeD0iNSIvPjxyZWN0IHg9IjUwIiB5PSIzMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI2MCIgZmlsbD0iIzI4YTc0NSIgcng9IjgiLz48cGF0aCBkPSJNIDI1MCAzMCBMIDM1MCA5MCBMIDI1MCA5MCBaIiBmaWxsPSIjZmY2YjM1Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+SW5zdGFsbCBOZXcgUGFydHM8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Installing New Parts">
                    </div>
                    <h6>🎯 Goal: Perform a quick hardware swap</h6>
                    <h6>🛠️ Installation Steps:</h6>
                    <ol>
                        <li><strong>Turn off water at shutoff valve</strong> (green rectangle shows valve)</li>
                        <li><strong>Flush to drain tank</strong></li>
                        <li><strong>Replace flapper</strong> (hooks and chain) OR <strong>fill valve</strong> (orange triangle shows new part)</li>
                        <li><strong>Turn water back on and test</strong></li>
                    </ol>
                    <div class="alert alert-warning">
                        <strong>⚠️ Important:</strong> Don't overtighten plastic components - they can crack.
                    </div>
                `
            },
            {
                title: "Fine-Tune Water Level",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTYwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMjBjOTk3IiByeD0iNSIvPjxsaW5lIHgxPSIxMDAiIHkxPSIxNDAiIHgyPSIzMDAiIHkyPSIxNDAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48Y2lyY2xlIGN4PSIyODAiIGN5PSIxMjAiIHI9IjEyIiBmaWxsPSIjZmZjMTA3Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+UGVyZmVjdCBXYXRlciBMZXZlbDwvdGV4dD48L3N2Zz4=",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjgwIiB5PSI2MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNkZWUyZTYiIHJ4PSIxNSIvPjxyZWN0IHg9IjEwMCIgeT0iMTYwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjMjBjOTk3IiByeD0iNSIvPjxsaW5lIHgxPSIxMDAiIHkxPSIxNDAiIHgyPSIzMDAiIHkyPSIxNDAiIHN0cm9rZT0iIzI4YTc0NSIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz48Y2lyY2xlIGN4PSIyODAiIGN5PSIxMjAiIHI9IjEyIiBmaWxsPSIjZmZjMTA3Ii8+PHRleHQgeD0iMjAwIiB5PSIyNzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+UGVyZmVjdCBXYXRlciBMZXZlbDwvdGV4dD48L3N2Zz4=" class="img-fluid rounded" alt="Proper Water Level">
                    </div>
                    <h6>🎯 Goal: Prevent wasteful overfilling</h6>
                    <h6>🛠️ Adjustment Steps:</h6>
                    <ol>
                        <li><strong>Check current water level</strong> - Should be 1" below overflow (dashed line)</li>
                        <li><strong>Adjust float arm or screw</strong> - Move yellow float up/down</li>
                        <li><strong>Test multiple flushes</strong> - Ensure consistent operation</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Perfect Result:</strong> Water should fill to the green level and stop automatically.
                    </div>
                `
            }
        ]
    },
    drain: {
        title: "Unclog a Drain Safely",
        level: "Beginner",
        lessons: [
            {
                title: "Know the Signs & Tools",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iODAiIGZpbGw9IiNkZWUyZTYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSI0Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjUwIiB5PSIyNTAiIHdpZHRoPSI2MCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48cmVjdCB4PSIxNDAiIHk9IjI1MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjxyZWN0IHg9IjI1MCIgeT0iMjUwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZmZjMTA3IiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjkwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPkRyYWluIFRvb2xzPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iODAiIGZpbGw9IiNkZWUyZTYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSI0Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjUwIiB5PSIyNTAiIHdpZHRoPSI2MCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48cmVjdCB4PSIxNDAiIHk9IjI1MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjMjhhNzQ1IiByeD0iNSIvPjxyZWN0IHg9IjI1MCIgeT0iMjUwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjIwIiBmaWxsPSIjZmZjMTA3IiByeD0iNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjkwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiMzNDNhNDAiPkRyYWluIFRvb2xzPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Drain Tools">
                    </div>
                    <h6>🎯 Goal: Recognize a clogged drain and gather tools</h6>
                    <h6>🛠️ Warning Signs:</h6>
                    <ul>
                        <li><strong>Slow drainage, bubbling, or bad smells</strong></li>
                        <li><strong>Water backing up in sink or tub</strong></li>
                    </ul>
                    <h6>🧰 Safe Tools You'll Need:</h6>
                    <ul>
                        <li>Plunger (orange tool)</li>
                        <li>Drain snake (green tool)</li>
                        <li>Baking soda & vinegar (yellow tool)</li>
                        <li>Bucket for cleanup</li>
                    </ul>
                    <div class="alert alert-warning">
                        <strong>⚠️ Avoid:</strong> Chemical drain cleaners damage pipes over time.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">Which is the safest method for unclogging a bathroom sink?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-1', 'wrong', 'Bleach is dangerous and can damage pipes.')">A) Bleach</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-1', 'correct', 'Correct! A drain snake physically removes blockages safely.')">B) Snake</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-1', 'wrong', 'Boiling saltwater can crack pipes and fixtures.')">C) Boiling saltwater</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-1', 'wrong', 'Motor oil would create a much worse problem!')">D) Motor oil</button>
                        </div>
                        <div id="drain-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Plunge It First",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjE4MCIgeT0iNTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI2MCIgcj0iMjAiIGZpbGw9IiNmZjZiMzUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5QbHVuZ2luZyBUZWNobmlxdWU8L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxyZWN0IHg9IjE4MCIgeT0iNTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI4MCIgZmlsbD0iI2ZmNmIzNSIgcng9IjUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI2MCIgcj0iMjAiIGZpbGw9IiNmZjZiMzUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5QbHVuZ2luZyBUZWNobmlxdWU8L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Plunging Technique">
                    </div>
                    <h6>🎯 Goal: Try the most basic fix first</h6>
                    <h6>🛠️ Plunging Steps:</h6>
                    <ol>
                        <li><strong>Fill the sink slightly with water</strong> (blue circle shows water level)</li>
                        <li><strong>Cover overflow holes with a damp cloth</strong></li>
                        <li><strong>Use a cup plunger</strong> (orange tool) to push straight down in bursts</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Keep the seal tight and use strong, rhythmic motions.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">What should you do before plunging a bathroom sink?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-2', 'wrong', 'Chemical cleaners should never be used with plunging.')">A) Use drain cleaner</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-2', 'correct', 'Correct! Covering overflow holes creates better suction.')">B) Cover overflow holes</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-2', 'wrong', 'Lubricant would make the problem worse.')">C) Spray lubricant</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-2', 'wrong', 'Hot water alone won\\'t create the pressure needed.')">D) Flush with hot water</button>
                        </div>
                        <div id="drain-quiz-2" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Snake It Out",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxwYXRoIGQ9Ik0gMjAwIDEzMCBRIDIyMCAxNTAgMjAwIDE3MCBRIDE4MCAyMDAgMjAwIDIyMCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjYiIGZpbGw9Im5vbmUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIyMjAiIHI9IjgiIGZpbGw9IiNkYzQwNDUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EcmFpbiBTbmFrZSBpbiBBY3Rpb248L3RleHQ+PC9zdmc+",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxwYXRoIGQ9Ik0gMjAwIDEzMCBRIDIyMCAxNTAgMjAwIDE3MCBRIDE4MCAyMDAgMjAwIDIyMCIgc3Ryb2tlPSIjMjhhNzQ1IiBzdHJva2Utd2lkdGg9IjYiIGZpbGw9Im5vbmUiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIyMjAiIHI9IjgiIGZpbGw9IiNkYzQwNDUiLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5EcmFpbiBTbmFrZSBpbiBBY3Rpb248L3RleHQ+PC9zdmc+" class="img-fluid rounded" alt="Drain Snake">
                    </div>
                    <h6>🎯 Goal: Physically remove the clog</h6>
                    <h6>🛠️ Snake Steps:</h6>
                    <ol>
                        <li><strong>Slowly insert the snake down the drain</strong> (green wavy line)</li>
                        <li><strong>Rotate to snag hair or debris</strong> (red dot shows clog)</li>
                        <li><strong>Gently pull out and clean off</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Use a plastic zip snake for hair — they're cheap and effective.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">What's the main goal of a drain snake?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-3', 'wrong', 'Snakes don\\'t melt anything - that\\'s chemicals.')">A) Melt gunk</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-3', 'wrong', 'Never push clogs deeper - that makes it worse!')">B) Push clogs deeper</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-3', 'correct', 'Correct! Snakes grab and pull out hair, soap, and debris.')">C) Pull out blockages</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-3', 'wrong', 'Pressure is what plungers do, not snakes.')">D) Create pressure</button>
                        </div>
                        <div id="drain-quiz-3" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Natural Drain Bomb",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxjaXJjbGUgY3g9IjE2MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjE4MCIgY3k9IjgwIiByPSI4IiBmaWxsPSIjMjBjOTk3Ii8+PGNpcmNsZSBjeD0iMjIwIiBjeT0iODAiIHI9IjgiIGZpbGw9IiMyMGM5OTciLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI3MCIgcj0iMTAiIGZpbGw9IiMyMGM5OTciLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5OYXR1cmFsIEZpenppbmcgQWN0aW9uPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjEwMCIgeT0iMTIwIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RlZTJlNiIgcng9IjE1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTcwIiByPSI0MCIgZmlsbD0iIzAwN2JmZiIvPjxjaXJjbGUgY3g9IjE2MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9Ijk0IiByPSIxNSIgZmlsbD0iI2ZmYzEwNyIvPjxjaXJjbGUgY3g9IjE4MCIgY3k9IjgwIiByPSI4IiBmaWxsPSIjMjBjOTk3Ii8+PGNpcmNsZSBjeD0iMjIwIiBjeT0iODAiIHI9IjgiIGZpbGw9IiMyMGM5OTciLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSI3MCIgcj0iMTAiIGZpbGw9IiMyMGM5OTciLz48dGV4dCB4PSIyMDAiIHk9IjI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzQzYTQwIj5OYXR1cmFsIEZpenppbmcgQWN0aW9uPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Baking Soda and Vinegar">
                    </div>
                    <h6>🎯 Goal: Use a safe bubbling solution</h6>
                    <h6>🛠️ Natural Bomb Steps:</h6>
                    <ol>
                        <li><strong>Pour ½ cup of baking soda into the drain</strong> (yellow circles)</li>
                        <li><strong>Add 1 cup of vinegar</strong> — watch it fizz! (green bubbles)</li>
                        <li><strong>Cover for 10 minutes, then flush with hot water</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Monthly use keeps drains fresh and clear.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">What does vinegar do when combined with baking soda?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-4', 'correct', 'Correct! The reaction creates fizzing foam that helps break down gunk.')">A) Makes cleaning foam</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-4', 'wrong', 'Vinegar and baking soda don\\'t damage metal pipes.')">B) Eats metal</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drain-quiz-4', 'wrong', 'This combination doesn\\'t release bleach.')">C) Releases bleach</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drain-quiz-4', 'wrong', 'Water pressure comes from plumbing, not chemical reactions.')">D) Neutralizes pressure</button>
                        </div>
                        <div id="drain-quiz-4" class="mt-2" style="display: none;"></div>
                    </div>
                `
            }
        ]
    },
    drywall: {
        title: "Patch Drywall",
        level: "Beginner",
        lessons: [
            {
                title: "Assess the Damage",
                image: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMTIwIiByPSI1IiBmaWxsPSIjZGM0MDQ1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSIxNSIgZmlsbD0iI2ZmNmIzNSIvPjxyZWN0IHg9IjI2MCIgeT0iMTAwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiMyOGE3NDUiIHJ4PSI1Ii8+PHRleHQgeD0iMjAwIiB5PSIyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+RGFtYWdlIFNpemVzPC90ZXh0Pjwvc3ZnPg==",
                content: `
                    <div class="lesson-visual mb-4">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y4ZjlmYSIvPjxyZWN0IHg9IjUwIiB5PSI1MCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzM0M2E0MCIgc3Ryb2tlLXdpZHRoPSIyIi8+PGNpcmNsZSBjeD0iMTIwIiBjeT0iMTIwIiByPSI1IiBmaWxsPSIjZGM0MDQ1Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMTUwIiByPSIxNSIgZmlsbD0iI2ZmNmIzNSIvPjxyZWN0IHg9IjI2MCIgeT0iMTAwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiMyOGE3NDUiIHJ4PSI1Ii8+PHRleHQgeD0iMjAwIiB5PSIyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzM0M2E0MCI+RGFtYWdlIFNpemVzPC90ZXh0Pjwvc3ZnPg==" class="img-fluid rounded" alt="Different Damage Sizes">
                    </div>
                    <h6>🎯 Goal: Know what type of repair you need</h6>
                    <h6>🛠️ Damage Types:</h6>
                    <ul>
                        <li><strong>Small:</strong> Nail/screw holes (red dot) - pencil eraser-sized</li>
                        <li><strong>Medium:</strong> Anchor holes (orange circle) - quarter-sized</li>
                        <li><strong>Large:</strong> Cut out sections (green square) - fist-sized damage</li>
                    </ul>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Pencil eraser-sized holes can be patched in minutes.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">Which damage type needs a wallboard patch and mesh tape?</p>
                        <div class="quiz-options">
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drywall-quiz-1', 'wrong', 'Nail holes just need spackle.')">A) Nail hole</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drywall-quiz-1', 'wrong', 'Paint bubbles need scraping, not patches.')">B) Paint bubble</button>
                            <button class="btn btn-warning btn-sm me-2" onclick="showQuizAnswer('drywall-quiz-1', 'correct', 'Correct! Large holes need proper backing and mesh tape for strength.')">C) Large hole</button>
                            <button class="btn btn-warning btn-sm" onclick="showQuizAnswer('drywall-quiz-1', 'wrong', 'Screw pops just need re-screwing and touch-up.')">D) Screw pop</button>
                        </div>
                        <div id="drywall-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            }
        ]
    }
};

// JavaScript functionality
let currentCourse = null;
let currentLesson = 0;

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    console.log('SPANK School loaded successfully');
});

// Smooth scroll to courses
function scrollToCourses() {
    document.getElementById('courses').scrollIntoView({ behavior: 'smooth' });
}

// Start a course
function startCourse(courseId) {
    currentCourse = courses[courseId];
    if (!currentCourse) {
        alert('Course content coming soon! SPANK is developing comprehensive guides for all repairs.');
        return;
    }
    
    currentLesson = 0;
    showLesson();
}

// Show current lesson with visual guide
function showLesson() {
    if (!currentCourse || currentLesson >= currentCourse.lessons.length) return;
    
    const lesson = currentCourse.lessons[currentLesson];
    const modal = new bootstrap.Modal(document.getElementById('courseModal'));
    
    document.getElementById('courseModalTitle').innerHTML = `
        ${currentCourse.title} - Step ${currentLesson + 1} of ${currentCourse.lessons.length}
        <small class="text-muted d-block">${lesson.title}</small>
    `;
    
    // Create lesson content with navigation
    const lessonContent = `
        <div class="lesson-container">
            <div class="lesson-progress mb-3">
                <div class="progress" style="height: 8px;">
                    <div class="progress-bar bg-warning" style="width: ${((currentLesson + 1) / currentCourse.lessons.length) * 100}%"></div>
                </div>
                <small class="text-muted">Step ${currentLesson + 1} of ${currentCourse.lessons.length}</small>
            </div>
            
            <div class="lesson-content">
                ${lesson.content}
            </div>
            
            <div class="lesson-navigation mt-4 d-flex justify-content-between">
                <button class="btn btn-outline-secondary" onclick="previousLesson()" ${currentLesson === 0 ? 'disabled' : ''}>
                    <i class="fas fa-arrow-left me-2"></i>Previous
                </button>
                
                <div class="lesson-indicators">
                    ${currentCourse.lessons.map((_, index) => 
                        `<span class="badge ${index === currentLesson ? 'bg-warning' : 'bg-light'} me-1">${index + 1}</span>`
                    ).join('')}
                </div>
                
                <button class="btn btn-primary" onclick="${currentLesson < currentCourse.lessons.length - 1 ? 'nextLesson()' : 'completeCourse()'}">
                    ${currentLesson < currentCourse.lessons.length - 1 ? 'Next <i class="fas fa-arrow-right ms-2"></i>' : 'Complete <i class="fas fa-check ms-2"></i>'}
                </button>
            </div>
        </div>
    `;
    
    document.getElementById('courseModalBody').innerHTML = lessonContent;
    
    // Update modal footer
    const nextBtn = document.getElementById('nextLessonBtn');
    nextBtn.style.display = 'none'; // Hide default button since we have custom navigation
    
    // Initialize interactive elements for toolbelt course
    modal.show();
    
    // Add slight delay to ensure DOM elements are rendered
    setTimeout(() => {
        if (currentCourse === courses.toolbelt) {
            if (currentLesson === 0) {
                initToolMatchingGame();
            } else if (currentLesson === 1) {
                initToolbeltSimulator();
            } else if (currentLesson === 2) {
                initToolboxOrganizer();
            }
        } else if (currentCourse === courses.picture) {
            if (currentLesson === 0) {
                initWallAnchorSimulator();
            } else if (currentLesson === 1) {
                initPictureLevelingSimulator();
            }
        } else if (currentCourse === courses.door) {
            if (currentLesson === 0) {
                initSqueakSimulator();
            } else if (currentLesson === 1) {
                initHingeRepairSimulator();
            }
        } else if (currentCourse === courses.smartlock) {
            if (currentLesson === 0) {
                initLockCompatibilityQuiz();
            }
        } else if (currentCourse === courses.smartSwitches) {
            if (currentLesson === 1) {
                initVoltageTestSimulator();
            } else if (currentLesson === 2) {
                initWireMatchingSimulator();
            } else if (currentLesson === 3) {
                initInstallationSimulator();
            }
        } else if (currentCourse === courses.caulk) {
            if (currentLesson === 0) {
                initCaulkRemovalSimulator();
            } else if (currentLesson === 1) {
                initCaulkApplicationSimulator();
            }
        } else if (currentCourse === courses.light) {
            if (currentLesson === 0) {
                initCircuitTesterSimulator();
            } else if (currentLesson === 1) {
                initWireMatchingSimulator();
            }
        }
    }, 200);
}

// Previous lesson function
function previousLesson() {
    if (currentLesson > 0) {
        currentLesson--;
        showLesson();
    }
}

// Next lesson
function nextLesson() {
    currentLesson++;
    showLesson();
}

// Enhanced course completion with SMS rewards
function completeCourse(courseType = null) {
    if (document.getElementById('courseModal')) {
        bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
    }
    
    setTimeout(() => {
        // Enhanced completion popup
        const completionModal = document.createElement('div');
        completionModal.className = 'modal fade';
        completionModal.innerHTML = `
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content border-0 shadow-lg">
                    <div class="modal-body text-center p-5">
                        <div class="celebration-animation mb-4">
                            <i class="fas fa-trophy fa-4x text-warning mb-3" style="animation: bounce 1s ease infinite;"></i>
                            <h3 class="text-success mb-3">Congratulations!</h3>
                            <p class="lead">You've completed the ${courseType ? courseType.charAt(0).toUpperCase() + courseType.slice(1) : currentCourse?.title || 'DIY'} course!</p>
                        </div>
                        
                        <div class="reward-section p-4 bg-light rounded mb-4">
                            <h5 class="text-primary mb-3">
                                <i class="fas fa-coins me-2"></i>Claim Your $5 SPANK Bucks
                            </h5>
                            <form id="rewardForm">
                                <div class="mb-3">
                                    <label for="studentName" class="form-label">Your Name</label>
                                    <input type="text" class="form-control" id="studentName" required>
                                </div>
                                <div class="mb-3">
                                    <label for="studentPhone" class="form-label">Phone Number (for SMS reward)</label>
                                    <input type="tel" class="form-control" id="studentPhone" placeholder="(808) 555-0123" required>
                                </div>
                                <div class="mb-3">
                                    <label for="studentEmail" class="form-label">Email (optional)</label>
                                    <input type="email" class="form-control" id="studentEmail">
                                </div>
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Your $5 SPANK Bucks will be sent via SMS, and our team will follow up to help with your project!
                                </div>
                            </form>
                        </div>
                        
                        <div class="d-flex gap-2 justify-content-center">
                            <button type="button" class="btn btn-outline-secondary" onclick="closeCompletionModal()">
                                Maybe Later
                            </button>
                            <button type="button" class="btn btn-success btn-lg" onclick="submitCourseCompletion('${courseType}')">
                                <i class="fas fa-gift me-2"></i>Claim Reward
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.body.appendChild(completionModal);
        const modal = new bootstrap.Modal(completionModal);
        modal.show();
        
        // Add confetti effect
        createCelebrationEffect();
        
        // Cleanup
        completionModal.addEventListener('hidden.bs.modal', () => {
            document.body.removeChild(completionModal);
        });
        
        // Store modal reference for cleanup
        window.currentCompletionModal = completionModal;
    }, 500);
}

function submitCourseCompletion(courseType) {
    const name = document.getElementById('studentName').value;
    const phone = document.getElementById('studentPhone').value;
    const email = document.getElementById('studentEmail').value;
    
    if (!name || !phone) {
        alert('Please enter your name and phone number to receive your SPANK Buck reward.');
        return;
    }
    
    const courseName = courseType ? `${courseType.charAt(0).toUpperCase() + courseType.slice(1)} Repair` : currentCourse?.title || 'DIY Course';
    
    // Show loading state
    const submitBtn = event.target;
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending Reward...';
    submitBtn.disabled = true;
    
    // Send SPANK Buck reward via API
    fetch('/api/complete-course', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            student_name: name,
            phone: phone,
            email: email,
            course_name: courseName
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Success message
            document.querySelector('.modal-body').innerHTML = `
                <div class="text-center p-4">
                    <i class="fas fa-check-circle fa-4x text-success mb-3" style="animation: bounce 1s ease;"></i>
                    <h3 class="text-success mb-3">Reward Sent!</h3>
                    <p class="lead mb-4">$5 SPANK Bucks have been sent to ${phone}</p>
                    <div class="alert alert-success">
                        <i class="fas fa-phone me-2"></i>
                        Our SPANK team will reach out soon to help with your project!
                    </div>
                    <button class="btn btn-primary" onclick="closeCompletionModal()">
                        <i class="fas fa-thumbs-up me-2"></i>Awesome!
                    </button>
                </div>
            `;
        } else {
            throw new Error(data.error || 'Failed to send reward');
        }
    })
    .catch(error => {
        console.error('Error sending SPANK Buck reward:', error);
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
        alert('Course completed! However, there was an issue sending your SPANK Bucks. Please contact us at (808) 778-9132 and mention you completed the course.');
    });
}

function closeCompletionModal() {
    if (window.currentCompletionModal) {
        bootstrap.Modal.getInstance(window.currentCompletionModal).hide();
    }
}

function createCelebrationEffect() {
    const colors = ['#ffc107', '#28a745', '#007bff', '#dc3545', '#6f42c1', '#fd7e14'];
    
    for (let i = 0; i < 30; i++) {
        const confetti = document.createElement('div');
        confetti.style.cssText = `
            position: fixed;
            width: 8px;
            height: 8px;
            background: ${colors[Math.floor(Math.random() * colors.length)]};
            top: -10px;
            left: ${Math.random() * 100}vw;
            border-radius: 50%;
            animation: confettiFall ${2 + Math.random() * 2}s ease-out forwards;
            pointer-events: none;
            z-index: 9999;
        `;
        document.body.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 4000);
    }
}

// Send SPANK Bucks reward
function sendSpankBucks(email, amount, reason) {
    // In a real implementation, this would integrate with email service
    console.log(`Sending $${amount} SPANK Bucks to ${email} for: ${reason}`);
    return true;
}

// Enhanced interactive functions
function showAnswer(quizId, answer) {
    const element = document.getElementById(quizId);
    if (element) {
        element.innerHTML = `<div class="alert alert-light mt-2"><strong>Answer:</strong> ${answer}</div>`;
        element.style.display = 'block';
    }
}

function showEnhancedAnswer(quizId, answer) {
    const element = document.getElementById(quizId);
    if (element) {
        element.innerHTML = `
            <div class="alert alert-light border-0 shadow-sm mt-3">
                <div class="d-flex align-items-start">
                    <i class="fas fa-check-circle text-success fa-lg me-3 mt-1"></i>
                    <div>
                        <h6 class="mb-1 text-success">Great Question!</h6>
                        <p class="mb-0">${answer}</p>
                    </div>
                </div>
            </div>
        `;
        element.style.display = 'block';
        element.style.animation = 'slideInUp 0.5s ease forwards';
        
        // Add confetti effect
        createConfetti(element);
    }
}

function createConfetti(container) {
    for (let i = 0; i < 10; i++) {
        const confetti = document.createElement('div');
        confetti.style.cssText = `
            position: absolute;
            width: 6px;
            height: 6px;
            background: ${['#ffc107', '#28a745', '#007bff', '#dc3545'][Math.floor(Math.random() * 4)]};
            top: 0;
            left: ${Math.random() * 100}%;
            border-radius: 50%;
            animation: confettiFall 2s ease-out forwards;
            pointer-events: none;
        `;
        container.style.position = 'relative';
        container.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 2000);
    }
}

function watchVideo(videoId) {
    const modal = new bootstrap.Modal(document.getElementById('courseModal'));
    document.getElementById('courseModalTitle').textContent = 'SPANK Video Tutorial';
    document.getElementById('courseModalBody').innerHTML = `
        <div class="text-center">
            <div class="alert alert-info">
                <h6><i class="fas fa-video me-2"></i>Professional Video Tutorial</h6>
                <p class="mb-2">Learn with SPANK's expert demonstration</p>
                <p><strong>Coming Soon:</strong> Full video library with step-by-step repairs</p>
            </div>
            <div class="mb-3">
                <p>This video covers professional techniques and safety tips.</p>
            </div>
            <button class="btn btn-primary" onclick="window.open('tel:(808)778-9132')">
                Call SPANK for Professional Service
            </button>
        </div>
    `;
    document.getElementById('nextLessonBtn').textContent = 'Close';
    document.getElementById('nextLessonBtn').onclick = () => {
        bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
    };
    modal.show();
}

function startTroubleshooter() {
    alert('Interactive Problem Solver coming soon! This will guide you through diagnosing common home issues step-by-step.');
}

function startQuiz() {
    const email = prompt('Take our DIY Knowledge Quiz!\n\nEnter your email to receive $5 SPANK Bucks upon completion:');
    if (email && email.includes('@')) {
        alert(`Great! Complete the quiz and your $5 SPANK Bucks will be emailed to ${email} within 24 hours.`);
        // Quiz implementation would go here
        console.log(`Send $5 SPANK Bucks to: ${email} for completing quiz`);
    }
}

function joinLiveSession() {
    alert('Live Q&A sessions coming soon! Join weekly sessions with SPANK experts to get your questions answered.');
}

// Enhanced quiz functionality for interactive courses
function showQuizAnswer(quizId, result, explanation) {
    const element = document.getElementById(quizId);
    if (element) {
        const alertClass = result === 'correct' ? 'alert-success' : 'alert-danger';
        const icon = result === 'correct' ? '✓' : '✗';
        element.innerHTML = `<div class="alert ${alertClass} mt-2"><strong>${icon} ${explanation}</strong></div>`;
        element.style.display = 'block';
        
        // Award points for correct answers
        if (result === 'correct') {
            updatePoints(2);
        }
    }
}

// Knowledge Quiz System
const knowledgeQuiz = {
    questions: [
        {
            question: "What's the first thing you should do before replacing a light switch?",
            options: ["Remove the wall plate", "Test the new switch", "Turn off the power", "Grab a hammer"],
            correct: 2,
            explanation: "Always shut off power at the breaker before touching electrical components."
        },
        {
            question: "What tool helps you detect a stud behind drywall?",
            options: ["Tape measure", "Stud finder", "Level", "Flashlight"],
            correct: 1,
            explanation: "Stud finders use sensors to locate wooden framing behind walls."
        },
        {
            question: "What's a good replacement for caulk that has cracked along the tub?",
            options: ["Duct tape", "Fresh caulk", "Paint", "Silicone spray"],
            correct: 1,
            explanation: "Recaulking is the proper way to reseal a tub or sink joint."
        },
        {
            question: "What color is typically used for the 'hot' electrical wire?",
            options: ["Green", "White", "Black or red", "Blue"],
            correct: 2,
            explanation: "Black or red wires carry current in most home circuits."
        },
        {
            question: "What's the purpose of primer before painting a patched wall?",
            options: ["Makes the paint dry faster", "Hides the patch and improves paint adhesion", "Adds shine", "Makes it washable"],
            correct: 1,
            explanation: "Primer seals spackle and ensures even color coverage."
        }
    ],
    currentQuestion: 0,
    score: 0,
    answers: []
};

function startKnowledgeQuiz() {
    knowledgeQuiz.currentQuestion = 0;
    knowledgeQuiz.score = 0;
    knowledgeQuiz.answers = [];
    
    const modal = new bootstrap.Modal(document.getElementById('knowledgeQuizModal'));
    showQuizQuestion();
    modal.show();
}

function showQuizQuestion() {
    const quiz = knowledgeQuiz;
    const question = quiz.questions[quiz.currentQuestion];
    
    const content = `
        <div class="quiz-header mb-4">
            <div class="progress mb-3">
                <div class="progress-bar bg-warning" style="width: ${((quiz.currentQuestion + 1) / quiz.questions.length) * 100}%"></div>
            </div>
            <h6 class="text-muted">Question ${quiz.currentQuestion + 1} of ${quiz.questions.length}</h6>
        </div>
        
        <div class="quiz-question mb-4">
            <h5 class="mb-4">${question.question}</h5>
            <div class="quiz-options">
                ${question.options.map((option, index) => `
                    <button class="btn btn-outline-primary w-100 mb-2 quiz-option" 
                            onclick="selectQuizAnswer(${index})" 
                            data-option="${index}">
                        ${String.fromCharCode(65 + index)}) ${option}
                    </button>
                `).join('')}
            </div>
        </div>
        
        <div id="quiz-feedback" class="mb-3" style="display: none;"></div>
    `;
    
    document.getElementById('quizContent').innerHTML = content;
    document.getElementById('quizActionBtn').textContent = 'Next Question';
    document.getElementById('quizActionBtn').onclick = nextQuizQuestion;
}

function selectQuizAnswer(selectedIndex) {
    const quiz = knowledgeQuiz;
    const question = quiz.questions[quiz.currentQuestion];
    const isCorrect = selectedIndex === question.correct;
    
    // Store answer
    quiz.answers.push(selectedIndex);
    if (isCorrect) quiz.score++;
    
    // Show feedback
    const feedback = document.getElementById('quiz-feedback');
    const icon = isCorrect ? '✓' : '✗';
    const alertClass = isCorrect ? 'alert-success' : 'alert-danger';
    
    feedback.innerHTML = `
        <div class="alert ${alertClass}">
            <strong>${icon} ${isCorrect ? 'Correct!' : 'Incorrect'}</strong>
            <p class="mb-0 mt-2">${question.explanation}</p>
        </div>
    `;
    feedback.style.display = 'block';
    
    // Disable all option buttons
    document.querySelectorAll('.quiz-option').forEach(btn => {
        btn.disabled = true;
        if (parseInt(btn.dataset.option) === question.correct) {
            btn.classList.add('btn-success');
            btn.classList.remove('btn-outline-primary');
        } else if (parseInt(btn.dataset.option) === selectedIndex && !isCorrect) {
            btn.classList.add('btn-danger');
            btn.classList.remove('btn-outline-primary');
        }
    });
}

function nextQuizQuestion() {
    const quiz = knowledgeQuiz;
    
    if (quiz.currentQuestion < quiz.questions.length - 1) {
        quiz.currentQuestion++;
        showQuizQuestion();
    } else {
        showQuizResults();
    }
}

function showQuizResults() {
    const quiz = knowledgeQuiz;
    const passed = quiz.score >= 4;
    const percentage = Math.round((quiz.score / quiz.questions.length) * 100);
    
    const content = `
        <div class="text-center">
            <div class="quiz-result-icon mb-4">
                <i class="fas fa-${passed ? 'trophy' : 'redo'} fa-4x text-${passed ? 'warning' : 'muted'}"></i>
            </div>
            
            <h3 class="mb-3">${passed ? 'Congratulations!' : 'Almost There!'}</h3>
            <h4 class="mb-4">You scored ${quiz.score} out of ${quiz.questions.length} (${percentage}%)</h4>
            
            ${passed ? `
                <div class="alert alert-success">
                    <h5><i class="fas fa-dollar-sign me-2"></i>You've earned $5 SPANK Bucks!</h5>
                    <p class="mb-0">Check your email for your reward confirmation.</p>
                </div>
            ` : `
                <div class="alert alert-info">
                    <h6>Review SPANK School lessons and try again next week!</h6>
                    <p class="mb-0">You need 4 or more correct answers to earn SPANK Bucks.</p>
                </div>
            `}
            
            <div class="mt-4">
                <h6>Your Answers:</h6>
                ${quiz.questions.map((q, index) => {
                    const userAnswer = quiz.answers[index];
                    const isCorrect = userAnswer === q.correct;
                    return `
                        <div class="text-start mb-2">
                            <small class="text-muted">Q${index + 1}: ${q.question}</small><br>
                            <span class="badge bg-${isCorrect ? 'success' : 'danger'} me-2">
                                ${isCorrect ? '✓' : '✗'}
                            </span>
                            Your answer: ${q.options[userAnswer]}
                            ${!isCorrect ? `<br><small class="text-success">Correct: ${q.options[q.correct]}</small>` : ''}
                        </div>
                    `;
                }).join('')}
            </div>
        </div>
    `;
    
    document.getElementById('quizContent').innerHTML = content;
    document.getElementById('quizActionBtn').textContent = 'Close';
    document.getElementById('quizActionBtn').onclick = () => {
        bootstrap.Modal.getInstance(document.getElementById('knowledgeQuizModal')).hide();
    };
    
    // Send reward email if passed
    if (passed) {
        sendQuizReward();
    }
}

function sendQuizReward() {
    // Send SPANK Bucks reward email
    const email = prompt('Enter your email to receive $5 SPANK Bucks:');
    if (email) {
        console.log(`Send $5 SPANK Bucks to: ${email} for passing knowledge quiz`);
        alert('Congratulations! Your $5 SPANK Bucks reward has been sent to your email.');
    }
}

// Problem Solver System
const problemSolver = {
    problems: [
        {
            title: "Faucet Won't Stop Dripping",
            icon: "fas fa-tint",
            steps: [
                {
                    question: "Where is it leaking from?",
                    options: [
                        { text: "Tip of the spout", next: "spout_leak" },
                        { text: "Base of handle", next: "handle_leak" }
                    ]
                }
            ],
            solutions: {
                spout_leak: {
                    title: "Spout Leak Solution",
                    content: "Likely a worn cartridge or washer. Turn off water valves under sink, remove handle, and replace the cartridge or washer.",
                    callSpank: "Still leaking? You may have a cracked valve seat."
                },
                handle_leak: {
                    title: "Handle Leak Solution", 
                    content: "Likely a loose packing nut or o-ring. Tighten the packing nut or replace the o-ring around the stem.",
                    callSpank: "Still leaking? The valve stem may need replacement."
                }
            }
        },
        {
            title: "Toilet Keeps Running",
            icon: "fas fa-toilet",
            steps: [
                {
                    question: "Open the tank. What do you see?",
                    options: [
                        { text: "Water level too high", next: "high_water" },
                        { text: "Flapper not sealing", next: "flapper_issue" },
                        { text: "Fill valve hissing", next: "fill_valve" }
                    ]
                }
            ],
            solutions: {
                high_water: {
                    title: "High Water Level Fix",
                    content: "Adjust the float height by bending the float arm down or adjusting the screw on newer fill valves.",
                    callSpank: "Still running? Your overflow pipe may be damaged."
                },
                flapper_issue: {
                    title: "Flapper Replacement",
                    content: "Turn off water, flush to empty tank, and replace the rubber flapper. Make sure the chain has proper slack.",
                    callSpank: "Still running? The flush valve seat may be warped."
                },
                fill_valve: {
                    title: "Fill Valve Replacement",
                    content: "Turn off water, disconnect supply line, and replace the entire fill valve assembly.",
                    callSpank: "Still running? You may have mineral buildup in the system."
                }
            }
        },
        {
            title: "Outlet Isn't Working",
            icon: "fas fa-plug",
            steps: [
                {
                    question: "Try a different device in the outlet. What happens?",
                    options: [
                        { text: "Still doesn't work", next: "outlet_dead" },
                        { text: "Works fine now", next: "device_issue" }
                    ]
                }
            ],
            solutions: {
                outlet_dead: {
                    title: "Dead Outlet Troubleshooting",
                    content: "Check circuit breaker (flip OFF then ON) and look for GFCI reset button. Test with voltage tester if you have one.",
                    callSpank: "Still no power? You need safe outlet replacement or wiring repair."
                },
                device_issue: {
                    title: "Device Problem",
                    content: "The original device was faulty, not the outlet. Try the device in other outlets to confirm.",
                    callSpank: "Device works elsewhere? The outlet may have loose connections."
                }
            }
        }
    ]
};

function showProblemSolver() {
    const modal = new bootstrap.Modal(document.getElementById('problemSolverModal'));
    showProblemList();
    modal.show();
}

function showProblemList() {
    const content = `
        <div class="problem-solver-intro mb-4">
            <h4>🛠️ What's Your Home Repair Problem?</h4>
            <p class="text-muted">Select your issue below for step-by-step troubleshooting guidance.</p>
        </div>
        
        <div class="problem-list">
            ${problemSolver.problems.map((problem, index) => `
                <div class="card mb-3 problem-card" onclick="startProblemSolving(${index})">
                    <div class="card-body d-flex align-items-center">
                        <div class="problem-icon me-3">
                            <i class="${problem.icon} fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h6 class="mb-1">${problem.title}</h6>
                            <small class="text-muted">Click for step-by-step guidance</small>
                        </div>
                        <div class="ms-auto">
                            <i class="fas fa-chevron-right text-muted"></i>
                        </div>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
    
    document.getElementById('problemSolverContent').innerHTML = content;
}

function startProblemSolving(problemIndex) {
    const problem = problemSolver.problems[problemIndex];
    const firstStep = problem.steps[0];
    
    const content = `
        <div class="problem-header mb-4">
            <div class="d-flex align-items-center mb-3">
                <button class="btn btn-outline-secondary btn-sm me-3" onclick="showProblemList()">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <h5 class="mb-0">${problem.title}</h5>
            </div>
        </div>
        
        <div class="problem-step">
            <h6 class="mb-3">${firstStep.question}</h6>
            <div class="step-options">
                ${firstStep.options.map(option => `
                    <button class="btn btn-outline-primary w-100 mb-2" 
                            onclick="showSolution('${option.next}', ${problemIndex})">
                        ${option.text}
                    </button>
                `).join('')}
            </div>
        </div>
    `;
    
    document.getElementById('problemSolverContent').innerHTML = content;
}

function showSolution(solutionKey, problemIndex) {
    const problem = problemSolver.problems[problemIndex];
    const solution = problem.solutions[solutionKey];
    
    const content = `
        <div class="solution-header mb-4">
            <div class="d-flex align-items-center mb-3">
                <button class="btn btn-outline-secondary btn-sm me-3" onclick="startProblemSolving(${problemIndex})">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <h5 class="mb-0">${solution.title}</h5>
            </div>
        </div>
        
        <div class="solution-content">
            <div class="alert alert-info">
                <h6><i class="fas fa-tools me-2"></i>What to do:</h6>
                <p class="mb-0">${solution.content}</p>
            </div>
            
            <div class="alert alert-warning">
                <h6><i class="fas fa-exclamation-triangle me-2"></i>Still having trouble?</h6>
                <p class="mb-0">${solution.callSpank}</p>
            </div>
            
            <div class="text-center mt-4">
                <button class="btn btn-warning btn-lg" onclick="window.location.href='/contact'">
                    <i class="fas fa-phone me-2"></i>Call SPANK for Professional Help
                </button>
            </div>
        </div>
    `;
    
    document.getElementById('problemSolverContent').innerHTML = content;
}

// Interactive Toolbelt Course Functions
let toolbeltState = {
    selectedSlot: null,
    filledSlots: 0,
    maxSlots: 6
};

// Initialize interactive elements when course modal opens
document.addEventListener('DOMContentLoaded', function() {
    // Tool matching game initialization will happen when course loads
});

// Tool Matching Game for Lesson 1
function initToolMatchingGame() {
    const toolItems = document.querySelectorAll('.tool-item');
    const taskZones = document.querySelectorAll('.task-zone');
    
    toolItems.forEach(item => {
        item.addEventListener('dragstart', handleDragStart);
        item.addEventListener('dragend', handleDragEnd);
    });
    
    taskZones.forEach(zone => {
        zone.addEventListener('dragover', handleDragOver);
        zone.addEventListener('drop', handleDrop);
        zone.addEventListener('dragenter', handleDragEnter);
        zone.addEventListener('dragleave', handleDragLeave);
    });
}

function handleDragStart(e) {
    e.dataTransfer.setData('text/plain', e.target.dataset.tool);
    e.target.classList.add('dragging');
}

function handleDragEnd(e) {
    e.target.classList.remove('dragging');
}

function handleDragOver(e) {
    e.preventDefault();
}

function handleDragEnter(e) {
    e.preventDefault();
    e.target.classList.add('drag-over');
}

function handleDragLeave(e) {
    e.target.classList.remove('drag-over');
}

function handleDrop(e) {
    e.preventDefault();
    const toolType = e.dataTransfer.getData('text/plain');
    const taskType = e.target.dataset.task;
    
    e.target.classList.remove('drag-over');
    
    if (toolType === taskType) {
        e.target.classList.add('correct');
        e.target.innerHTML = `✓ Correct! ${e.target.innerHTML}`;
        
        // Find and hide the dragged tool
        const draggedTool = document.querySelector(`[data-tool="${toolType}"]`);
        if (draggedTool) {
            draggedTool.style.display = 'none';
        }
    } else {
        // Show incorrect feedback
        e.target.style.background = '#f8d7da';
        e.target.style.borderColor = '#dc3545';
        setTimeout(() => {
            e.target.style.background = '#e9ecef';
            e.target.style.borderColor = '#adb5bd';
        }, 1000);
    }
}

// Toolbelt Simulator for Lesson 2
function initToolbeltSimulator() {
    const toolChoices = document.querySelectorAll('.tool-choice');
    const slots = document.querySelectorAll('.slot');
    
    toolChoices.forEach(choice => {
        choice.addEventListener('click', function() {
            if (this.classList.contains('selected')) {
                // Deselect tool
                this.classList.remove('selected');
                toolbeltState.selectedSlot = null;
            } else if (toolbeltState.filledSlots < toolbeltState.maxSlots) {
                // Select tool
                toolChoices.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                
                // Find first empty slot and fill it
                const emptySlot = document.querySelector('.slot.empty');
                if (emptySlot) {
                    emptySlot.classList.remove('empty');
                    emptySlot.classList.add('filled');
                    emptySlot.innerHTML = this.innerHTML;
                    emptySlot.dataset.tool = this.dataset.tool;
                    
                    toolbeltState.filledSlots++;
                    this.style.opacity = '0.5';
                    this.style.pointerEvents = 'none';
                }
                
                this.classList.remove('selected');
            }
        });
    });
    
    slots.forEach(slot => {
        slot.addEventListener('click', function() {
            if (this.classList.contains('filled')) {
                // Remove tool from slot
                const toolType = this.dataset.tool;
                this.classList.remove('filled');
                this.classList.add('empty');
                this.innerHTML = `Slot ${this.dataset.slot}`;
                this.removeAttribute('data-tool');
                
                // Re-enable tool choice
                const toolChoice = document.querySelector(`[data-tool="${toolType}"]`);
                if (toolChoice) {
                    toolChoice.style.opacity = '1';
                    toolChoice.style.pointerEvents = 'auto';
                }
                
                toolbeltState.filledSlots--;
            }
        });
    });
}

// Toolbox Organizer for Lesson 3
function initToolboxOrganizer() {
    const scatteredTools = document.querySelectorAll('.scattered-tool');
    const trayZones = document.querySelectorAll('.tray-zone');
    
    scatteredTools.forEach(tool => {
        tool.addEventListener('dragstart', function(e) {
            e.dataTransfer.setData('text/plain', this.dataset.tool);
            this.style.opacity = '0.5';
        });
        
        tool.addEventListener('dragend', function(e) {
            this.style.opacity = '1';
        });
    });
    
    trayZones.forEach(zone => {
        zone.addEventListener('dragover', function(e) {
            e.preventDefault();
        });
        
        zone.addEventListener('drop', function(e) {
            e.preventDefault();
            const toolType = e.dataTransfer.getData('text/plain');
            const draggedTool = document.querySelector(`[data-tool="${toolType}"]`);
            
            if (draggedTool) {
                // Create organized tool element
                const organizedTool = document.createElement('div');
                organizedTool.innerHTML = draggedTool.innerHTML;
                organizedTool.style.background = '#28a745';
                organizedTool.style.color = 'white';
                organizedTool.style.padding = '5px 10px';
                organizedTool.style.borderRadius = '4px';
                organizedTool.style.margin = '2px';
                organizedTool.style.display = 'inline-block';
                
                this.appendChild(organizedTool);
                draggedTool.remove();
            }
        });
    });
}

// Wall Anchor Simulator for Picture Hanging Course
function initWallAnchorSimulator() {
    let simulatorState = {
        selectedWall: null,
        selectedWeight: null,
        correctAnswer: null
    };
    
    const wallChoices = document.querySelectorAll('.wall-choice');
    const weightChoices = document.querySelectorAll('.weight-choice');
    const anchorChoices = document.querySelectorAll('.anchor-choice');
    
    wallChoices.forEach(choice => {
        choice.addEventListener('click', function() {
            wallChoices.forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            simulatorState.selectedWall = this.dataset.wall;
            
            document.querySelector('.picture-weight').style.display = 'block';
        });
    });
    
    weightChoices.forEach(choice => {
        choice.addEventListener('click', function() {
            weightChoices.forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            simulatorState.selectedWeight = this.dataset.weight;
            
            // Determine correct answer
            if (simulatorState.selectedWeight === 'heavy') {
                simulatorState.correctAnswer = 'toggle';
            } else if (simulatorState.selectedWeight === 'medium') {
                simulatorState.correctAnswer = 'plastic';
            } else {
                simulatorState.correctAnswer = 'nail';
            }
            
            document.querySelector('.anchor-selection').style.display = 'block';
        });
    });
    
    anchorChoices.forEach(choice => {
        choice.addEventListener('click', function() {
            const selectedAnchor = this.dataset.anchor;
            const resultDiv = document.querySelector('.simulator-result');
            
            if (selectedAnchor === simulatorState.correctAnswer) {
                resultDiv.innerHTML = `
                    <div class="alert alert-success">
                        <strong>Correct!</strong> ${this.textContent} is the best choice for ${simulatorState.selectedWeight} pictures on ${simulatorState.selectedWall}.
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <strong>Try again!</strong> For ${simulatorState.selectedWeight} pictures on ${simulatorState.selectedWall}, you need a stronger anchor.
                    </div>
                `;
            }
            
            resultDiv.style.display = 'block';
        });
    });
}

// Picture Leveling Simulator
function initPictureLevelingSimulator() {
    let levelingState = {
        step: 0,
        completed: []
    };
}

function addPaintersTape() {
    const tape = document.getElementById('paintersTape');
    tape.style.display = 'block';
    updateLevelingFeedback('Painter\'s tape added! This protects the wall and shows placement.');
    levelingState.completed.push('tape');
}

function useLevel() {
    if (!levelingState.completed.includes('tape')) {
        updateLevelingFeedback('Add painter\'s tape first!');
        return;
    }
    
    const level = document.getElementById('levelTool');
    level.style.display = 'block';
    updateLevelingFeedback('Level tool active! Check horizontal alignment before marking holes.');
    levelingState.completed.push('level');
}

function hangPicture() {
    if (!levelingState.completed.includes('level')) {
        updateLevelingFeedback('Use the level tool first!');
        return;
    }
    
    const picture = document.getElementById('pictureFrame');
    picture.style.display = 'block';
    updateLevelingFeedback('Perfect! Picture hung level and straight. Professional job!');
    levelingState.completed.push('picture');
}

function resetWall() {
    document.getElementById('paintersTape').style.display = 'none';
    document.getElementById('levelTool').style.display = 'none';
    document.getElementById('pictureFrame').style.display = 'none';
    levelingState.completed = [];
    updateLevelingFeedback('Wall reset. Start with painter\'s tape.');
}

function updateLevelingFeedback(message) {
    document.getElementById('levelingFeedback').innerHTML = `
        <div class="alert alert-info">
            <small>${message}</small>
        </div>
    `;
}

// Squeak Simulator for Door Course
function initSqueakSimulator() {
    let currentSqueak = null;
    
    // Randomly select which hinge is "squeaking"
    const hinges = ['top', 'middle', 'bottom'];
    currentSqueak = hinges[Math.floor(Math.random() * hinges.length)];
}

function playSqueak(hingeType) {
    const feedback = document.querySelector('.sound-feedback');
    
    if (hingeType === currentSqueak) {
        feedback.innerHTML = `
            <div class="alert alert-info">
                <small>🔊 *SQUEAK* - This hinge is making noise!</small>
            </div>
        `;
    } else {
        feedback.innerHTML = `
            <div class="alert alert-secondary">
                <small>🔇 *Silent* - This hinge is quiet.</small>
            </div>
        `;
    }
    feedback.style.display = 'block';
}

// Hinge Repair Simulator
function initHingeRepairSimulator() {
    let repairState = {
        currentStep: 1,
        completed: []
    };
}

function performRepairStep(step) {
    const hingePin = document.getElementById('hingePin');
    const feedback = document.getElementById('repairFeedback');
    const buttons = document.querySelectorAll('.repair-step');
    
    switch(step) {
        case 1:
            hingePin.style.transform = 'translateY(-20px)';
            hingePin.style.opacity = '0.5';
            feedback.innerHTML = '<div class="alert alert-success"><small>Pin removed! Clean visible.</small></div>';
            buttons[1].disabled = false;
            buttons[0].disabled = true;
            break;
        case 2:
            hingePin.style.filter = 'brightness(1.2)';
            feedback.innerHTML = '<div class="alert alert-success"><small>Debris cleaned! Pin and barrel are clean.</small></div>';
            buttons[2].disabled = false;
            buttons[1].disabled = true;
            break;
        case 3:
            hingePin.style.boxShadow = '0 0 10px #28a745';
            feedback.innerHTML = '<div class="alert alert-success"><small>Lubricant applied! Pin ready for reinstall.</small></div>';
            buttons[3].disabled = false;
            buttons[2].disabled = true;
            break;
        case 4:
            hingePin.style.transform = 'translateY(0)';
            hingePin.style.opacity = '1';
            feedback.innerHTML = '<div class="alert alert-success"><strong>Repair complete! Door should be squeak-free.</strong></div>';
            buttons[3].disabled = true;
            break;
    }
}

// Lock Compatibility Quiz
function initLockCompatibilityQuiz() {
    const lockChoices = document.querySelectorAll('.lock-choice');
    
    lockChoices.forEach(choice => {
        choice.addEventListener('click', function() {
            const selectedChoice = this.dataset.choice;
            const feedback = document.querySelector('.choice-feedback');
            
            if (selectedChoice === 'keypad') {
                feedback.innerHTML = `
                    <div class="alert alert-success">
                        <strong>Great choice!</strong> A keypad + Bluetooth lock works without existing smart home setup and provides code entry for family members.
                    </div>
                `;
            } else if (selectedChoice === 'wifi') {
                feedback.innerHTML = `
                    <div class="alert alert-warning">
                        <strong>Good option!</strong> Wi-Fi provides remote access but may be overkill without existing smart home integration.
                    </div>
                `;
            } else {
                feedback.innerHTML = `
                    <div class="alert alert-info">
                        <strong>Partial solution!</strong> Retrofit keeps your keys but offers limited smart features compared to full replacement.
                    </div>
                `;
            }
            
            feedback.style.display = 'block';
        });
    });
}

// Caulk Removal Simulator
function initCaulkRemovalSimulator() {
    let removalState = {
        scored: false,
        peeled: false,
        cleaned: false
    };
}

function scoreOldCaulk() {
    const caulkSections = document.querySelectorAll('.caulk-section');
    caulkSections.forEach(section => {
        section.style.borderTop = '2px dashed #dc2626';
        section.style.borderBottom = '2px dashed #dc2626';
    });
    
    updateRemovalFeedback('Caulk scored! Now you can peel it away in strips.');
    removalState.scored = true;
}

function peelCaulk() {
    if (!removalState.scored) {
        updateRemovalFeedback('Score the caulk first with your utility knife!');
        return;
    }
    
    const caulkSections = document.querySelectorAll('.caulk-section');
    caulkSections.forEach((section, index) => {
        setTimeout(() => {
            section.style.opacity = '0.3';
            section.style.transform = 'translateY(-10px)';
            section.textContent = 'Removed';
        }, index * 300);
    });
    
    updateRemovalFeedback('Great! Old caulk peeled away. Clean the surface next.');
    removalState.peeled = true;
}

function cleanSurface() {
    if (!removalState.peeled) {
        updateRemovalFeedback('Remove the old caulk first!');
        return;
    }
    
    const tubSurface = document.getElementById('tubSurface');
    tubSurface.style.background = 'linear-gradient(to right, #e5e7eb, #f3f4f6)';
    
    updateRemovalFeedback('Perfect! Surface is clean and ready for new caulk.');
    removalState.cleaned = true;
}

function resetRemoval() {
    const caulkSections = document.querySelectorAll('.caulk-section');
    caulkSections.forEach(section => {
        section.style.borderTop = 'none';
        section.style.borderBottom = 'none';
        section.style.opacity = '1';
        section.style.transform = 'none';
        section.textContent = 'Old Caulk';
    });
    
    document.getElementById('tubSurface').style.background = '#dee2e6';
    updateRemovalFeedback('Reset complete. Start with scoring the caulk.');
    removalState = { scored: false, peeled: false, cleaned: false };
}

function updateRemovalFeedback(message) {
    document.getElementById('removalFeedback').innerHTML = `
        <div class="alert alert-info">
            <small>${message}</small>
        </div>
    `;
}

// Caulk Application Simulator
function initCaulkApplicationSimulator() {
    let applicationState = {
        taped: false,
        positioned: false,
        applied: false,
        smoothed: false
    };
}

function applyMaskingTape() {
    const tape = document.querySelector('.masking-tape');
    tape.style.display = 'block';
    tape.style.background = '#ffc107';
    tape.style.height = '8px';
    tape.style.width = '100%';
    tape.style.marginBottom = '5px';
    
    updateCaulkingFeedback('Masking tape applied! This ensures straight, clean lines.');
    applicationState.taped = true;
}

function positionCaulkGun() {
    if (!applicationState.taped) {
        updateCaulkingFeedback('Apply masking tape first!');
        return;
    }
    
    const caulkGun = document.getElementById('caulkGun');
    caulkGun.style.display = 'block';
    caulkGun.style.transform = 'rotate(-45deg)';
    
    updateCaulkingFeedback('Caulk gun positioned at 45-degree angle. Ready to apply!');
    applicationState.positioned = true;
}

function applyCaulkBead() {
    if (!applicationState.positioned) {
        updateCaulkingFeedback('Position the caulk gun first!');
        return;
    }
    
    const caulkLine = document.querySelector('.caulk-line');
    caulkLine.style.display = 'block';
    caulkLine.style.background = '#28a745';
    caulkLine.style.height = '6px';
    caulkLine.style.width = '100%';
    caulkLine.style.borderRadius = '3px';
    
    updateCaulkingFeedback('Caulk bead applied! Now smooth it with your finger or tool.');
    applicationState.applied = true;
}

function smoothBead() {
    if (!applicationState.applied) {
        updateCaulkingFeedback('Apply the caulk bead first!');
        return;
    }
    
    const caulkLine = document.querySelector('.caulk-line');
    caulkLine.style.background = 'linear-gradient(to right, #28a745, #20c997)';
    caulkLine.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
    
    updateCaulkingFeedback('Professional caulk line complete! Remove tape while caulk is wet.');
    applicationState.smoothed = true;
}

function resetCaulking() {
    document.querySelector('.masking-tape').style.display = 'none';
    document.querySelector('.caulk-line').style.display = 'none';
    document.getElementById('caulkGun').style.display = 'none';
    updateCaulkingFeedback('Reset complete. Start with masking tape.');
    applicationState = { taped: false, positioned: false, applied: false, smoothed: false };
}

function updateCaulkingFeedback(message) {
    document.getElementById('caulkingFeedback').innerHTML = `
        <div class="alert alert-info">
            <small>${message}</small>
        </div>
    `;
}

// Circuit Tester Simulator
function initCircuitTesterSimulator() {
    let powerOn = true; // Start with power on to demonstrate safety
}

function toggleBreaker(breaker) {
    const isActive = breaker.classList.contains('active');
    
    // Remove active from all breakers
    document.querySelectorAll('.breaker').forEach(b => b.classList.remove('active'));
    
    if (!isActive) {
        breaker.classList.add('active');
        powerOn = true;
    } else {
        powerOn = false;
    }
    
    updateVoltageDisplay();
}

function testVoltage() {
    const result = document.getElementById('voltageResult');
    
    if (powerOn) {
        result.innerHTML = `
            <div class="alert alert-danger">
                <strong>⚡ DANGER!</strong> Live wires detected! Turn off the breaker first.
            </div>
        `;
    } else {
        result.innerHTML = `
            <div class="alert alert-success">
                <strong>✅ SAFE!</strong> No voltage detected. Safe to work on wires.
            </div>
        `;
    }
}

function updateVoltageDisplay() {
    // Visual indicator of power status
    const wires = document.querySelectorAll('.wire');
    wires.forEach(wire => {
        if (powerOn) {
            wire.style.boxShadow = '0 0 10px #dc2626';
        } else {
            wire.style.boxShadow = 'none';
        }
    });
}

// Wire Matching Simulator
function initWireMatchingSimulator() {
    let correctConnections = 0;
    
    // Enable drag and drop for fixture wires
    const fixtureWires = document.querySelectorAll('.fixture-wire');
    const wireNuts = document.querySelectorAll('.wire-nut');
    
    fixtureWires.forEach(wire => {
        wire.addEventListener('dragstart', function(e) {
            e.dataTransfer.setData('text/plain', wire.dataset.wire);
            e.dataTransfer.setData('text/html', wire.outerHTML);
        });
    });
    
    wireNuts.forEach(nut => {
        nut.addEventListener('dragover', function(e) {
            e.preventDefault();
        });
        
        nut.addEventListener('drop', function(e) {
            e.preventDefault();
            const wireType = e.dataTransfer.getData('text/plain');
            const nutType = nut.dataset.connection;
            
            if (wireType === nutType) {
                nut.style.background = '#28a745';
                nut.textContent = '✅';
                correctConnections++;
                
                if (correctConnections === 3) {
                    updateWiringFeedback('All wires connected correctly! Fixture ready to mount.');
                } else {
                    updateWiringFeedback(`Correct! ${wireType} wire connected.`);
                }
            } else {
                nut.style.background = '#dc2626';
                nut.textContent = '❌';
                updateWiringFeedback(`Incorrect! ${wireType} wire doesn't match this connection.`);
                
                setTimeout(() => {
                    nut.style.background = '';
                    nut.textContent = '🔗';
                }, 1500);
            }
        });
    });
}

function updateWiringFeedback(message) {
    document.getElementById('wiringFeedback').innerHTML = `
        <div class="alert alert-info">
            <small>${message}</small>
        </div>
    `;
}

// Smart Switches Course Functions
function initVoltageTestSimulator() {
    let powerState = true; // Start with power on for safety demonstration
    updateVoltageDisplay();
}

function testVoltage(state) {
    const readingElement = document.getElementById('voltageReading');
    const feedbackElement = document.getElementById('voltageFeedback');
    
    if (state === 'on') {
        readingElement.textContent = '120V';
        readingElement.style.color = '#dc2626';
        feedbackElement.innerHTML = `
            <div class="alert alert-danger">
                <strong>⚡ DANGER!</strong> Live voltage detected! Turn off breaker first.
            </div>
        `;
    } else {
        readingElement.textContent = '0V';
        readingElement.style.color = '#28a745';
        feedbackElement.innerHTML = `
            <div class="alert alert-success">
                <strong>✅ SAFE!</strong> No voltage detected. Safe to work.
            </div>
        `;
    }
}

function resetVoltageTest() {
    document.getElementById('voltageReading').textContent = '0V';
    document.getElementById('voltageReading').style.color = '#28a745';
    document.getElementById('voltageFeedback').innerHTML = '';
}

// Wire Matching for Smart Switches
let wireConnections = { live: null, neutral: null, ground: null };

function allowDrop(ev) {
    ev.preventDefault();
}

function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.dataset.wire);
}

function dropWire(ev) {
    ev.preventDefault();
    const wireType = ev.dataTransfer.getData("text");
    const terminal = ev.target.closest('.terminal').dataset.terminal;
    
    wireConnections[terminal] = wireType;
    
    const dropZone = ev.target.closest('.terminal').querySelector('.drop-zone');
    dropZone.textContent = wireType + ' wire';
    dropZone.style.backgroundColor = getWireColor(wireType);
}

function getWireColor(wireType) {
    switch(wireType) {
        case 'black': return '#000';
        case 'white': return '#fff';
        case 'green': return '#28a745';
        default: return '#ccc';
    }
}

function checkWireConnections() {
    const feedback = document.getElementById('wireFeedback');
    let correct = 0;
    let total = 3;
    
    if (wireConnections.live === 'black') correct++;
    if (wireConnections.neutral === 'white') correct++;
    if (wireConnections.ground === 'green') correct++;
    
    if (correct === total) {
        feedback.innerHTML = `
            <div class="alert alert-success">
                <strong>Perfect!</strong> All wires connected correctly. Ready to install!
            </div>
        `;
    } else {
        feedback.innerHTML = `
            <div class="alert alert-warning">
                <strong>${correct}/${total} correct.</strong> Check: Black→Live, White→Neutral, Green→Ground
            </div>
        `;
    }
}

function resetWireMatching() {
    wireConnections = { live: null, neutral: null, ground: null };
    document.querySelectorAll('.drop-zone').forEach(zone => {
        zone.textContent = '';
        zone.style.backgroundColor = '';
    });
    document.getElementById('wireFeedback').innerHTML = '';
}

// Installation Simulator
let installationStep = 0;
const installSteps = ['step1', 'step2', 'step3', 'step4'];

function completeStep(stepNum) {
    if (stepNum === installationStep + 1) {
        const stepElement = document.getElementById('step' + stepNum);
        stepElement.style.backgroundColor = '#28a745';
        stepElement.style.color = 'white';
        stepElement.querySelector('button').textContent = '✓ Done';
        stepElement.querySelector('button').disabled = true;
        
        installationStep = stepNum;
        
        // Enable next step if available
        if (stepNum < 4) {
            const nextStep = document.getElementById('step' + (stepNum + 1));
            nextStep.querySelector('button').disabled = false;
        }
        
        updateInstallFeedback(stepNum);
    }
}

function updateInstallFeedback(step) {
    const feedback = document.getElementById('installFeedback');
    const messages = {
        1: 'Great! Wire connections are secure.',
        2: 'Excellent! Wires properly folded into box.',
        3: 'Perfect! Switch mounted securely.',
        4: 'Success! Smart switch installation complete!'
    };
    
    feedback.innerHTML = `
        <div class="alert alert-success">
            <small>${messages[step]}</small>
        </div>
    `;
    
    if (step === 4) {
        feedback.innerHTML += `
            <div class="alert alert-info mt-2">
                <small><strong>Next:</strong> Download the app and connect to WiFi!</small>
            </div>
        `;
    }
}
</script>
{% endblock %}