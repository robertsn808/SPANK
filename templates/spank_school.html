{% extends "base.html" %}

{% block title %}🧠 Spank School - DIY Learning Hub{% endblock %}

{% block head %}
<style>
    .hero-section {
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        color: white;
        padding: 80px 0 60px;
        margin-top: 76px;
    }
    
    .course-card {
        transition: all 0.3s ease;
        border: none;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        height: 100%;
    }
    
    .course-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .difficulty-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 2;
    }
    
    .progress-indicator {
        height: 4px;
        background: #e9ecef;
        border-radius: 2px;
        overflow: hidden;
    }
    
    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #28a745, #20c997);
        transition: width 0.3s ease;
    }
    
    .course-stats {
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    .feature-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ff6b35, #f7931e);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 24px;
        margin: 0 auto 20px;
    }
    
    .video-badge {
        background: #dc3545;
        color: white;
        font-size: 0.75rem;
        padding: 2px 8px;
        border-radius: 12px;
        margin-left: 8px;
    }
    
    .category-header {
        background: linear-gradient(135deg, #343a40, #495057);
        color: white;
        border-radius: 10px 10px 0 0;
        padding: 20px;
        margin-bottom: 0;
    }
    
    .category-content {
        background: #f8f9fa;
        border-radius: 0 0 10px 10px;
        padding: 25px;
    }
    
    .points-display {
        background: linear-gradient(135deg, #ffc107, #ff8f00);
        color: #212529;
        padding: 10px 20px;
        border-radius: 25px;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(255,193,7,0.3);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h1 class="display-4 fw-bold mb-4">
                    🧠 Welcome to Spank School
                </h1>
                <p class="lead mb-4">
                    Master DIY repairs with professional guidance from Hawaii's trusted handyman experts. 
                    Learn at your own pace with interactive courses, video tutorials, and hands-on challenges.
                </p>
                <div class="d-flex flex-wrap gap-3 align-items-center">
                    <button class="btn btn-warning btn-lg px-4" onclick="scrollToCourses()">
                        <i class="fas fa-play me-2"></i>Start Learning
                    </button>
                    <div class="points-display">
                        <i class="fas fa-star me-2"></i>Spank Points: <span id="userPoints">0</span>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 text-center">
                <img src="{{ url_for('static', filename='images/spank_img.png') }}" 
                     alt="SPANK Mascot" class="img-fluid" style="max-height: 300px;">
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-video"></i>
                </div>
                <h5>Video Tutorials</h5>
                <p class="text-muted">Step-by-step video guides with professional tips</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h5>Interactive Learning</h5>
                <p class="text-muted">Quizzes, challenges, and hands-on practice</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h5>Safety First</h5>
                <p class="text-muted">Professional safety guidance for every project</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="feature-icon">
                    <i class="fas fa-award"></i>
                </div>
                <h5>Earn Points</h5>
                <p class="text-muted">Complete courses and earn Spank Points</p>
            </div>
        </div>
    </div>
</section>

<!-- Course Categories -->
<section class="py-5" id="courses">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Choose Your Learning Path</h2>
            <p class="lead text-muted">From beginner basics to intermediate repairs</p>
        </div>

        <!-- Plumbing Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-wrench me-3"></i>Plumbing Essentials</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Fix a Leaky Faucet
                                        <span class="video-badge">VIDEO</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>8 min • 
                                        <i class="fas fa-list-ol me-1"></i>3 lessons
                                    </p>
                                    <p class="card-text">Stop the drip and save your sanity. Learn to identify, disassemble, and fix common faucet problems.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('faucet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">
                                        Toilet Running Water Fix
                                        <span class="video-badge">VIDEO</span>
                                    </h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>12 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">Master toilet repair with our comprehensive 4-step guide to stop running water.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('toilet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Unclog a Drain Safely</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>12 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">Three safe methods to unclog drains without chemicals or damage to your pipes.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('drain')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Electrical Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-bolt me-3"></i>Electrical Safety</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Replace an Outlet</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>10 min • 
                                        <i class="fas fa-list-ol me-1"></i>3 lessons
                                    </p>
                                    <p class="card-text">Safely replace electrical outlets with proper power shutoff and wiring techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('outlet')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Install a Light Switch</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>7 min • 
                                        <i class="fas fa-list-ol me-1"></i>2 lessons
                                    </p>
                                    <p class="card-text">Learn switch wiring basics and safe installation techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('lightswitch')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Circuit Breaker Basics</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>9 min • 
                                        <i class="fas fa-list-ol me-1"></i>3 lessons
                                    </p>
                                    <p class="card-text">Understand your electrical panel and when to call professionals.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('breaker')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home Improvement Courses -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-home me-3"></i>Home Improvement</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Patch Drywall</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>15 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">Fix holes and damage in drywall with professional techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('drywall')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-success">Beginner</span>
                                <div class="card-body">
                                    <h5 class="card-title">Touch-Up Paint</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>8 min • 
                                        <i class="fas fa-list-ol me-1"></i>3 lessons
                                    </p>
                                    <p class="card-text">Color matching secrets and professional touch-up techniques.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('touchup')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100 position-relative">
                                <span class="difficulty-badge badge bg-warning text-dark">Intermediate</span>
                                <div class="card-body">
                                    <h5 class="card-title">Smart Home Basics</h5>
                                    <p class="course-stats mb-3">
                                        <i class="fas fa-clock me-1"></i>45 min • 
                                        <i class="fas fa-list-ol me-1"></i>4 lessons
                                    </p>
                                    <p class="card-text">DIY smart home upgrades you can actually do yourself.</p>
                                    <div class="progress-indicator mb-3">
                                        <div class="progress-fill" style="width: 0%"></div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="startCourse('smarthome')">
                                        <i class="fas fa-play me-2"></i>Start Course
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Tools Section -->
        <div class="row">
            <div class="col-12">
                <div class="category-header">
                    <h3 class="mb-0"><i class="fas fa-tools me-3"></i>Interactive Learning Tools</h3>
                </div>
                <div class="category-content">
                    <div class="row">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-search"></i>
                                    </div>
                                    <h5 class="card-title">Problem Solver</h5>
                                    <p class="card-text">Step-by-step troubleshooting for common home issues</p>
                                    <button class="btn btn-outline-primary w-100" onclick="startTroubleshooter()">
                                        <i class="fas fa-cogs me-2"></i>Start Solver
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <h5 class="card-title">Knowledge Quiz</h5>
                                    <p class="card-text">Test your DIY knowledge and earn Spank Points</p>
                                    <button class="btn btn-outline-primary w-100" onclick="startQuiz()">
                                        <i class="fas fa-question-circle me-2"></i>Take Quiz
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="card course-card h-100">
                                <div class="card-body text-center">
                                    <div class="feature-icon mb-3">
                                        <i class="fas fa-video"></i>
                                    </div>
                                    <h5 class="card-title">Live Q&A</h5>
                                    <p class="card-text">Join weekly live sessions with SPANK experts</p>
                                    <button class="btn btn-outline-primary w-100" onclick="joinLiveSession()">
                                        <i class="fas fa-users me-2"></i>Join Session
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-5 bg-dark text-white">
    <div class="container text-center">
        <h2 class="mb-4">Need Professional Help?</h2>
        <p class="lead mb-4">Some repairs are best left to the experts. SPANK is here when you need us.</p>
        <div class="d-flex flex-wrap justify-content-center gap-3">
            <a href="{{ url_for('consultation') }}" class="btn btn-warning btn-lg px-4">
                <i class="fas fa-calendar-check me-2"></i>Book Free Consultation
            </a>
            <a href="tel:(808)599-0908" class="btn btn-outline-light btn-lg px-4">
                <i class="fas fa-phone me-2"></i>Call (808) 599-0908
            </a>
        </div>
    </div>
</section>

<!-- Course Modal -->
<div class="modal fade" id="courseModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="courseModalTitle">Course Lesson</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="courseModalBody">
                <!-- Course content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="nextLessonBtn">Next Lesson</button>
            </div>
        </div>
    </div>
</div>

<script>
// Course data structure
const courses = {
    faucet: {
        title: "Fix a Leaky Faucet",
        level: "Beginner",
        duration: "8 minutes",
        lessons: [
            {
                title: "Know Your Faucet",
                duration: "3 min",
                content: `
                    <h6>🎯 Goal: Identify faucet type and leak source</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Determine faucet type:</strong> compression, cartridge, ball, or ceramic disk</li>
                        <li><strong>Check where the leak comes from:</strong> spout, base, or handle</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Cartridge faucets are most common and easy to fix.
                    </div>
                    <div class="mt-3 p-3 bg-primary text-white rounded">
                        <h6>📌 Quick Quiz:</h6>
                        <p class="mb-2">Which type of faucet uses rubber washers?</p>
                        <button class="btn btn-warning btn-sm" onclick="showAnswer('faucet-quiz-1', 'Compression faucets use rubber washers that wear out over time.')">Show Answer</button>
                        <div id="faucet-quiz-1" class="mt-2" style="display: none;"></div>
                    </div>
                `
            },
            {
                title: "Disassemble & Inspect",
                duration: "3 min",
                content: `
                    <h6>🎯 Goal: Open up the faucet safely and locate the worn-out part</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Shut off water supply</strong></li>
                        <li><strong>Plug drain with rag or stopper</strong></li>
                        <li><strong>Remove handle and cartridge or washer</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Take the part to the hardware store to match replacement.
                    </div>
                `
            },
            {
                title: "Replace & Reassemble",
                duration: "2 min",
                content: `
                    <h6>🎯 Goal: Install the new component and confirm it's leak-free</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Insert new cartridge or washer</strong></li>
                        <li><strong>Tighten gently and reassemble</strong></li>
                        <li><strong>Turn water back on and test</strong></li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> A small dab of plumber's grease helps with longevity.
                    </div>
                `
            }
        ]
    },
    toilet: {
        title: "Toilet Running Water Fix",
        level: "Intermediate",
        duration: "12 minutes",
        lessons: [
            {
                title: "How a Toilet Works (Fast!)",
                duration: "3 min",
                content: `
                    <div class="mb-3 p-3 bg-info text-white rounded">
                        <h6><i class="fas fa-video me-2"></i>Video Tutorial Available</h6>
                        <p class="mb-2">Watch SPANK's step-by-step video guide for toilet repair</p>
                        <button class="btn btn-warning btn-sm" onclick="watchVideo('toilet-repair')">Watch Video Guide</button>
                    </div>
                    <h6>🎯 Goal: Understand how the tank, flapper, and fill valve work together</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Lift tank lid</strong> - Set aside carefully</li>
                        <li><strong>Identify parts:</strong> handle, flapper, overflow tube, fill valve</li>
                        <li><strong>Observe the mechanism</strong> - How parts connect and move</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> A worn flapper or misaligned float is often the culprit.
                    </div>
                `
            },
            {
                title: "Diagnose the Running Water",
                duration: "3 min",
                content: `
                    <h6>🎯 Goal: Find out if it's the flapper, fill valve, or overflow</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Drop food coloring in the tank</strong></li>
                        <li><strong>Wait 5-10 minutes</strong></li>
                        <li><strong>Check the bowl</strong> - If it shows in the bowl → flapper is leaking</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Listen for hissing = fill valve problem
                    </div>
                `
            },
            {
                title: "Replace Parts",
                duration: "4 min",
                content: `
                    <h6>🎯 Goal: Perform a quick hardware swap</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Turn off water at shutoff valve</strong></li>
                        <li><strong>Flush to drain tank</strong></li>
                        <li><strong>Replace flapper</strong> (hooks and chain) OR <strong>fill valve</strong> (unscrew and reseat)</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Don't overtighten plastic components.
                    </div>
                `
            },
            {
                title: "Fine-Tune Water Level",
                duration: "2 min",
                content: `
                    <h6>🎯 Goal: Prevent wasteful overfilling</h6>
                    <h6>🛠️ Steps:</h6>
                    <ol>
                        <li><strong>Adjust float arm or screw</strong> until water is 1" below overflow</li>
                        <li><strong>Test multiple times</strong> - Ensure consistent operation</li>
                    </ol>
                    <div class="alert alert-success">
                        <strong>✅ Pro Tip:</strong> Re-test flush performance 3-5 times.
                    </div>
                `
            }
        ]
    }
};

// JavaScript functionality
let currentCourse = null;
let currentLesson = 0;
let userPoints = parseInt(localStorage.getItem('spankPoints') || '0');

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('userPoints').textContent = userPoints;
});

// Smooth scroll to courses
function scrollToCourses() {
    document.getElementById('courses').scrollIntoView({ behavior: 'smooth' });
}

// Start a course
function startCourse(courseId) {
    currentCourse = courses[courseId];
    if (!currentCourse) {
        alert('Course content coming soon! SPANK is developing comprehensive guides for all repairs.');
        return;
    }
    
    currentLesson = 0;
    showLesson();
}

// Show current lesson
function showLesson() {
    if (!currentCourse || currentLesson >= currentCourse.lessons.length) return;
    
    const lesson = currentCourse.lessons[currentLesson];
    const modal = new bootstrap.Modal(document.getElementById('courseModal'));
    
    document.getElementById('courseModalTitle').innerHTML = `
        ${currentCourse.title} - Lesson ${currentLesson + 1}
        <small class="text-muted d-block">${lesson.title} (${lesson.duration})</small>
    `;
    
    document.getElementById('courseModalBody').innerHTML = lesson.content;
    
    // Update next button
    const nextBtn = document.getElementById('nextLessonBtn');
    if (currentLesson < currentCourse.lessons.length - 1) {
        nextBtn.textContent = 'Next Lesson';
        nextBtn.onclick = nextLesson;
    } else {
        nextBtn.textContent = 'Complete Course';
        nextBtn.onclick = completeCourse;
    }
    
    modal.show();
}

// Next lesson
function nextLesson() {
    currentLesson++;
    showLesson();
}

// Complete course
function completeCourse() {
    updatePoints(10);
    bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
    
    setTimeout(() => {
        alert(`Congratulations! You've completed ${currentCourse.title} and earned 10 Spank Points!`);
    }, 500);
}

// Update points
function updatePoints(points) {
    userPoints += points;
    localStorage.setItem('spankPoints', userPoints.toString());
    document.getElementById('userPoints').textContent = userPoints;
}

// Interactive functions
function showAnswer(quizId, answer) {
    const element = document.getElementById(quizId);
    if (element) {
        element.innerHTML = `<div class="alert alert-light mt-2"><strong>Answer:</strong> ${answer}</div>`;
        element.style.display = 'block';
        updatePoints(2);
    }
}

function watchVideo(videoId) {
    const modal = new bootstrap.Modal(document.getElementById('courseModal'));
    document.getElementById('courseModalTitle').textContent = 'SPANK Video Tutorial';
    document.getElementById('courseModalBody').innerHTML = `
        <div class="text-center">
            <div class="alert alert-info">
                <h6><i class="fas fa-video me-2"></i>Professional Video Tutorial</h6>
                <p class="mb-2">Learn with SPANK's expert demonstration</p>
                <p><strong>Coming Soon:</strong> Full video library with step-by-step repairs</p>
            </div>
            <div class="mb-3">
                <p>This video covers professional techniques and safety tips.</p>
            </div>
            <button class="btn btn-primary" onclick="window.open('tel:(808)599-0908')">
                Call SPANK for Professional Service
            </button>
        </div>
    `;
    document.getElementById('nextLessonBtn').textContent = 'Close';
    document.getElementById('nextLessonBtn').onclick = () => {
        bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
    };
    modal.show();
}

function startTroubleshooter() {
    alert('Interactive Problem Solver coming soon! This will guide you through diagnosing common home issues step-by-step.');
}

function startQuiz() {
    alert('Knowledge Quiz coming soon! Test your DIY skills and earn more Spank Points.');
}

function joinLiveSession() {
    alert('Live Q&A sessions coming soon! Join weekly sessions with SPANK experts to get your questions answered.');
}
</script>
{% endblock %}