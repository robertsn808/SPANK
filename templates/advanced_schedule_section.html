<!-- Working Schedule Section -->
<div class="content-card">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-calendar-alt me-2"></i>Advanced Scheduling System
        </h3>
    </div>
    <div class="card-body">
        <!-- Quick Stats -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="stat-card text-center">
                    <i class="fas fa-calendar-check fa-2x text-success mb-2"></i>
                    <h4 id="scheduledCount">0</h4>
                    <p>Scheduled Jobs</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card text-center">
                    <i class="fas fa-clock fa-2x text-warning mb-2"></i>
                    <h4 id="pendingCount">0</h4>
                    <p>Pending</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card text-center">
                    <i class="fas fa-check-circle fa-2x text-info mb-2"></i>
                    <h4 id="completedCount">0</h4>
                    <p>Completed</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card text-center">
                    <i class="fas fa-dollar-sign fa-2x text-success mb-2"></i>
                    <h4 id="revenueTotal">$0</h4>
                    <p>Revenue</p>
                </div>
            </div>
        </div>

        <!-- Calendar Container -->
        <div id="calendar" style="min-height: 600px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px;">
            <div class="text-center py-5">
                <i class="fas fa-calendar-alt fa-3x text-muted mb-3"></i>
                <h5 class="text-muted">Calendar Loading...</h5>
                <p class="text-muted">FullCalendar integration initializing</p>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="row mt-3">
            <div class="col-md-6">
                <button class="btn btn-spankks me-2" onclick="addAppointment()">
                    <i class="fas fa-plus me-1"></i>New Appointment
                </button>
                <button class="btn btn-outline-secondary me-2" onclick="refreshCalendar()">
                    <i class="fas fa-sync-alt me-1"></i>Refresh
                </button>
            </div>
            <div class="col-md-6 text-end">
                <button class="btn btn-outline-info me-2" onclick="exportSchedule()">
                    <i class="fas fa-download me-1"></i>Export
                </button>
                <button class="btn btn-outline-warning" onclick="findAvailableSlots()">
                    <i class="fas fa-search me-1"></i>Find Slots
                </button>
            </div>
        </div>
    </div>
</div>

<script>
console.log('Schedule section loaded');

// Load appointment data
fetch('/api/appointments')
.then(r => r.json())
.then(data => {
    console.log('Appointments:', data);
    document.getElementById('scheduledCount').textContent = data.length || 0;
    document.getElementById('pendingCount').textContent = '0';
    document.getElementById('completedCount').textContent = '0';
    document.getElementById('revenueTotal').textContent = '$0';
})
.catch(e => console.error('Schedule error:', e));

function addAppointment() {
    alert('New appointment modal - Coming soon');
}

function refreshCalendar() {
    location.reload();
}

function exportSchedule() {
    alert('Export functionality - Coming soon');
}

function findAvailableSlots() {
    alert('Available slots finder - Coming soon');
}
</script>

<style>
.stat-card {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 1.5rem;
    height: 100%;
}
</style>